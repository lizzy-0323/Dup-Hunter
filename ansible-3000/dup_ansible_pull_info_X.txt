[{"A_title": "9471: Removed blank line when running with --diff", "A_clean_title": ["9471", "remov", "blank", "line", "when", "run", "diff"], "B_title": "Prevent empty diffs being written between task messages", "B_clean_title": ["prevent", "empti", "diff", "be", "written", "between", "task", "messag"], "A_body": "Fixing issue #9471 \n\nHere are test runs using the template module, and checking the diff between two files. \n1. The first run the diff is shown on the output.\n2. Then the file is updated\n3. diff is run again, since there is no diff, there will be nothing in the output.\n\n``` bash\n$ ansible-playbook  -i hosts 9471.yml --diff --check\n\nPLAY [192.168.1.101] **********************************************************\n\nTASK: [diff-test] *******************************************************\n--- before: /home/henry/testfile\n+++ after: /Users/henry/garage/playbooks/testfile.j2\n@@ -1 +1 @@\n-bar\n+foo\n\nchanged: [192.168.1.101]\n\nPLAY RECAP ********************************************************************\n192.168.1.101              : ok=1    changed=1    unreachable=0    failed=0\n\n---\n\n$ ansible-playbook  -i hosts 9471.yml\n\nPLAY [192.168.1.101] **********************************************************\n\nTASK: [diff-test] *******************************************************\nchanged: [192.168.1.101]\n\nPLAY RECAP ********************************************************************\n192.168.1.101              : ok=1    changed=1    unreachable=0    failed=0\n\n---\n\n$ ansible-playbook  -i hosts 9471.yml --diff --check\n\nPLAY [192.168.1.101] **********************************************************\n\nTASK: [diff-test] *******************************************************\nok: [192.168.1.101]\n\nPLAY RECAP ********************************************************************\n192.168.1.101              : ok=1    changed=0    unreachable=0    failed=0\n```\n\nPlaybook used for the test:\n\n``` yaml\n\n---\n- hosts: 192.168.1.101\n  gather_facts: False\n\n  tasks:\n  - name: diff-test\n    template: src=testfile.j2 dest=/home/henry/testfile\n```\n", "A_clean_body": ["fix", "issu", "9471", "here", "are", "test", "run", "templat", "modul", "check", "diff", "between", "two", "file", "first", "run", "diff", "shown", "output", "then", "file", "updat", "diff", "run", "again", "sinc", "there", "no", "diff", "there", "will", "noth", "output", "bash", "ansibl", "playbook", "host", "9471", "yml", "diff", "check", "play", "192", "168", "101", "task", "diff", "test", "befor", "home", "henri", "testfil", "after", "j2", "user", "henri", "garag", "playbook", "testfil", "+1", "bar", "+foo", "chang", "192", "168", "101", "play", "recap", "192", "168", "101", "ok=1", "changed=1", "unreachable=0", "failed=0", "ansibl", "playbook", "host", "9471", "yml", "play", "192", "168", "101", "task", "diff", "test", "chang", "192", "168", "101", "play", "recap", "192", "168", "101", "ok=1", "changed=1", "unreachable=0", "failed=0", "ansibl", "playbook", "host", "9471", "yml", "diff", "check", "play", "192", "168", "101", "task", "diff", "test", "ok", "192", "168", "101", "play", "recap", "192", "168", "101", "ok=1", "changed=0", "unreachable=0", "failed=0", "playbook", "use", "test", "yaml", "host", "192", "168", "101", "gather", "fact", "fals", "task", "name", "diff", "test", "templat", "src=testfil", "j2", "dest=", "home", "henri", "testfil"], "B_body": "When running a playbook with the --check and --diff options, empty diffs are still passed to the display method, resulting in an empty line being output between each task message.\nThis PR simply checks a non-empty diff was returned before passing to display.\n", "B_clean_body": ["when", "run", "playbook", "check", "diff", "option", "empti", "diff", "are", "still", "pass", "display", "method", "result", "empti", "line", "be", "output", "between", "each", "task", "messag", "thi", "pr", "simpli", "check", "non", "empti", "diff", "wa", "return", "befor", "pass", "display"], "title_sim": [0.4118592097061789], "body_sim": [0.4418444275704801], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.7557914028666373, 0.7557914028666373], "location_sim": [0.65625, 0.65625], "pattern": 0, "time": 68}, {"A_title": "Add missing import of module 'os'", "A_clean_title": ["add", "miss", "import", "modul", "'o"], "B_title": "Fix Unexpected Exception: global name 'os' is not defined", "B_clean_title": ["fix", "unexpect", "except", "global", "name", "'o", "not", "defin"], "A_body": "Fixes #12759\n", "A_clean_body": ["fix", "12759"], "B_body": "I inadvertently introduced it in ca826508d992f99ab6cba75d03a34b804448dfef and didn't notice, because there are no unit tests for playbook_executor.py.  Sorry!\n\n(The `from ansible.errors import *` was used _only_ to get the 'os' module, which makes me go \"what?\")\n", "B_clean_body": ["inadvert", "introduc", "it", "ca826508d992f99ab6cba75d03a34b804448dfef", "did", "n't", "notic", "becaus", "there", "are", "no", "unit", "test", "py", "playbook", "executor", "sorri", "ansibl", "error", "import", "wa", "use", "onli", "get", "'o", "modul", "which", "make", "me", "go", "what"], "title_sim": [-0.009420984221043259], "body_sim": [-0.00860827596554759], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.8150034762448467, 0.8150034762448467], "location_sim": [1.0, 1.0], "pattern": 0, "time": 0}, {"A_title": "removed generated man pages and added them to gitignore", "A_clean_title": ["remov", "gener", "man", "page", "ad", "them", "gitignor"], "B_title": "(edited) remove manpage output from source control", "B_clean_title": ["edit", "remov", "manpag", "output", "sourc", "control"], "A_body": "just to avoid 'changed' status in git repo after running make docs\n", "A_clean_body": ["just", "avoid", "'chang", "statu", "git", "repo", "after", "run", "make", "doc"], "B_body": "##### Issue Type:\n\nBugfix Pull Request\n##### Ansible Version:\n\nansible 1.6 (master 812851cb8b) last updated 2014/05/06 01:23:59 (GMT +000)\n##### Environment:\n\nN/A\n##### Summary:\n\nThere is a minor manpage bug in ansible-pull.1 due to a missing macro definition.\n##### Steps To Reproduce:\n\nRunning:\n\n``` bash\nLC_ALL=en_US.UTF-8 MANROFFSEQ='' MANWIDTH=80  \\\n  man --warnings -E UTF-8 -l -Tutf8 -Z ansible-pull.1 >/dev/null\n```\n\nwill produce the following error:\n\n```\n<standard input>:28: warning: macro `Aq' not defined\n```\n##### Expected Results:\n\nN/A\n##### Actual Results:\n\nN/A\n", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "ansibl", "version", "ansibl", "master", "812851cb8b", "last", "updat", "2014", "05", "06", "01:23:59", "gmt", "+000", "environ", "summari", "there", "minor", "manpag", "bug", "ansibl", "pull", "due", "miss", "macro", "definit", "step", "reproduc", "run", "bash", "utf", "lc", "all=en", "us", "manroffseq=", "manwidth=80", "man", "warn", "utf", "tutf8", "ansibl", "pull", "dev", "null", "will", "produc", "follow", "error", "standard", "input", ":28", "warn", "macro", "aq", "not", "defin", "expect", "result", "actual", "result"], "title_sim": [0.2760662123277274], "body_sim": [0.06355667350879306], "file_list_sim": 0.14285714285714285, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 183}, {"A_title": "Documentation for keystone_user", "A_clean_title": ["document", "keyston", "user"], "B_title": "missing options in docstring breaks 'make deb'", "B_clean_title": ["miss", "option", "docstr", "break", "'make", "deb"], "A_body": "Updated the module with proper documentation.\n", "A_clean_body": ["updat", "modul", "proper", "document"], "B_body": "added minimal options entry\nstill needs to be fully documented\n", "B_clean_body": ["ad", "minim", "option", "entri", "still", "need", "fulli", "document"], "title_sim": [-0.019193849380427636], "body_sim": [0.2865002336972803], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [1.0, 1.0], "pattern": 0, "time": 0}, {"A_title": "Make sure to only remove the first directory in the path.", "A_clean_title": ["make", "sure", "onli", "remov", "first", "directori", "path"], "B_title": "fix ansible galaxy file mangling", "B_clean_title": ["fix", "ansibl", "galaxi", "file", "mangl"], "A_body": "\r\n##### SUMMARY\r\n\r\nThe previous code could affect the entire path and even filenames.\r\nIf a file path has the top level dir name as a substring, galaxy\r\nreplaces it with ''. In one example, the archive top level dir\r\nis 'go', so 'files/go-bin.sh' becomes 'files/-bin.sh'.\r\n\r\nFixes #22572\r\n\r\nThis is a rebase/cherrypick of https://github.com/ansible/ansible/pull/23633\r\n\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n \r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nlib/ansible/cli/galaxy.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.4.0 (galaxy_path_munge_22572 943a0a1510) last updated 2017/04/19 08:49:52 (GMT -400)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/adrian/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/adrian/src/ansible/lib/ansible\r\n  executable location = /home/adrian/src/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Jan 12 2017, 17:59:37) [GCC 6.3.1 20161221 (Red Hat 6.3.1-1)]\r\n\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "A_clean_body": ["summari", "previou", "code", "could", "affect", "entir", "path", "even", "filenam", "file", "path", "ha", "top", "level", "dir", "name", "as", "substr", "galaxi", "replac", "it", "one", "exampl", "archiv", "top", "level", "dir", "'go", "so", "'file", "go", "bin", "sh", "becom", "'file", "bin", "sh", "fix", "22572", "thi", "rebas", "cherrypick", "http", "github", "com", "ansibl", "ansibl", "pull", "23633", "describ", "chang", "includ", "rational", "design", "decis", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "py", "lib", "ansibl", "cli", "galaxi", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "galaxi", "path", "mung", "22572", "943a0a1510", "last", "updat", "2017", "04", "19", "08:49:52", "gmt", "400", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "u'", "home", "adrian", "ansibl", "plugin", "modul", "u'", "usr", "share", "ansibl", "plugin", "modul", "ansibl", "python", "modul", "locat", "home", "adrian", "src", "ansibl", "lib", "ansibl", "execut", "locat", "home", "adrian", "src", "ansibl", "bin", "ansibl", "python", "version", "13", "default", "jan", "12", "2017", "17:59:37", "gcc", "20161221", "red", "hat", "addit", "inform", "includ", "addit", "inform", "help", "peopl", "understand", "chang", "here", "bug", "that", "n't", "have", "link", "bug", "report", "step", "by", "step", "reproduct", "problem", "help", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang"], "B_body": "##### SUMMARY\r\n\r\nwithout this patch, ansible-galaxy will mangle files containing\r\nthe archive parent directory name, eg 'owncloud/files/owncloud.cron'\r\nwill become 'owncloud/files/.cron'.\r\n\r\nthis patch simply limits the replacement to the first occurence of the\r\narchive parent directory name.\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nansible-galaxy\r\n", "B_clean_body": ["summari", "without", "thi", "patch", "ansibl", "galaxi", "will", "mangl", "file", "contain", "archiv", "parent", "directori", "name", "eg", "cron'", "'owncloud", "file", "owncloud", "will", "becom", "cron", "'owncloud", "file", "thi", "patch", "simpli", "limit", "replac", "first", "occur", "archiv", "parent", "directori", "name", "issu", "type", "bugfix", "pull", "request", "compon", "name", "ansibl", "galaxi"], "title_sim": [-0.016895458350725066], "body_sim": [0.19922887409035026], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [1.0, 1.0], "pattern": 0, "time": 0}, {"A_title": "Make scripts into symlinks", "A_clean_title": ["make", "script", "into", "symlink"], "B_title": "Fail when installing from Github-generated .zip", "B_clean_title": ["fail", "when", "instal", "github", "gener", "zip"], "A_body": "pip can't handle zip files with symlinks.  Attempt to workaround that by\r\ntransforming the bin scripts into symlinks after the zip file has been\r\nunarchived into the build tree.\r\n\r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nsetup.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\ndevel\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nWe advise people not to install from github but they do so anyways.  Before, it had no chance of working because of Ansible modules being in git submodules.  Now that the modules are in the same repository we are closer to it being able to work...  If this patch is sufficient we might as well do it.\r\n", "A_clean_body": ["pip", "ca", "n't", "handl", "zip", "file", "symlink", "attempt", "workaround", "that", "by", "transform", "bin", "script", "into", "symlink", "after", "zip", "file", "ha", "been", "unarchiv", "into", "build", "tree", "issu", "type", "bugfix", "pull", "request", "compon", "name", "setup", "py", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "devel", "addit", "inform", "we", "advis", "peopl", "not", "instal", "github", "but", "they", "so", "anyway", "befor", "it", "had", "no", "chanc", "work", "becaus", "ansibl", "modul", "be", "git", "submodul", "now", "that", "modul", "are", "same", "repositori", "we", "are", "closer", "it", "be", "abl", "work", "thi", "patch", "suffici", "we", "might", "as", "well", "it"], "B_body": "##### SUMMARY\r\nThe .zip files generated by GitHub for download do not support symbolic links, however the `bin` directory in the source tree depends on symlinks being there to work. When installing from a GitHub generated .zip-file, when the user runs any script except `ansible` (e.g. `ansible-playbook`), they are given an error as if they were trying to run `ansible`.\r\n\r\nThis patch makes `setup.py` bomb out with a helpful error message in the case that `ansible-playbook` is not a symlink.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nsetup.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.4.0\r\n  config file = \r\n  configured module search path = [u'/Users/jginsberg/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  python version = 2.7.13 (default, Dec 18 2016, 07:03:39) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nNew output when installing from .zip file:\r\n```\r\n(github-fix) Plucky-Badger:bin jginsberg$ pip install https://github.com/j00bar/ansible/archive/fail-on-github-zipfile.zip\r\nCollecting https://github.com/j00bar/ansible/archive/fail-on-github-zipfile.zip\r\n  Downloading https://github.com/j00bar/ansible/archive/fail-on-github-zipfile.zip\r\n     - 7.5MB 3.3MB/s\r\n    Complete output from command python setup.py egg_info:\r\n    It appears that you are installing Ansible from an archive that does not support symbolic links, usually a .zip file downloaded from GitHub. This renders your copy of Ansible unusable.\r\n    \r\n    \r\n    Please re-acquire Ansible from PyPI or from the git repository, and try again.\r\n    \r\n    ----------------------------------------\r\nCommand \"python setup.py egg_info\" failed with error code 3 in /private/var/folders/wg/d5z1m_tn7d31p142wgc800tw0000gp/T/pip-edBgAD-build/\r\n```\r\n\r\nOutput when installing from git repo or PyPi remains unchanged.", "B_clean_body": ["summari", "zip", "file", "gener", "by", "github", "git", "hub", "download", "not", "support", "symbol", "link", "howev", "bin", "directori", "sourc", "tree", "depend", "symlink", "be", "there", "work", "when", "instal", "github", "git", "hub", "gener", "file", "zip", "when", "user", "run", "ani", "script", "except", "ansibl", "ansibl", "playbook", "they", "are", "given", "error", "as", "they", "were", "tri", "run", "ansibl", "thi", "patch", "make", "setup", "py", "bomb", "out", "help", "error", "messag", "case", "that", "ansibl", "playbook", "not", "symlink", "issu", "type", "bugfix", "pull", "request", "compon", "name", "setup", "py", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "config", "file", "configur", "modul", "search", "path", "u'", "user", "jginsberg", "ansibl", "plugin", "modul", "u'", "usr", "share", "ansibl", "plugin", "modul", "python", "version", "13", "default", "dec", "18", "2016", "07:03:39", "gcc", "compat", "appl", "llvm", "clang", "800", "42", "addit", "inform", "new", "output", "when", "instal", "zip", "file", "github", "fix", "plucki", "badger", "bin", "jginsberg", "pip", "instal", "http", "github", "zipfil", "zip", "github", "com", "j00bar", "ansibl", "archiv", "fail", "collect", "http", "github", "zipfil", "zip", "github", "com", "j00bar", "ansibl", "archiv", "fail", "download", "http", "github", "zipfil", "zip", "github", "com", "j00bar", "ansibl", "archiv", "fail", "5mb", "3mb", "complet", "output", "command", "python", "setup", "py", "egg", "info", "it", "appear", "that", "you", "are", "instal", "ansibl", "archiv", "that", "not", "support", "symbol", "link", "usual", "zip", "file", "download", "github", "git", "hub", "thi", "render", "your", "copi", "ansibl", "unus", "pleas", "re", "acquir", "ansibl", "pypi", "py", "pi", "or", "git", "repositori", "tri", "again", "command", "python", "setup", "py", "egg", "info", "fail", "error", "code", "edbgad", "ed", "bg", "ad", "build", "privat", "var", "folder", "wg", "d5z1m", "tn7d31p142wgc800tw0000gp", "pip", "output", "when", "instal", "git", "repo", "or", "pypi", "py", "pi", "remain", "unchang"], "title_sim": [-0.0320954288900966], "body_sim": [0.46750633362267413], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.2511536322894433, 0.2511536322894433], "location_sim": [0.9038461538461539, 0.9038461538461539], "pattern": 0, "time": 4}, {"A_title": "Define get_exception()", "A_clean_title": ["defin", "get", "except"], "B_title": "vmware_guest improvements: annotations & customvalues", "B_clean_title": ["vmware", "guest", "improv", "annot", "customvalu"], "A_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\nv2.3\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\nThis fixes #20080", "A_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "vmware", "guest", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "v2", "summari", "describ", "chang", "includ", "rational", "design", "decis", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "thi", "fix", "20080"], "B_body": "##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.0.0\r\n```\r\n\r\n##### SUMMARY\r\nvmware_guest improvements:\r\n  * Idempotency fix on annotations permitting to change them on reconfiguration\r\n  * Permit to set VMware customvalues attributes on VM\r\n  * Gather annotation & customvalues and report it into module facts\r\n\r\nNew facts:\r\n```\r\nchanged: [127.0.0.1] => {\"changed\": true, \"failed\": false, \"instance\": {\"annotation\": \"this is a huge vm\", \"customvalues\": {\"components\": \"apache2\", \"datacenter\": \"production\"}, \"hw_guest_full_name\": null, \"hw_guest_id\": null, \"hw_interfaces\": [], \"hw_memtotal_mb\": 1024, \"hw_name\": \"test_vm_07\", \"hw_power_status\": \"poweredOn\", \"hw_processor_count\": 1, \"hw_product_uuid\": \"43214556-a8f6-82fc-b9d6-e51bd5a4065e\", \"ipv4\": null, \"ipv6\": null, \"module_hw\": true}}\r\n```\r\n", "B_clean_body": ["issu", "type", "featur", "pull", "request", "compon", "name", "vmware", "guest", "ansibl", "version", "ansibl", "summari", "vmware", "guest", "improv", "idempot", "fix", "annot", "permit", "chang", "them", "reconfigur", "permit", "set", "vmware", "mware", "customvalu", "attribut", "vm", "gather", "annot", "customvalu", "report", "it", "into", "modul", "fact", "new", "fact", "chang", "127", "chang", "true", "fail", "fals", "instanc", "annot", "thi", "huge", "vm", "customvalu", "compon", "apache2", "datacent", "product", "hw", "guest", "full", "name", "null", "hw", "guest", "id", "null", "hw", "interfac", "hw", "memtot", "mb", "1024", "hw", "name", "test", "vm", "07", "hw", "power", "statu", "poweredon", "power", "hw", "processor", "count", "hw", "product", "uuid", "43214556", "a8f6", "82fc", "b9d6", "e51bd5a4065", "ipv4", "null", "ipv6", "null", "modul", "hw", "true"], "title_sim": [0.011913375422323826], "body_sim": [0.13091783004566457], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.05965749626510899, 0.05965749626510899], "location_sim": [0.0, 0.0], "pattern": -1, "time": 0}, {"A_title": "allow registered vars in playbook to be {{ dynamic }}", "A_clean_title": ["allow", "regist", "var", "playbook", "dynam"], "B_title": "Do variable expansion for 'register' variable names", "B_clean_title": ["variabl", "expans", "'regist", "variabl", "name"], "A_body": "A colleague of mine ran into the problem that registered variables were not being overwritten properly when running a role multiple times on the same host for multiple users.\n\n``` yaml\n- name:             foo test\n  command:          /usr/bin/test -e /home/{{ user }}\n  register:         foo\n  failed_when:      false\n  changed_when:     false\n\n- name:             foo echo\n  command:          /usr/bin/echo HOME EXISTS\n  when:             foo.rc != 0\n```\n\nI wasn't able to diagnose whether this is intended or not or what to do about it.  I thought of using dynamic names for registered variables.\n\n``` yaml\n- name:             foo test\n  command:          /usr/bin/test -e /home/{{ user }}\n  register:         foo_{{ user }}\n  failed_when:      false\n  changed_when:     false\n\n- name:             foo echo\n  command:          /usr/bin/echo HOME EXISTS\n  when:             hostvars[inventory_hostname]['foo_' + user].rc != 0\n```\n\nUnfortunately, that didn't work. It seems that the register attribute is not parsed as a template.  I modified ansible to parse the register attribute as a template and now dynamic register variables work and my colleague's problem is solved.\n\nI'd appreciate it if my change could be included in ansible.  `make test` runs fine. If you need more information or if the pull request is not up to your standards please let me know. Thanks.\n\n\\- Felix\n", "A_clean_body": ["colleagu", "mine", "ran", "into", "problem", "that", "regist", "variabl", "were", "not", "be", "overwritten", "properli", "when", "run", "role", "multipl", "time", "same", "host", "multipl", "user", "yaml", "name", "foo", "test", "command", "usr", "bin", "test", "home", "user", "regist", "foo", "fail", "when", "fals", "chang", "when", "fals", "name", "foo", "echo", "command", "usr", "bin", "echo", "home", "exist", "when", "foo", "rc", "wa", "n't", "abl", "diagnos", "whether", "thi", "intend", "or", "not", "or", "what", "about", "it", "thought", "dynam", "name", "regist", "variabl", "yaml", "name", "foo", "test", "command", "usr", "bin", "test", "home", "user", "regist", "foo", "user", "fail", "when", "fals", "chang", "when", "fals", "name", "foo", "echo", "command", "usr", "bin", "echo", "home", "exist", "when", "hostvar", "inventori", "hostnam", "'foo", "user", "rc", "unfortun", "that", "did", "n't", "work", "it", "seem", "that", "regist", "attribut", "not", "pars", "as", "templat", "modifi", "ansibl", "pars", "regist", "attribut", "as", "templat", "now", "dynam", "regist", "variabl", "work", "my", "colleagu", "'s", "problem", "solv", "'d", "appreci", "it", "my", "chang", "could", "includ", "ansibl", "make", "test", "run", "fine", "you", "need", "more", "inform", "or", "pull", "request", "not", "up", "your", "standard", "pleas", "let", "me", "know", "thank", "felix"], "B_body": "Allows to use {{}} expansion in 'register:' variable names. Goes very well with parametrized roles\n", "B_clean_body": ["allow", "use", "expans", "'regist", "variabl", "name", "goe", "veri", "well", "parametr", "role"], "title_sim": [0.004337114136423624], "body_sim": [0.14694502279126773], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.8390687482017627, 0.9819845375825699], "location_sim": [0.5230769230769231, 0.8095238095238095], "pattern": 0, "time": 5}, {"A_title": "Fix relative symlink support", "A_clean_title": ["fix", "rel", "symlink", "support"], "B_title": "File fixes agg", "B_clean_title": ["file", "fix", "agg"], "A_body": "A recent change (I think 2d25577e1104101c67bb5ac41790693780a6d51b) broke support for creating relative symlinks. This should fix it.\n", "A_clean_body": ["recent", "chang", "think", "2d25577e1104101c67bb5ac41790693780a6d51b", "broke", "support", "creat", "rel", "symlink", "thi", "fix", "it"], "B_body": "aggregated 2 previous PRs #6578 and  #6570\n", "B_clean_body": ["aggreg", "previou", "pr", "rs", "6578", "6570"], "title_sim": [0.07902638541468018], "body_sim": [0.02104194039187735], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.46296296296296297, 0.46296296296296297], "pattern": 0, "time": 3}, {"A_title": "Use termios instead of stty for compatibility", "A_clean_title": ["use", "termio", "instead", "stti", "compat"], "B_title": "Fix ansible-doc --list on Solaris", "B_clean_title": ["fix", "ansibl", "doc", "list", "solari"], "A_body": "Solaris does not have \"stty size\", but \"stty -a\" outputs in a different format. Instead of branching on operating system it is more portable to use termios to get the terminal parameters.\n", "A_clean_body": ["solari", "not", "have", "stti", "size", "but", "stti", "output", "differ", "format", "instead", "branch", "oper", "system", "it", "more", "portabl", "use", "termio", "get", "termin", "paramet"], "B_body": "On Solaris, `/usr/bin/stty` has no `size` option.  However, `/usr/ucb/stty` does have this option.\n\nInstall package `compatibility/ucb` to get `/usr/ucb/stty` on Solaris 11.\n", "B_clean_body": ["solari", "usr", "bin", "stti", "ha", "no", "size", "option", "howev", "usr", "ucb", "stti", "have", "thi", "option", "instal", "packag", "compat", "ucb", "get", "usr", "ucb", "stti", "solari", "11"], "title_sim": [-0.015790732180325527], "body_sim": [0.3420718947443139], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.6, 0.6], "pattern": 0, "time": 14}, {"A_title": "task logging revamp", "A_clean_title": ["task", "log", "revamp"], "B_title": " Add no_syslog option in order to prevent ansible syslog its actions on the remote host (rebase  #11502)", "B_clean_title": ["add", "no", "syslog", "option", "order", "prevent", "ansibl", "syslog", "it", "action", "remot", "host", "rebas", "11502"], "A_body": "- allow global no_log setting, no need to set at play or task level, but can be overriden by them\n- allow turning off syslog only on task execution from target host (manage_syslog), overlaps with no_log functionality\n- created log function for task modules to use, now we can remove all syslog references, will use systemd journal if present\n- added debug flag to modules, so they can make it call new log function conditionally\n- added debug logging in module's run_command\n", "A_clean_body": ["allow", "global", "no", "log", "set", "no", "need", "set", "at", "play", "or", "task", "level", "but", "overriden", "by", "them", "allow", "turn", "off", "syslog", "onli", "task", "execut", "target", "host", "manag", "syslog", "overlap", "no", "log", "function", "creat", "log", "function", "task", "modul", "use", "now", "we", "remov", "all", "syslog", "refer", "will", "use", "systemd", "journal", "present", "ad", "debug", "flag", "modul", "so", "they", "make", "it", "call", "new", "log", "function", "condit", "ad", "debug", "log", "modul", "'s", "run", "command"], "B_body": "Add no_syslog option in order to prevent ansible syslog its actions\non the remote host.\n\nSyslog on remote hosts can be turned off by:\n\n```\nno_syslog option inside ansible.cfg.\n-n --no_syslog command line options (ansible and ansible-playbook).\n```\n\nRebased version of #11502\n", "B_clean_body": ["add", "no", "syslog", "option", "order", "prevent", "ansibl", "syslog", "it", "action", "remot", "host", "syslog", "remot", "host", "turn", "off", "by", "no", "syslog", "option", "insid", "ansibl", "cfg", "no", "syslog", "command", "line", "option", "ansibl", "ansibl", "playbook", "rebas", "version", "11502"], "title_sim": [-0.06537061868470471], "body_sim": [0.12515714985147453], "file_list_sim": 0.45454545454545453, "overlap_files_len": 5, "code_sim": [0.29779122410108494, 0.31100743493209165], "location_sim": [0.17142857142857143, 0.22727272727272727], "pattern": 0, "time": 28}, {"A_title": "created makedirs_safe function for use in cases of multiprocess", "A_clean_title": ["creat", "makedir", "safe", "function", "use", "case", "multiprocess"], "B_title": "Fix race-condition in prepare_writeable_dir", "B_clean_title": ["fix", "race", "condit", "prepar", "writeabl", "dir"], "A_body": "should fix #11126 and most race conditions\n", "A_clean_body": ["fix", "11126", "most", "race", "condit"], "B_body": "All ansible invocations will try to create `$HOME/.ansible/cp`. When two runs are triggered at the exact same moment, they will both see `os.path.exists` return `False` and then try to create the dir. They will then collide and one run will fail with `errno.EEXIST`.\n\nWe can fix this by simplifying the code: just create the dir and accept failure because of preexistence. This is what the original code intended anyway.\n", "B_clean_body": ["all", "ansibl", "invoc", "will", "tri", "creat", "home", "ansibl", "cp", "when", "two", "run", "are", "trigger", "at", "exact", "same", "moment", "they", "will", "both", "see", "os", "path", "exist", "return", "fals", "then", "tri", "creat", "dir", "they", "will", "then", "collid", "one", "run", "will", "fail", "errno", "eexist", "we", "fix", "thi", "by", "simplifi", "code", "just", "creat", "dir", "accept", "failur", "becaus", "preexist", "thi", "what", "origin", "code", "intend", "anyway"], "title_sim": [0.0439122963495508], "body_sim": [0.026644720525623344], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.22322320821426958, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 40}, {"A_title": "Fix logging into vCloud Director and expose verify_certs argument", "A_clean_title": ["fix", "log", "into", "vcloud", "cloud", "director", "expos", "verifi", "cert", "argument"], "B_title": "Fixing login for VCD service type in VCA module", "B_clean_title": ["fix", "login", "vcd", "servic", "type", "vca", "modul"], "A_body": "##### ISSUE TYPE\n- Bugfix Pull Request\n##### ANSIBLE VERSION\n\n```\nansible 2.1.0 (devel d97dbe17f9) last updated 2016/04/10 03:13:54 (GMT -700)\n  lib/ansible/modules/core: (detached HEAD 345d9cbca8) last updated 2016/03/16 11:30:54 (GMT -700)\n  lib/ansible/modules/extras: (detached HEAD f9b96b9a8a) last updated 2016/03/16 11:31:07 (GMT -700)\n  config file =\n  configured module search path = Default w/o overrides\n```\n##### SUMMARY\n\nvCloud director standalone login requires an organization to login properly.\nThe login organization was not specified as part of the login sequence.\nAlso, verify_certs is referred to throughout the module, but not specified in module arguments. This fix will expose it.\n\nBefore\n\nLogin error\n\n```\nfatal: [localhost]: FAILED! => {\"changed\": false, \"failed\": true, \"invocation\": {\"module_name\": \"vca_vapp\"}, \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/tmp/ansible_pbp_Cq/ansible_module_vca_vapp.py\\\", line 282, in <module>\\n    main()\\n  File \\\"/tmp/ansible_pbp_Cq/ansible_module_vca_vapp.py\\\", line 246, in main\\n    supports_check_mode=True)\\n  File \\\"/tmp/ansible_pbp_Cq/ansible_modlib.zip/ansible/module_utils/vca.py\\\", line 65, in __init__\\n  File \\\"/tmp/ansible_pbp_Cq/ansible_modlib.zip/ansible/module_utils/vca.py\\\", line 133, in login\\n  File \\\"/usr/lib/python2.7/site-packages/pyvcloud/vcloudair.py\\\", line 223, in login\\n    result = vcloud_session.login(password=password)\\n  File \\\"/usr/lib/python2.7/site-packages/pyvcloud/vcloudsession.py\\\", line 64, in login\\n    self.response = Http.post(self.url, headers=headers, auth=(self.username + \\\"@\\\" + self.org, password), verify=self.verify, logger=self.logger)\\nTypeError: cannot concatenate 'str' and 'NoneType' objects\\n\", \"module_stdout\": \"\", \"msg\": \"MODULE FAILURE\", \"parsed\": false}\n```\n\nverify_certs error\n\n```\nfatal: [localhost]: FAILED! => {\"changed\": false, \"failed\": true, \"invocation\": {\"module_args\": {\"api_version\": 5.5, \"catalog_name\": \"Public_Templates\", \"host\": \"https://vcd4.pdsea.f5net.com\", \"org\": \"Dev2\", \"password\": \"\", \"service_type\": \"vcd\", \"state\": \"present\", \"template_name\": \"ATT-MASTER-ITE-Main\", \"username\": \"akalinin\", \"vapp_name\": \"akalinin-1\", \"vdc_name\": \"Dev2\", \"verify_certs\": false}, \"module_name\": \"vca_vapp\"}, \"msg\": \"unsupported parameter for module: verify_certs\"}\n```\n", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "ansibl", "version", "ansibl", "devel", "d97dbe17f9", "last", "updat", "2016", "04", "10", "03:13:54", "gmt", "700", "lib", "ansibl", "modul", "core", "detach", "head", "345d9cbca8", "last", "updat", "2016", "03", "16", "11:30:54", "gmt", "700", "lib", "ansibl", "modul", "extra", "detach", "head", "f9b96b9a8a", "last", "updat", "2016", "03", "16", "11:31:07", "gmt", "700", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "summari", "vcloud", "cloud", "director", "standalon", "login", "requir", "organ", "login", "properli", "login", "organ", "wa", "not", "specifi", "as", "part", "login", "sequenc", "also", "verifi", "cert", "refer", "throughout", "modul", "but", "not", "specifi", "modul", "argument", "thi", "fix", "will", "expos", "it", "befor", "login", "error", "fatal", "localhost", "fail", "chang", "fals", "fail", "true", "invoc", "modul", "name", "vca", "vapp", "modul", "stderr", "traceback", "most", "recent", "call", "last", "file", "pbp", "modul", "vca", "vapp", "py", "tmp", "ansibl", "cq", "ansibl", "line", "282", "modul", "main", "file", "pbp", "modul", "vca", "vapp", "py", "tmp", "ansibl", "cq", "ansibl", "line", "246", "main", "support", "check", "mode=tru", "file", "pbp", "modlib", "py", "tmp", "ansibl", "cq", "ansibl", "zip", "ansibl", "modul", "util", "vca", "line", "65", "init", "file", "pbp", "modlib", "py", "tmp", "ansibl", "cq", "ansibl", "zip", "ansibl", "modul", "util", "vca", "line", "133", "login", "file", "usr", "lib", "python2", "site", "packag", "pyvcloud", "vcloudair", "py", "line", "223", "login", "result", "login", "vcloud", "session", "password=password", "file", "usr", "lib", "python2", "site", "packag", "pyvcloud", "vcloudsess", "py", "line", "64", "login", "self", "respons", "http", "post", "self", "url", "headers=head", "auth=", "self", "usernam", "self", "org", "password", "verify=self", "verifi", "logger=self", "logger", "ntypeerror", "type", "error", "not", "concaten", "'str", "'nonetyp", "'none", "type", "object", "modul", "stdout", "msg", "modul", "failur", "pars", "fals", "verifi", "cert", "error", "fatal", "localhost", "fail", "chang", "fals", "fail", "true", "invoc", "modul", "arg", "api", "version", "catalog", "name", "public", "templat", "host", "http", "pdsea", "f5net", "com", "vcd4", "org", "dev2", "password", "servic", "type", "vcd", "state", "present", "templat", "name", "att", "master", "ite", "main", "usernam", "akalinin", "vapp", "name", "akalinin", "vdc", "name", "dev2", "verifi", "cert", "fals", "modul", "name", "vca", "vapp", "msg", "unsupport", "paramet", "modul", "verifi", "cert"], "B_body": "Login to vCloud Director Standalone service (`vcd`) fails with the error `Login to VCA failed` because the login routine is missing required `org` parameter. This requirement is documented in the [`pyvcoloud` library](https://github.com/vmware/pyvcloud/blob/master/examples/examples.py#L115).\n", "B_clean_body": ["login", "vcloud", "cloud", "director", "standalon", "servic", "vcd", "fail", "error", "login", "vca", "fail", "becaus", "login", "routin", "miss", "requir", "org", "paramet", "thi", "requir", "document", "pyvcoloud", "librari", "http", "py", "github", "com", "vmware", "pyvcloud", "blob", "master", "exampl", "exampl", "l115"], "title_sim": [0.06590432937633764], "body_sim": [0.26310716258094596], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 73}, {"A_title": "Allow CPU and Memory to be templatable", "A_clean_title": ["allow", "cpu", "memori", "templat"], "B_title": "ecs_taskdefinition: Fix int param types (Fixes #4538)", "B_clean_title": ["ec", "taskdefinit", "fix", "int", "param", "type", "fix", "4538"], "A_body": "##### Issue Type:\r\n- Bugfix Pull Request\r\n##### Plugin Name:\r\n\r\necs_taskdefinition\r\n##### Ansible Version:\r\n\r\n```\r\nansible 2.0.0.2\r\n```\r\n##### Summary:\r\n\r\nCurrently, the module does not allow the CPU and Memory parameters to be templatable. They must be integer/long. This makes the module unusable with variables. In other words, we would need to call the module for every task definition.\r\nThis change will allow the CPU and Memory to be templatable like so,\r\n\r\n```\r\n    containers:\r\n      - name: \"nikhil-test\"\r\n        image: \"nikhil-test-nginx:{{deploy_tag}}\"\r\n        memory: \"{{mycontainers.nginx.memory}}\"\r\n        cpu: \"{{mycontainers.nginx.cpu}}\"\r\n```\r\n##### Example output:\r\n\r\nError before change: \r\n\r\n```\r\nbotocore.exceptions.ParamValidationError: Parameter validation failed:\r\nInvalid type for parameter containerDefinitions[0].memory, value: 1920, type: <type 'str'>, valid types: <type 'int'>, <type 'long'>\r\nInvalid type for parameter containerDefinitions[0].cpu, value: 2560, type: <type 'str'>, valid types: <type 'int'>, <type 'long'>\r\n```\r\n\r\nThis error is not seen with suggested change\r\n\r\n##### Note\r\nThis is a clone of https://github.com/ansible/ansible-modules-extras/pull/1715\r\nI could not rebase the original PR due to losing access to the repo I originally contributed from", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "plugin", "name", "ec", "taskdefinit", "ansibl", "version", "ansibl", "summari", "current", "modul", "not", "allow", "cpu", "memori", "paramet", "templat", "they", "must", "integ", "long", "thi", "make", "modul", "unus", "variabl", "other", "word", "we", "would", "need", "call", "modul", "everi", "task", "definit", "thi", "chang", "will", "allow", "cpu", "memori", "templat", "like", "so", "contain", "name", "nikhil", "test", "imag", "nikhil", "test", "nginx", "deploy", "tag", "memori", "mycontain", "nginx", "memori", "cpu", "mycontain", "nginx", "cpu", "exampl", "output", "error", "befor", "chang", "botocor", "except", "paramvalidationerror", "param", "valid", "error", "paramet", "valid", "fail", "invalid", "type", "paramet", "containerdefinit", "contain", "definit", "memori", "valu", "1920", "type", "type", "'str", "valid", "type", "type", "'int", "type", "'long", "invalid", "type", "paramet", "containerdefinit", "contain", "definit", "cpu", "valu", "2560", "type", "type", "'str", "valid", "type", "type", "'int", "type", "'long", "thi", "error", "not", "seen", "suggest", "chang", "note", "thi", "clone", "http", "modul", "extra", "pull", "1715", "github", "com", "ansibl", "ansibl", "could", "not", "rebas", "origin", "pr", "due", "lose", "access", "repo", "origin", "contribut"], "B_body": "##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\necs_taskdefinition\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.0.0\r\n```\r\n\r\n##### SUMMARY\r\nThis fixes [#4538 on ansible-modules-core](https://github.com/ansible/ansible-modules-core/issues/4538) where given container parameters to the module are always passed on as strings in the container definition parameters, which causes an exception by boto as [some parameters](https://github.com/ansible/ansible-modules-core/issues/4538#issuecomment-242960876) have to be integers. \r\n", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "compon", "name", "ec", "taskdefinit", "ansibl", "version", "ansibl", "summari", "thi", "fix", "4538", "ansibl", "modul", "core", "http", "modul", "core", "issu", "4538", "github", "com", "ansibl", "ansibl", "where", "given", "contain", "paramet", "modul", "are", "alway", "pass", "as", "string", "contain", "definit", "paramet", "which", "caus", "except", "by", "boto", "as", "some", "paramet", "http", "modul", "core", "issu", "4538", "github", "com", "ansibl", "ansibl", "issuecom", "242960876", "have", "integ"], "title_sim": [-0.001901112606025678], "body_sim": [0.4160865732155652], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.6070718627907489, 0.6070718627907489], "location_sim": [0.0, 0.0], "pattern": -1, "time": 4}, {"A_title": "Fixes #20469 - Corrected an arg name and changed upload_file parameter to utilize th\u2026", "A_clean_title": ["fix", "20469", "correct", "arg", "name", "chang", "upload", "file", "paramet", "util", "th\u2026"], "B_title": "fixing mime types in s3_sync module", "B_clean_title": ["fix", "mime", "type", "s3", "sync", "modul"], "A_body": "\u2026e args that were set so mime_map works correctly.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nmodules/cloud/amazon/s3_sync.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\nThe args were set but not used, so I changed that. Now mime_map in the playbook is reflected in what was uploaded to a bucket. One arg name was incorrect so I fixed it. This fixes #20469. \r\n\r\n```\r\nMime sniffing seems to be working properly (excerpt from verbose output):\r\n\r\n        {\r\n            \"_strategy\": \"date_size\",\r\n            \"bytes\": 9,\r\n            \"chopped_path\": \"myfile.txt\",\r\n            \"fullpath\": \"/XXXX/myfolder/myfile.txt\",\r\n            \"local_etag\": \"\\\"f463e2453bfbb7b384911347be4f6298\\\"\",\r\n            \"mime_type\": \"text/plain\",\r\n            \"modified_epoch\": 1484846695,\r\n            \"s3_path\": \"myfolder/myfile.txt\",\r\n            \"why\": \"no s3_head\"\r\n        }\r\n```\r\n", "A_clean_body": ["\u2026e", "arg", "that", "were", "set", "so", "mime", "map", "work", "correctli", "issu", "type", "bugfix", "pull", "request", "compon", "name", "py", "sync", "modul", "cloud", "amazon", "s3", "ansibl", "version", "ansibl", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "summari", "arg", "were", "set", "but", "not", "use", "so", "chang", "that", "now", "mime", "map", "playbook", "reflect", "what", "wa", "upload", "bucket", "one", "arg", "name", "wa", "incorrect", "so", "fix", "it", "thi", "fix", "20469", "mime", "snif", "seem", "work", "properli", "excerpt", "verbos", "output", "strategi", "date", "size", "byte", "chop", "path", "myfil", "txt", "fullpath", "txt", "xxxx", "myfold", "myfil", "local", "etag", "f463e2453bfbb7b384911347be4f6298", "mime", "type", "text", "plain", "modifi", "epoch", "1484846695", "s3", "path", "txt", "myfold", "myfil", "whi", "no", "s3", "head"], "B_body": "##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\ns3_sync\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.0 (s3_sync_mime_fix a498861b21) last updated 2017/01/09 19:15:34 (GMT +000)\r\n  config file = \r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\nThe s3_sync module does not appropriately set the mime type of the files that it syncs to S3. This change makes a minor update to ensure that the mime type is set.  Before this, a file like index.html would have a contentType of binary/octet-stream per s3api head-object. After it has a contentType of text/html.\r\n", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "compon", "name", "s3", "sync", "ansibl", "version", "ansibl", "s3", "sync", "mime", "fix", "a498861b21", "last", "updat", "2017", "01", "09", "19:15:34", "gmt", "+000", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "summari", "s3", "sync", "modul", "not", "appropri", "set", "mime", "type", "file", "that", "it", "sync", "s3", "thi", "chang", "make", "minor", "updat", "ensur", "that", "mime", "type", "set", "befor", "thi", "file", "like", "index", "html", "would", "have", "contenttyp", "content", "type", "stream", "binari", "octet", "per", "s3api", "head", "object", "after", "it", "ha", "contenttyp", "content", "type", "text", "html"], "title_sim": [0.1640689421017583], "body_sim": [0.42521555337317507], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.748712241757484, 0.748712241757484], "location_sim": [1.0, 1.0], "pattern": 1, "time": 9}, {"A_title": "fix deprecation import ansible.vars.unsafe_proxy ", "A_clean_title": ["fix", "deprec", "import", "ansibl", "var", "unsaf", "proxi"], "B_title": "Transition inventory into plugins", "B_clean_title": ["transit", "inventori", "into", "plugin"], "A_body": "##### SUMMARY\r\n\r\nWhen i run this task:\r\n```\r\n- name: set public key for authorized\r\n  authorized_key:\r\n    user: \"{{ lsyncd_user }}\"\r\n    key: \"{{ lookup('file','~/.ansible-store/lsyncd/'~lsyncd_instance~'/'~lsyncd_user~'/id_rsa.pub') }}\"\r\n```\r\nlast version of ansible show Deprecation warning:\r\n\r\n>  [DEPRECATION WARNING]: ansible.vars.unsafe_proxy is deprecated.  Use\r\n> ansible.utils.unsafe_proxy instead..\r\n> This feature will be removed in version\r\n> 2.8. Deprecation warnings can be disabled by setting deprecation_warnings=False\r\n>  in ansible.cfg.\r\n\r\ngrep by code found one string with import\r\nfrom ansible.vars.unsafe_proxy import UnsafeProxy, wrap_var\r\n\r\nchange it to from ansible.utils.unsafe_proxy import UnsafeProxy, wrap_var\r\nand warning does not show anymore\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible-2.4.0-100.git201705150857.3ca3163.devel\r\n```\r\n", "A_clean_body": ["summari", "when", "run", "thi", "task", "name", "set", "public", "key", "author", "author", "key", "user", "lsyncd", "user", "key", "lookup", "'file", "ansibl", "pub", "rsa", "store", "lsyncd", "'~lsyncd", "instance~'", "'~lsyncd", "user~'", "id", "last", "version", "ansibl", "show", "deprec", "warn", "deprec", "warn", "ansibl", "var", "unsaf", "proxi", "deprec", "use", "ansibl", "util", "unsaf", "proxi", "instead", "thi", "featur", "will", "remov", "version", "deprec", "warn", "disabl", "by", "set", "deprec", "warnings=fals", "ansibl", "cfg", "grep", "by", "code", "found", "one", "string", "import", "ansibl", "var", "unsaf", "proxi", "import", "unsafeproxi", "unsaf", "proxi", "wrap", "var", "chang", "it", "ansibl", "util", "unsaf", "proxi", "import", "unsafeproxi", "unsaf", "proxi", "wrap", "var", "warn", "not", "show", "anymor", "issu", "type", "bugfix", "pull", "request", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "100", "git201705150857", "3ca3163", "devel"], "B_body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nImplementing https://github.com/ansible/proposals/issues/41\r\n\r\n- Move from hardcoded 'options' to real plugins (ini, script and yaml as minimal requirements)\r\n- Allow multiple inventories to be specified\r\n- Allow inventory plugins to use the configured cache plugin\r\n- Transition from inventory scripts to plugins (script plugin will exist for backwards compatibility)\r\n- Simplify logic (currently it is duplicated a lot, specially in plugins)\r\n   * Defer data loading to 'data loader' and variable management to 'variable manager'\r\n   * Folds in vars \"inventory\" plugins\r\n\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n - Bugfix Pull Request\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\ninventory\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\n2.4\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nAlso fixes #23057", "B_clean_body": ["summari", "describ", "chang", "includ", "rational", "design", "decis", "implement", "http", "github", "com", "ansibl", "propos", "issu", "41", "move", "hardcod", "'option", "real", "plugin", "ini", "script", "yaml", "as", "minim", "requir", "allow", "multipl", "inventori", "specifi", "allow", "inventori", "plugin", "use", "configur", "cach", "plugin", "transit", "inventori", "script", "plugin", "script", "plugin", "will", "exist", "backward", "compat", "simplifi", "logic", "current", "it", "duplic", "lot", "special", "plugin", "defer", "data", "load", "'data", "loader", "variabl", "manag", "'variabl", "manager'", "fold", "var", "inventori", "plugin", "issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "bugfix", "pull", "request", "doc", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "inventori", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "addit", "inform", "also", "fix", "23057"], "title_sim": [0.015358792795589025], "body_sim": [0.13144094829865385], "file_list_sim": 0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": -1, "time": 52}, {"A_title": "Adds docs/bin/ansible-makepage bash script, to make a single doc page with one command", "A_clean_title": ["add", "makepag", "doc", "bin", "ansibl", "bash", "script", "make", "singl", "doc", "page", "one", "command"], "B_title": "Implement ability to limit module documentation building", "B_clean_title": ["implement", "abil", "limit", "modul", "document", "build"], "A_body": "\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nAdds a bash script, ansible-makepage which can be used to make a single page of the ansible documentation with one command.\r\n\r\nUsed bash as its a popular shell.\r\nAdded a -q|--quiet switch which stops it from sounding the terminal bell when complete.\r\nScript either takes the name of a module, e.g. setup or the name of one of the rst files, for example intro_windows.rst as its input.\r\n\r\nAssumptions:\r\n\r\nYou already have sphinx etc so that you can build docs locally.\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\nDoesn't fix anything, but hopefully helps developers to check they have made documentation that renders correctly during development of modules and ansible documentation changes.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\n\r\nansible-makepage (new script)\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.4.0 (ansible_makepage 74d6ef2290) last updated 2017/06/16 12:36:11 (GMT +100)\r\n  config file = None\r\n  configured module search path = [u'/home/jon/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/jon/ansible-dev/lib/ansible\r\n  executable location = /home/jon/ansible-dev/bin/ansible\r\n  python version = 2.7.6 (default, Jun 22 2015, 17:58:13) [GCC 4.8.2]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\nbefore, you would have had to run this long and hard to remember  set of commands to build a single page:\r\n\r\ncd docs/docsite\r\nmake clean modules staticmin; cp _themes/srtd/static/css/theme.min.css ./_build/html/_static/css; make htmlsingle rst=win_regedit_module.rst; echo ^G\r\n\r\nafter:\r\nrun the following to acheive the same result:\r\n\r\ndocs/bin/ansible-makepage win_regedit\r\n\r\n\r\n```\r\n", "A_clean_body": ["summari", "describ", "chang", "includ", "rational", "design", "decis", "add", "bash", "script", "ansibl", "makepag", "which", "use", "make", "singl", "page", "ansibl", "document", "one", "command", "use", "bash", "as", "it", "popular", "shell", "ad", "q|", "quiet", "switch", "which", "stop", "it", "sound", "termin", "bell", "when", "complet", "script", "either", "take", "name", "modul", "setup", "or", "name", "one", "rst", "file", "exampl", "rst", "intro", "window", "as", "it", "input", "assumpt", "you", "alreadi", "have", "sphinx", "etc", "so", "that", "you", "build", "doc", "local", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "n't", "fix", "anyth", "but", "hope", "help", "develop", "check", "they", "have", "made", "document", "that", "render", "correctli", "dure", "develop", "modul", "ansibl", "document", "chang", "issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "ansibl", "makepag", "new", "script", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "ansibl", "makepag", "74d6ef2290", "last", "updat", "2017", "06", "16", "12:36:11", "gmt", "+100", "config", "file", "none", "configur", "modul", "search", "path", "u'", "home", "jon", "ansibl", "plugin", "modul", "u'", "usr", "share", "ansibl", "plugin", "modul", "ansibl", "python", "modul", "locat", "home", "jon", "ansibl", "dev", "lib", "ansibl", "execut", "locat", "home", "jon", "ansibl", "dev", "bin", "ansibl", "python", "version", "default", "jun", "22", "2015", "17:58:13", "gcc", "addit", "inform", "includ", "addit", "inform", "help", "peopl", "understand", "chang", "here", "bug", "that", "n't", "have", "link", "bug", "report", "step", "by", "step", "reproduct", "problem", "help", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang", "befor", "you", "would", "have", "had", "run", "thi", "long", "hard", "rememb", "set", "command", "build", "singl", "page", "cd", "doc", "docsit", "make", "clean", "modul", "staticmin", "cp", "min", "css", "theme", "srtd", "static", "css", "theme", "build", "html", "static", "css", "make", "htmlsingl", "rst", "rst=win", "regedit", "modul", "echo", "^g", "after", "run", "follow", "acheiv", "same", "result", "makepag", "doc", "bin", "ansibl", "win", "regedit"], "B_body": "##### SUMMARY\r\n\r\nThe purpose of this pull request is to introduce option for limiting which module documentation gets built. Implementation achieves this via `MODULES` environment variable that can get passed-in to `make webdocs`.\r\n\r\nThe reason for this change is to allow both module developers and documentation contributors to more quickly see and test their changes. Building entire documentation for all modules can take quite a while, and it deters from fixing small syntax, typos and similar errors.\r\n\r\n##### ISSUE TYPE\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nDocumentation build system\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.4.0 (doc_module_selection 7b6dd1f4d0) last updated 2017/05/13 13:43:50 (GMT +200)\r\n  config file = \r\n  configured module search path = [u'REDACTED', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = REDACTED\r\n  executable location = REDACTED\r\n  python version = 2.7.12 (default, Dec 13 2016, 14:29:11) [GCC 4.9.3]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nIn order to test the change, you can do the following:\r\n\r\n```\r\ncd docs/docsite/\r\n\r\n# Build documentation for apt module.\r\nMODULES=apt make webdocs\r\n\r\n# Build documentation for a couple of modules.\r\nMODULES=apt,setup,yum make webdocs\r\n\r\n# Don't build documentation for modules.\r\nMODULES=none make webdocs\r\n\r\n# Build documentation for all modules.\r\nMODULES=all make webdocs\r\nmake webdocs\r\n```", "B_clean_body": ["summari", "purpos", "thi", "pull", "request", "introduc", "option", "limit", "which", "modul", "document", "get", "built", "implement", "achiev", "thi", "via", "modul", "environ", "variabl", "that", "get", "pass", "make", "webdoc", "reason", "thi", "chang", "allow", "both", "modul", "develop", "document", "contributor", "more", "quickli", "see", "test", "their", "chang", "build", "entir", "document", "all", "modul", "take", "quit", "while", "it", "deter", "fix", "small", "syntax", "typo", "similar", "error", "issu", "type", "doc", "pull", "request", "compon", "name", "document", "build", "system", "ansibl", "version", "ansibl", "doc", "modul", "select", "7b6dd1f4d0", "last", "updat", "2017", "05", "13", "13:43:50", "gmt", "+200", "config", "file", "configur", "modul", "search", "path", "u'redact", "u'", "usr", "share", "ansibl", "plugin", "modul", "ansibl", "python", "modul", "locat", "redact", "execut", "locat", "redact", "python", "version", "12", "default", "dec", "13", "2016", "14:29:11", "gcc", "addit", "inform", "order", "test", "chang", "you", "follow", "cd", "doc", "docsit", "build", "document", "apt", "modul", "modules=apt", "make", "webdoc", "build", "document", "coupl", "modul", "modules=apt", "setup", "yum", "make", "webdoc", "n't", "build", "document", "modul", "modules=non", "make", "webdoc", "build", "document", "all", "modul", "modules=al", "make", "webdoc", "make", "webdoc"], "title_sim": [-0.014475480589368485], "body_sim": [0.5449349742600142], "file_list_sim": 0.4, "overlap_files_len": 2, "code_sim": [0.10157368325280093, 0.3600660663281658], "location_sim": [0.2893081761006289, 1.0], "pattern": 1, "time": 33}, {"A_title": "Handle missing symlink tempfile ", "A_clean_title": ["handl", "miss", "symlink", "tempfil"], "B_title": "File fixes agg", "B_clean_title": ["file", "fix", "agg"], "A_body": "Only unlink the symlink tempfile on error if it was created in the previous operation.\n", "A_clean_body": ["onli", "unlink", "symlink", "tempfil", "error", "it", "wa", "creat", "previou", "oper"], "B_body": "aggregated 2 previous PRs #6578 and  #6570\n", "B_clean_body": ["aggreg", "previou", "pr", "rs", "6578", "6570"], "title_sim": [-0.00946418844164571], "body_sim": [0.3152668134954753], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.5918367346938775, 0.5918367346938775], "pattern": 0, "time": 0}, {"A_title": "Add Jenkins's pipeline job type to those that don't have a property that makes them enabled/disabled", "A_clean_title": ["add", "jenkin", "'s", "pipelin", "job", "type", "those", "that", "n't", "have", "properti", "that", "make", "them", "enabl", "disabl"], "B_title": "Fixed issue with legacy jenkins instances, following #18995", "B_clean_title": ["fix", "issu", "legaci", "jenkin", "instanc", "follow", "18995"], "A_body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nThe jenkins_job module cannot handle creating jobs of type org.jenkinsci.plugins.workflow.multibranch.WorkflowMultiBranchProject.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nweb_infrastructure/jenkins_job.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.3.1.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n\r\nSee https://github.com/ansible/ansible/issues/18995#issuecomment-308138228", "A_clean_body": ["summari", "describ", "chang", "includ", "rational", "design", "decis", "jenkin", "job", "modul", "not", "handl", "creat", "job", "type", "org", "jenkinsci", "plugin", "workflow", "multibranch", "workflowmultibranchproject", "workflow", "multi", "branch", "project", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "py", "web", "job", "infrastructur", "jenkin", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "python", "version", "10", "default", "feb", "2017", "00:08:15", "gcc", "compat", "appl", "llvm", "clang", "800", "34", "addit", "inform", "includ", "addit", "inform", "help", "peopl", "understand", "chang", "here", "bug", "that", "n't", "have", "link", "bug", "report", "step", "by", "step", "reproduct", "problem", "help", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang", "see", "http", "github", "com", "ansibl", "ansibl", "issu", "18995", "issuecom", "308138228"], "B_body": "##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\njenkins_job module\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.0 (Fix_class_issue_with_jenkins_job 8dc98fee68) last updated 2017/02/07 16:31:22 (GMT +100)\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\nAs a fix for the bug #18995, in #3696 it was added an option to check if \"_class\" for the internal jenkins plugin is in the excluded list, and it was done by using \"get_job_info\" API call from python-jenkins module.\r\nUnfortunately this call give different result for the Jenkins ver. 1.* compare to the Jenkins ver. 2.*.\r\n\r\nOutput for Jenkins 2.*:\r\n```\r\n(u'scm', {u'_class': u'hudson.scm.NullSCM'})\r\n(u'color', u'notbuilt')\r\n(u'lastSuccessfulBuild', None)\r\n(u'actions', [{}, {}, {}, {u'_class': u'com.cloudbees.plugins.credentials.ViewCredentialsAction'}])\r\n(u'lastCompletedBuild', None)\r\n(u'lastUnsuccessfulBuild', None)\r\n(u'upstreamProjects', [])\r\n(u'lastFailedBuild', None)\r\n(u'healthReport', [])\r\n(u'queueItem', None)\r\n(u'lastBuild', None)\r\n**(u'_class', u'hudson.model.FreeStyleProject')**\r\n(u'lastStableBuild', None)\r\n(u'description', u'')\r\n(u'downstreamProjects', [])\r\n(u'concurrentBuild', False)\r\n(u'lastUnstableBuild', None)\r\n(u'buildable', True)\r\n(u'displayNameOrNull', None)\r\n(u'inQueue', False)\r\n(u'keepDependencies', False)\r\n(u'name', u'Test')\r\n(u'displayName', u'Test')\r\n(u'builds', [])\r\n(u'url', u'http://jenkins-internal-v2.master.com/job/Test/')\r\n(u'firstBuild', None)\r\n(u'nextBuildNumber', 1)\r\n(u'property', [{u'_class': u'com.sonyericsson.rebuild.RebuildSettings'}])\r\n```\r\n\r\nOutput for Jenkins 1.* (\"_class\" is missing):\r\n```\r\n(u'scm', {})\r\n(u'color', u'notbuilt')\r\n(u'lastSuccessfulBuild', None)\r\n(u'actions', [{}, {}, {}, {}, {}])\r\n(u'lastCompletedBuild', None)\r\n(u'lastUnsuccessfulBuild', None)\r\n(u'upstreamProjects', [])\r\n(u'lastFailedBuild', None)\r\n(u'healthReport', [])\r\n(u'queueItem', None)\r\n(u'lastBuild', None)\r\n(u'lastStableBuild', None)\r\n(u'description', u'')\r\n(u'downstreamProjects', [])\r\n(u'concurrentBuild', False)\r\n(u'lastUnstableBuild', None)\r\n(u'buildable', True)\r\n(u'displayNameOrNull', None)\r\n(u'inQueue', False)\r\n(u'keepDependencies', False)\r\n(u'name', u'Test_job')\r\n(u'displayName', u'Test_job')\r\n(u'builds', [])\r\n(u'url', u'https://jenkins-internal-v1.master.com/job/Test_job/')\r\n(u'firstBuild', None)\r\n(u'nextBuildNumber', 1)\r\n(u'property', [{}, {}])\r\n```\r\n\r\nSo for Jenkins ver. 1.* this api call doesn't return value **\"_class\"**, which crashes the module with following error:\r\n\r\n ```\r\nansible-playbook -i localhost site.yml -e jenkins_url=\"https://jenkins-internal-v1.master.com\" -e jenkins_token=\"XXXXXXXXX\"\r\n [WARNING]: Host file not found: localhost\r\n\r\n [WARNING]: provided hosts list is empty, only localhost is available\r\n\r\n\r\nPLAY [localhost] ***************************************************************\r\n\r\nTASK [setup] *******************************************************************\r\nok: [localhost]\r\n\r\nTASK [Load variables] **********************************************************\r\nok: [localhost]\r\n\r\nTASK [Add jenkins job] *********************************************************\r\nfailed: [localhost] (item=({u'name': u'Test job'}), \"msg\": \"Unable to fetch job information, '_class'\"}\r\n\tto retry, use: --limit @/Users/loginova/work/git_projects/ott-persistence/persistence-jenkins-jobs/site.retry\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=2    changed=0    unreachable=0    failed=1\r\n```\r\n\r\nIn order to fix this issue, I suggest to use \"get_job_config\" API call, which properly works with all Jenkins versions:\r\n\r\n```\r\nansible-playbook -i localhost site.yml -e jenkins_url=\"https://jenkins-internal-v1.master.com\" -e jenkins_token=\"XXXXXXXXX\"\r\n [WARNING]: Host file not found: localhost\r\n\r\n [WARNING]: provided hosts list is empty, only localhost is available\r\n\r\n\r\nPLAY [localhost] ***************************************************************\r\n\r\nTASK [setup] *******************************************************************\r\nok: [localhost]\r\n\r\nTASK [Load variables] **********************************************************\r\nok: [localhost]\r\n\r\nTASK [Add jenkins job] *********************************************************\r\nchanged: [localhost] => (item=({u'name': u'Test job'}))\r\n\r\nPLAY RECAP *********************************************************************\r\nlocalhost                  : ok=3    changed=2    unreachable=0    failed=0\r\n```\r\n\r\nAlso I've added \"com.cloudbees.hudson.plugins.folder.Folder\" class to the list of excluded plugins, since it has same issue with \"colour\" option.", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "compon", "name", "jenkin", "job", "modul", "ansibl", "version", "ansibl", "fix", "class", "issu", "jenkin", "job", "8dc98fee68", "last", "updat", "2017", "02", "07", "16:31:22", "gmt", "+100", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "summari", "as", "fix", "bug", "18995", "3696", "it", "wa", "ad", "option", "check", "class", "intern", "jenkin", "plugin", "exclud", "list", "it", "wa", "done", "by", "get", "job", "info", "api", "call", "python", "jenkin", "modul", "unfortun", "thi", "call", "give", "differ", "result", "jenkin", "ver", "compar", "jenkin", "ver", "output", "jenkin", "u'scm", "u'", "class", "u'hudson", "scm", "nullscm", "null", "scm", "u'color", "u'notbuilt", "u'lastsuccessfulbuild", "u'last", "success", "build", "none", "u'act", "u'", "class", "u'com", "cloudbe", "plugin", "credenti", "viewcredentialsact", "view", "credenti", "action", "u'lastcompletedbuild", "u'last", "complet", "build", "none", "u'lastunsuccessfulbuild", "u'last", "unsuccess", "build", "none", "u'upstreamproject", "u'upstream", "project", "u'lastfailedbuild", "u'last", "fail", "build", "none", "u'healthreport", "u'health", "report", "u'queueitem", "u'queu", "item", "none", "u'lastbuild", "u'last", "build", "none", "u'", "class", "u'hudson", "model", "freestyleproject", "free", "style", "project", "u'laststablebuild", "u'last", "stabl", "build", "none", "u'descript", "u'downstreamproject", "u'downstream", "project", "u'concurrentbuild", "u'concurr", "build", "fals", "u'lastunstablebuild", "u'last", "unstabl", "build", "none", "u'build", "true", "u'displaynameornul", "u'display", "name", "or", "null", "none", "u'inqueu", "u'in", "queue", "fals", "u'keepdepend", "u'keep", "depend", "fals", "u'nam", "u'test", "u'displaynam", "u'display", "name", "u'test", "u'build", "u'url", "u'http", "intern", "jenkin", "v2", "master", "com", "job", "test", "u'firstbuild", "u'first", "build", "none", "u'nextbuildnumb", "u'next", "build", "number", "u'properti", "u'", "class", "u'com", "sonyericsson", "rebuild", "rebuildset", "rebuild", "set", "output", "jenkin", "class", "miss", "u'scm", "u'color", "u'notbuilt", "u'lastsuccessfulbuild", "u'last", "success", "build", "none", "u'act", "u'lastcompletedbuild", "u'last", "complet", "build", "none", "u'lastunsuccessfulbuild", "u'last", "unsuccess", "build", "none", "u'upstreamproject", "u'upstream", "project", "u'lastfailedbuild", "u'last", "fail", "build", "none", "u'healthreport", "u'health", "report", "u'queueitem", "u'queu", "item", "none", "u'lastbuild", "u'last", "build", "none", "u'laststablebuild", "u'last", "stabl", "build", "none", "u'descript", "u'downstreamproject", "u'downstream", "project", "u'concurrentbuild", "u'concurr", "build", "fals", "u'lastunstablebuild", "u'last", "unstabl", "build", "none", "u'build", "true", "u'displaynameornul", "u'display", "name", "or", "null", "none", "u'inqueu", "u'in", "queue", "fals", "u'keepdepend", "u'keep", "depend", "fals", "u'nam", "u'test", "job", "u'displaynam", "u'display", "name", "u'test", "job", "u'build", "u'url", "u'http", "intern", "jenkin", "v1", "master", "com", "job", "test", "job", "u'firstbuild", "u'first", "build", "none", "u'nextbuildnumb", "u'next", "build", "number", "u'properti", "so", "jenkin", "ver", "thi", "api", "call", "n't", "return", "valu", "class", "which", "crash", "modul", "follow", "error", "ansibl", "playbook", "localhost", "site", "yml", "jenkin", "url=", "http", "intern", "jenkin", "v1", "master", "com", "jenkin", "token=", "xxxxxxxxx", "warn", "host", "file", "not", "found", "localhost", "warn", "provid", "host", "list", "empti", "onli", "localhost", "avail", "play", "localhost", "task", "setup", "ok", "localhost", "task", "load", "variabl", "ok", "localhost", "task", "add", "jenkin", "job", "fail", "localhost", "item=", "u'nam", "u'test", "job", "msg", "unabl", "fetch", "job", "inform", "class", "retri", "use", "limit", "jenkin", "persist", "persist", "retri", "user", "loginova", "work", "git", "project", "ott", "job", "site", "play", "recap", "localhost", "ok=2", "changed=0", "unreachable=0", "failed=1", "order", "fix", "thi", "issu", "suggest", "use", "get", "job", "config", "api", "call", "which", "properli", "work", "all", "jenkin", "version", "ansibl", "playbook", "localhost", "site", "yml", "jenkin", "url=", "http", "intern", "jenkin", "v1", "master", "com", "jenkin", "token=", "xxxxxxxxx", "warn", "host", "file", "not", "found", "localhost", "warn", "provid", "host", "list", "empti", "onli", "localhost", "avail", "play", "localhost", "task", "setup", "ok", "localhost", "task", "load", "variabl", "ok", "localhost", "task", "add", "jenkin", "job", "chang", "localhost", "item=", "u'nam", "u'test", "job", "play", "recap", "localhost", "ok=3", "changed=2", "unreachable=0", "failed=0", "also", "'ve", "ad", "com", "cloudbe", "hudson", "plugin", "folder", "folder", "class", "list", "exclud", "plugin", "sinc", "it", "ha", "same", "issu", "colour", "option"], "title_sim": [0.0021120756633396832], "body_sim": [0.23445338869401527], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.6153846153846154, 0.6153846153846154], "pattern": 1, "time": 126}, {"A_title": "Ensure ssh hostkey checks respect server port", "A_clean_title": ["ensur", "ssh", "hostkey", "check", "respect", "server", "port"], "B_title": "add support for SSH ports in git repository URLs, allows git to auth with non standard ports", "B_clean_title": ["add", "support", "ssh", "port", "git", "repositori", "url", "ur", "ls", "allow", "git", "auth", "non", "standard", "port"], "A_body": "##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nmodule_utils/known_hosts\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.0 (devel 462ab6b1db) last updated 2017/01/31 10:02:44 (GMT +1000)\r\n  config file = \r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\nAlso affects 2.2.1, but not 2.2.0\r\n\r\n##### SUMMARY\r\nssh-keyscan will default to getting the host key for port 22.\r\nIf the ssh service is running on a different port, ssh-keyscan\r\nwill need to know this.\r\n\r\nTidy up minor flake8 issues\r\n", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "compon", "name", "modul", "host", "util", "known", "ansibl", "version", "ansibl", "devel", "462ab6b1db", "last", "updat", "2017", "01", "31", "10:02:44", "gmt", "+1000", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "also", "affect", "but", "not", "summari", "ssh", "keyscan", "will", "default", "get", "host", "key", "port", "22", "ssh", "servic", "run", "differ", "port", "ssh", "keyscan", "will", "need", "know", "thi", "tidi", "up", "minor", "flake8", "issu"], "B_body": "##### Issue Type:\n- Bugfix Pull Request\n##### Summary:\n\nThis pull requests fixes #14574 \n\nIt adds support in `ansible.module_utils.known_hosts` for repository URLs in the following formats, as understood by git itself:\n\n```\nuser@[host:port]/path.git\nuser@[host]/path.git\nssh://user@host:port/repo.git\nssh://[ipv6-addr]:port/path.git\n```\n\n(including git+ssh variants)\n\nBecause SSH stores host and port definitions in known_hosts as `[host]:port`, a function `get_port` was added that extracts the SSH port from the given repository URL.\n\nIt also removes repository URLs in the form\n\n`'username@[2001:DB8::abcd:abcd]:22/example.git'`\n\nfrom the test suite, as in my testing, they did not work in git (the port was not recognized). \n\nThe git integration tests were moved to `destructive.yml`, because they remove the `known_hosts` file.\n##### Example output:\n\nThe example from the bug report now works:\n\n```\n\n---\n- hosts: 127.0.0.1\n  connection: local\n  tasks:\n    - name: try to clone something 1\n      git: repo=git+ssh://git@ssh.github.com:443/jimi-c/test_role.git dest=/tmp/test_role_1\n      ignore_errors: yes\n\n    - name: try to clone something 2\n      git: repo=git@[ssh.github.com:443]:jimi-c/test_role.git dest=/tmp/test_role_2\n      ignore_errors: yes\n```\n\nIt gives the following output:\n\n```\n _________________________________\n< TASK [try to clone something 1] >\n ---------------------------------\n        \\   ^__^\n         \\  (oo)\\_______\n            (__)\\       )\\/\\\n                ||----w |\n                ||     ||\n\nchanged: [127.0.0.1]\n _________________________________\n< TASK [try to clone something 2] >\n ---------------------------------\n        \\   ^__^\n         \\  (oo)\\_______\n            (__)\\       )\\/\\\n                ||----w |\n                ||     ||\n\nchanged: [127.0.0.1]\n```\n", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "summari", "thi", "pull", "request", "fix", "14574", "it", "add", "support", "ansibl", "modul", "util", "known", "host", "repositori", "url", "ur", "ls", "follow", "format", "as", "understood", "by", "git", "itself", "user", "host", "port", "git", "path", "user", "host", "git", "path", "ssh", "user", "host", "git", "port", "repo", "ssh", "ipv6", "addr", "git", "port", "path", "includ", "git+ssh", "variant", "becaus", "ssh", "store", "host", "port", "definit", "known", "host", "as", "host", "port", "function", "get", "port", "wa", "ad", "that", "extract", "ssh", "port", "given", "repositori", "url", "it", "also", "remov", "repositori", "url", "ur", "ls", "form", "'usernam", "2001", "db8", ":abcd", "abcd", "git", ":22", "exampl", "test", "suit", "as", "my", "test", "they", "did", "not", "work", "git", "port", "wa", "not", "recogn", "git", "integr", "test", "were", "move", "destruct", "yml", "becaus", "they", "remov", "known", "host", "file", "exampl", "output", "exampl", "bug", "report", "now", "work", "host", "127", "connect", "local", "task", "name", "tri", "clone", "someth", "git", "repo=git+ssh", "git", "ssh", "github", "git", "com:443", "jimi", "role", "test", "role", "dest=", "tmp", "test", "ignor", "error", "ye", "name", "tri", "clone", "someth", "git", "repo=git", "ssh", "github", "com:443", "jimi", "git", "role", "test", "role", "dest=", "tmp", "test", "ignor", "error", "ye", "it", "give", "follow", "output", "task", "tri", "clone", "someth", "oo", "chang", "127", "task", "tri", "clone", "someth", "oo", "chang", "127"], "title_sim": [0.3892001431527294], "body_sim": [0.4458798692683819], "file_list_sim": 0.2857142857142857, "overlap_files_len": 2, "code_sim": [0.3919388987553913, 0.47106474733825404], "location_sim": [0.3875598086124402, 0.6952789699570815], "pattern": -1, "time": 346}, {"A_title": "Get-FileChecksum doesn't calculate hash for files", "A_clean_title": ["get", "filechecksum", "file", "checksum", "n't", "calcul", "hash", "file"], "B_title": "Part fix for https://github.com/ansible/ansible-modules-core/issues/1404 (replaces #11086)", "B_clean_title": ["part", "fix", "http", "modul", "core", "issu", "1404", "github", "com", "ansibl", "ansibl", "replac", "11086"], "A_body": "missing update of the checksum value before returning the result - $hash is never updated in case file exists\n", "A_clean_body": ["miss", "updat", "checksum", "valu", "befor", "return", "result", "hash", "never", "updat", "case", "file", "exist"], "B_body": "Replacement for previous attempt at this https://github.com/ansible/ansible/pull/11086 which accidentally included some unwanted changes.\n\nGet-FileChecksum always returns a string now and the test_win_copy integration tests that depend on the checksum\nhave been updated in this change too.\n\nAlso requires https://github.com/ansible/ansible-modules-core/pull/1438\n", "B_clean_body": ["replac", "previou", "attempt", "at", "thi", "http", "github", "com", "ansibl", "ansibl", "pull", "11086", "which", "accident", "includ", "some", "unwant", "chang", "get", "filechecksum", "file", "checksum", "alway", "return", "string", "now", "test", "win", "copi", "integr", "test", "that", "depend", "checksum", "have", "been", "updat", "thi", "chang", "too", "also", "requir", "http", "modul", "core", "pull", "1438", "github", "com", "ansibl", "ansibl"], "title_sim": [0.011055045562976096], "body_sim": [0.3062428954085132], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 12}, {"A_title": "Ensure ssh hostkey checks respect server port", "A_clean_title": ["ensur", "ssh", "hostkey", "check", "respect", "server", "port"], "B_title": "git module `accept_hostkey=yes` option now works with non-standart ssh ports", "B_clean_title": ["git", "modul", "accept", "hostkey=y", "option", "now", "work", "non", "standart", "ssh", "port"], "A_body": "##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nmodule_utils/known_hosts\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.0 (devel 462ab6b1db) last updated 2017/01/31 10:02:44 (GMT +1000)\r\n  config file = \r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\nAlso affects 2.2.1, but not 2.2.0\r\n\r\n##### SUMMARY\r\nssh-keyscan will default to getting the host key for port 22.\r\nIf the ssh service is running on a different port, ssh-keyscan\r\nwill need to know this.\r\n\r\nTidy up minor flake8 issues\r\n", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "compon", "name", "modul", "host", "util", "known", "ansibl", "version", "ansibl", "devel", "462ab6b1db", "last", "updat", "2017", "01", "31", "10:02:44", "gmt", "+1000", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "also", "affect", "but", "not", "summari", "ssh", "keyscan", "will", "default", "get", "host", "key", "port", "22", "ssh", "servic", "run", "differ", "port", "ssh", "keyscan", "will", "need", "know", "thi", "tidi", "up", "minor", "flake8", "issu"], "B_body": "##### ISSUE TYPE\n\n<!--- Pick one below and delete the rest: -->\n- Feature Pull Request\n##### ANSIBLE VERSION\n\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\n\n```\n2.1.0.0\n```\n##### SUMMARY\n\n<!--- Describe the change, including rationale and design decisions -->\n\nGit module option `accept_hostkey=yes` now works with non-standart ssh ports also.\nTested on Ubuntu 12.04, ubuntu 14.04, CentOS7 with GitHub on standart ssh port and GitLab with custom ssh port.\nUrl example:  `ssh://[user@]domain.com:[port]/<project_name>`\n\n<!---\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\ncommit message and your description; but you should still explain what\nthe change does.\n-->\n\n<!-- Paste verbatim command output below, e.g. before and after your change -->\n\n```\n\n```\n", "B_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "summari", "describ", "chang", "includ", "rational", "design", "decis", "git", "modul", "option", "accept", "hostkey=y", "now", "work", "non", "standart", "ssh", "port", "also", "test", "ubuntu", "12", "04", "ubuntu", "14", "04", "centos7", "cent", "os7", "github", "git", "hub", "standart", "ssh", "port", "gitlab", "git", "lab", "custom", "ssh", "port", "url", "exampl", "ssh", "user", "domain", "com", "port", "project", "name", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang"], "title_sim": [0.37440801123954226], "body_sim": [0.3811938839400508], "file_list_sim": 0.25, "overlap_files_len": 1, "code_sim": [0.262820384786575, 0.23154362422513286], "location_sim": [0.5866666666666667, 0.9312169312169312], "pattern": -1, "time": 238}, {"A_title": "unarchive module to zip archive with exclude option does not work correctly", "A_clean_title": ["unarch", "modul", "zip", "archiv", "exclud", "option", "not", "work", "correctli"], "B_title": "unarchive: Various changes/improvements, add debugging output", "B_clean_title": ["unarch", "variou", "chang", "improv", "add", "debug", "output"], "A_body": "##### SUMMARY\r\nunarchive module to zip archive with exclude option does not work correctly.\r\nFor example, task described bellow always reports changed=True.\r\n\r\n```\r\n- unarchive:\r\n    src:  apache-tomcat-8.5.15.zip\r\n    dest: /tmp\r\n    exclude:\r\n      - apache-tomcat-8.5.15/webapps/examples\r\n```\r\n\r\nand next example report fails.\r\n\r\n```\r\n    - unarchive:\r\n        src:   apache-tomcat-8.5.15.zip\r\n        dest:  /tmp\r\n        exclude:\r\n          - apache-tomcat-8.5.15/webapps/ROOT/index.jsp\r\n```\r\n\r\n```\r\nfatal: [localhost]: FAILED! => {\"changed\": false, \"check_results\": {\"cmd\": [\"/usr/bin/unzip\", \"-ZT\", \"-s\", \"/root/.ansible/tmp/ansible-tmp-1495755207.8-78580815873129/source\", \" -x \", \"apache-tomcat-8.5.15/webapps/ROOT/index.jsp\"], \"diff\": \"\", \"err\": \"caution: filename not matched:   -x \\n\", \"out\": \"Path apache-tomcat-8.5.15/webapps/ROOT/index.jsp is excluded on request\\n\", \"rc\": 0, \"unarchived\": true}, \"dest\": \"/tmp\", \"failed\": true, \"gid\": 0, \"group\": \"root\", \"handler\": \"ZipArchive\", \"mode\": \"01777\", \"msg\": \"Unexpected error when accessing exploded file: [Errno 2] No such file or directory: '/tmp/apache-tomcat-8.5.15/'\", \"owner\": \"root\", \"size\": 4096, \"src\": \"/root/.ansible/tmp/ansible-tmp-1495755207.8-78580815873129/source\", \"state\": \"directory\", \"uid\": 0}\r\n        to retry, use: --limit @/home/vagrant/test/test.retry\r\n```\r\n\r\nThe reason is an argument passed to unzip command in ZipArchive.is_unarchived method is incorrect.\r\nThis PR fixes argument.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nunarchive\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.3.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.5 (default, Nov  6 2016, 00:28:07) [GCC 4.8.5 20150623 (Red Hat 4.8.5-11)]\r\n```\r\n\r\n", "A_clean_body": ["summari", "unarch", "modul", "zip", "archiv", "exclud", "option", "not", "work", "correctli", "exampl", "task", "describ", "bellow", "alway", "report", "changed=tru", "unarch", "src", "apach", "tomcat", "15", "zip", "dest", "tmp", "exclud", "apach", "tomcat", "15", "webapp", "exampl", "next", "exampl", "report", "fail", "unarch", "src", "apach", "tomcat", "15", "zip", "dest", "tmp", "exclud", "apach", "tomcat", "jsp", "15", "webapp", "root", "index", "fatal", "localhost", "fail", "chang", "fals", "check", "result", "cmd", "usr", "bin", "unzip", "zt", "tmp", "1495755207", "78580815873129", "sourc", "root", "ansibl", "tmp", "ansibl", "apach", "tomcat", "jsp", "15", "webapp", "root", "index", "diff", "err", "caution", "filenam", "not", "match", "out", "path", "apach", "tomcat", "jsp", "15", "webapp", "root", "index", "exclud", "request", "rc", "unarchiv", "true", "dest", "tmp", "fail", "true", "gid", "group", "root", "handler", "ziparch", "zip", "archiv", "mode", "01777", "msg", "unexpect", "error", "when", "access", "explod", "file", "errno", "no", "such", "file", "or", "directori", "tomcat", "tmp", "apach", "15", "owner", "root", "size", "4096", "src", "tmp", "1495755207", "78580815873129", "sourc", "root", "ansibl", "tmp", "ansibl", "state", "directori", "uid", "retri", "use", "limit", "retri", "home", "vagrant", "test", "test", "reason", "argument", "pass", "unzip", "command", "ziparch", "zip", "archiv", "unarchiv", "method", "incorrect", "thi", "pr", "fix", "argument", "issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "unarch", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "python", "version", "default", "nov", "2016", "00:28:07", "gcc", "20150623", "red", "hat", "11"], "B_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the plugin/module/task -->\r\nunarchive\r\n\r\n##### ANSIBLE VERSION\r\n<!---\r\nPaste verbatim output from \u201cansible --version\u201d between quotes below,\r\nthis is to help the Ansible team determine if this is a version specific\r\nissue which is being fixed.\r\n-->\r\nv2.2\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnnn\" in your commit\r\nmessage and your description; but you should still explain what the change does.\r\n-->\r\nVarious changes and improvements:\r\n\r\n- Fixed a few issues with the existing unzip support which were related to Zipfile (which is fundamentally incompatible with unzip excludes/opts).  And issues related to forced ownership.\r\n\r\n- Improvements to the UnarchiveError Exception, so it can report more detailed information to why an archive cannot be handled.\r\n\r\n- A bugfix relatd to unicode filenames and crc32 handling.\r\n\r\n- Renamed a few things so the code is easier to read.\r\n\r\n- Ensure gtar considers size changes to unarchive its content. This fixes ansible/ansible-modules-core#5149\r\n\r\n- Added a note about ZIP archives without directories. This fixes ansible/ansible-modules-core#5744.\r\n\r\nThe unarchive module is a hard beast to tame, corner-cases and platform-specific issues make it hard to troubleshoot individual issues.\r\n\r\n- Improves the default output (e.g. unzip no longer shows standard output, just like gtar) and adds the ability to get debug-output when using -vvvv (verbosity >= 4) or -vvvvv. So that when issues are i reported we have the means to look what is going on internally.\r\n\r\n- Because the output by default is reduced, proper warnings/errors are now more obvious to end-users, e.g.\r\n\r\n```\r\nTASK [unarchive]\r\n***************************************************************\r\ntask path: /home/dag/home-made/ansible.testing/test126.yml:11\r\nchanged: [localhost] => {\"changed\": true, \"dest\": \"/tmp/test126a\", \"extract_results\": {\"cmd\":\r\n[\"/usr/bin/unzip\", \"-q\", \"-o\", \"/home/dag/.ansible/tmp/ansible-tmp-1479989967.66-3171393713112/source\",\r\n\"-x\", \"some.directory/\", \"another.directory/simple.test.file.txt\", \"-d\", \"/tmp/test126a\"], \"err\":\r\n\"caution: excluded filename not matched: some.directory/\\ncaution: excluded filename not matched:\r\nanother.directory/simple.test.file.txt\\n\", \"out\": \"\", \"rc\": 0}, \"gid\": 500, \"group\": \"dag\", \"handler\":\r\n\"ZipArchive\", \"mode\": \"0775\", \"owner\": \"dag\", \"secontext\": \"unconfined_u:object_r:user_tmp_t:s0\",\r\n\"size\": 4096, \"src\": \"/home/dag/.ansible/tmp/ansible-tmp-1479989967.66-3171393713112/source\",\r\n\"state\": \"directory\", \"uid\": 500}\r\n```\r\nWhereas before the complete list of deflated files was being shown (when using -v) which was much more than anyone was willing to look at.\r\n\r\n*Migrated from https://github.com/ansible/ansible-modules-core/pull/5721*", "B_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "compon", "name", "name", "plugin", "modul", "task", "unarch", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "thi", "help", "ansibl", "team", "determin", "thi", "version", "specif", "issu", "which", "be", "fix", "v2", "summari", "describ", "chang", "includ", "rational", "design", "decis", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "variou", "chang", "improv", "fix", "few", "issu", "exist", "unzip", "support", "which", "were", "relat", "zipfil", "which", "fundament", "incompat", "unzip", "exclud", "opt", "issu", "relat", "forc", "ownership", "improv", "unarchiveerror", "unarch", "error", "except", "so", "it", "report", "more", "detail", "inform", "whi", "archiv", "not", "handl", "bugfix", "relatd", "unicod", "filenam", "crc32", "handl", "renam", "few", "thing", "so", "code", "easier", "read", "ensur", "gtar", "consid", "size", "chang", "unarch", "it", "content", "thi", "fix", "modul", "core", "ansibl", "ansibl", "5149", "ad", "note", "about", "zip", "archiv", "without", "directori", "thi", "fix", "modul", "core", "ansibl", "ansibl", "5744", "unarch", "modul", "hard", "beast", "tame", "corner", "case", "platform", "specif", "issu", "make", "it", "hard", "troubleshoot", "individu", "issu", "improv", "default", "output", "unzip", "no", "longer", "show", "standard", "output", "just", "like", "gtar", "add", "abil", "get", "debug", "output", "when", "vvvv", "verbos", "or", "vvvvv", "so", "that", "when", "issu", "are", "report", "we", "have", "mean", "look", "what", "go", "intern", "becaus", "output", "by", "default", "reduc", "proper", "warn", "error", "are", "now", "more", "obviou", "end", "user", "task", "unarch", "task", "path", "home", "dag", "home", "yml:11", "made", "ansibl", "test", "test126", "chang", "localhost", "chang", "true", "dest", "tmp", "test126a", "extract", "result", "cmd", "usr", "bin", "unzip", "tmp", "1479989967", "66", "3171393713112", "sourc", "home", "dag", "ansibl", "tmp", "ansibl", "some", "directori", "anoth", "test", "file", "txt", "directori", "simpl", "tmp", "test126a", "err", "caution", "exclud", "filenam", "not", "match", "some", "directori", "ncaution", "exclud", "filenam", "not", "match", "anoth", "test", "file", "directori", "simpl", "txt", "out", "rc", "gid", "500", "group", "dag", "handler", "ziparch", "zip", "archiv", "mode", "0775", "owner", "dag", "secontext", "unconfin", "object", "user", "tmp", "s0", "size", "4096", "src", "tmp", "1479989967", "66", "3171393713112", "sourc", "home", "dag", "ansibl", "tmp", "ansibl", "state", "directori", "uid", "500", "wherea", "befor", "complet", "list", "deflat", "file", "wa", "be", "shown", "when", "which", "wa", "much", "more", "than", "anyon", "wa", "will", "look", "at", "*migrat", "http", "modul", "core", "pull", "5721*", "github", "com", "ansibl", "ansibl"], "title_sim": [0.3024237719497549], "body_sim": [0.5411261221773558], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 1, "time": 167}, {"A_title": "Use httptester docker image for http tests", "A_clean_title": ["use", "httptester", "docker", "imag", "http", "test"], "B_title": "Add 'external_url' tags intg tests and skip them.", "B_clean_title": ["add", "'extern", "url", "tag", "intg", "test", "skip", "them"], "A_body": "##### ISSUE TYPE\n- Bugfix Pull Request\n##### ANSIBLE VERSION\n\n```\nv2\n```\n##### SUMMARY\n\nAs recently evidenced, when we rely on external services for http tests, we often run into connection time outs, rate limits, etc...\n\nThis PR will spin up a docker container (currently using sivel/httptester) and links it into the test containers.\n\nThe httptester image creates a CA, and certificates needed for the tests.  It also contains httpbin, and nginx so we get a full http/https/sni/httpbin/badssl type of testing capabilities.\n\nThe names such as `ansible.http.tests` is made available through docker linking, and reference the container running nginx/httpbin.\n\nIf desired we can pull the docker image in from https://github.com/sivel/docker-images/tree/master/httptester and make it available from `ansible/ansible:httptester` or similar.\n\nIt will probably take a while for the builds to complete.  Prior build to me squashing commits: https://travis-ci.org/sivel/ansible/builds/129248935\n", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "ansibl", "version", "v2", "summari", "as", "recent", "evidenc", "when", "we", "reli", "extern", "servic", "http", "test", "we", "often", "run", "into", "connect", "time", "out", "rate", "limit", "etc", "thi", "pr", "will", "spin", "up", "docker", "contain", "current", "sivel", "httptester", "link", "it", "into", "test", "contain", "httptester", "imag", "creat", "ca", "certif", "need", "test", "it", "also", "contain", "httpbin", "nginx", "so", "we", "get", "full", "http", "http", "sni", "httpbin", "badssl", "type", "test", "capabl", "name", "such", "as", "ansibl", "http", "test", "made", "avail", "through", "docker", "link", "refer", "contain", "run", "nginx", "httpbin", "desir", "we", "pull", "docker", "imag", "http", "imag", "tree", "master", "httptester", "github", "com", "sivel", "docker", "make", "it", "avail", "ansibl", "ansibl", "httptester", "or", "similar", "it", "will", "probabl", "take", "while", "build", "complet", "prior", "build", "me", "squash", "commit", "http", "travi", "ci", "org", "sivel", "ansibl", "build", "129248935"], "B_body": "##### ISSUE TYPE\n- Bugfix Pull Request\n##### SUMMARY\n\nIn Travis, the test_uri integration tests fail a lot.\nAlmost always because of temporary failures to external\nurls.\n\nThis adds a 'external_url' tag to those tests, and defaults\nrun_tests.sh to set TEST_FLAGS to '--skip-tags external_url'\n", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "summari", "travi", "test", "uri", "integr", "test", "fail", "lot", "almost", "alway", "becaus", "temporari", "failur", "extern", "url", "thi", "add", "'extern", "url", "tag", "those", "test", "default", "sh", "run", "test", "set", "test", "flag", "skip", "tag", "extern", "url"], "title_sim": [0.10049919783339979], "body_sim": [0.186024181905082], "file_list_sim": 0.25, "overlap_files_len": 3, "code_sim": [0.2477222149700672, 0.2477222149700672], "location_sim": [0.864297253634895, 0.9925788497217068], "pattern": 0, "time": 0}, {"A_title": "proposed fix for issue #23352", "A_clean_title": ["propos", "fix", "issu", "23352"], "B_title": "filesystem module: Check for line that starts with 'data' in xfs_info output", "B_clean_title": ["filesystem", "modul", "check", "line", "that", "start", "'data", "xf", "info", "output"], "A_body": "when device name ends with 'data' line matches in :\r\n-                if 'data ' in line:\r\n\r\ncloses #23352\r\n\r\n##### SUMMARY\r\nCheck if first column is 'data' before extracting block_size and block_count\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/system/filesystem.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.2.2.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nidempotentency confirmed with the change.\r\n```\r\nbefore:\r\nlocalhost                  : ok=2    changed=1    unreachable=0    failed=0\r\nafter\r\nlocalhost                  : ok=2    changed=0    unreachable=0    failed=0\r\n```\r\n", "A_clean_body": ["when", "devic", "name", "end", "'data", "line", "match", "'data", "line", "close", "23352", "summari", "check", "first", "column", "'data", "befor", "extract", "block", "size", "block", "count", "issu", "type", "bugfix", "pull", "request", "compon", "name", "py", "lib", "ansibl", "modul", "system", "filesystem", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "addit", "inform", "idempotent", "confirm", "chang", "befor", "localhost", "ok=2", "changed=1", "unreachable=0", "failed=0", "after", "localhost", "ok=2", "changed=0", "unreachable=0", "failed=0"], "B_body": "##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\nmodule filesystem\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible (master)$ ansible --version\r\nansible 2.2.0.0\r\n  config file = /home/jon/ansible.cfg\r\n  configured module search path = Default w/o override\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nI created an LVM volume named 'data' and it causes the filesystem module to break on the first line which does not contain the block size and block count. As a result it continues to try and resize my filesystem even though all of the device space is being utilized.\r\n\r\nInstead of using `bsize=4096 blocks=11009024`, the module must be using `agcount=4 agsize=2752256` which is not going to match the size from `blockdev --getsize64`.\r\n\r\n```\r\nmeta-data=/dev/mapper/ebs_vols-data isize=256    agcount=4, agsize=2752256 blks\r\n         =                       sectsz=512   attr=2, projid32bit=1\r\n         =                       crc=0        finobt=0\r\ndata     =                       bsize=4096   blocks=11009024, imaxpct=25\r\n         =                       sunit=0      swidth=0 blks\r\nnaming   =version 2              bsize=4096   ascii-ci=0 ftype=0\r\n```", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "compon", "name", "modul", "filesystem", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "master", "ansibl", "version", "ansibl", "config", "file", "cfg", "home", "jon", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "summari", "describ", "chang", "includ", "rational", "design", "decis", "creat", "lvm", "volum", "name", "'data", "it", "caus", "filesystem", "modul", "break", "first", "line", "which", "not", "contain", "block", "size", "block", "count", "as", "result", "it", "continu", "tri", "resiz", "my", "filesystem", "even", "though", "all", "devic", "space", "be", "util", "instead", "bsize=4096", "blocks=11009024", "modul", "must", "agcount=4", "agsize=2752256", "which", "not", "go", "match", "size", "blockdev", "getsize64", "meta", "data", "vol", "data=", "dev", "mapper", "eb", "isize=256", "agcount=4", "agsize=2752256", "blk", "sectsz=512", "attr=2", "projid32bit=1", "crc=0", "finobt=0", "data", "bsize=4096", "blocks=11009024", "imaxpct=25", "sunit=0", "swidth=0", "blk", "name", "=version", "bsize=4096", "ascii", "ci=0", "ftype=0"], "title_sim": [-0.008726416898446705], "body_sim": [0.5815752231140168], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [1.0, 1.0], "pattern": -1, "time": 93}, {"A_title": "Fixes #23028, requirements for seboolean module", "A_clean_title": ["fix", "23028", "requir", "seboolean", "modul"], "B_title": "seboolean: Fix issue with changing persistent SELinux boolean values", "B_clean_title": ["seboolean", "fix", "issu", "chang", "persist", "selinux", "se", "linux", "boolean", "valu"], "A_body": "##### SUMMARY\r\n\r\ncf. [#23028](https://github.com/ansible/ansible/issues/23028); adds `libsemanage-python` as a requirement (in the documentation) for the `seboolean` module.\r\n\r\n##### ISSUE TYPE\r\n\r\n- Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\n`seboolean` module\r\n\r\n##### ANSIBLE VERSION\r\n\r\n```\r\nansible 2.2.1.0\r\n```\r\n##### ADDITIONAL INFORMATION\r\n\r\n**N.B.:** No changes to actual executable code, only the commented that used for generating module documentation.", "A_clean_body": ["summari", "cf", "23028", "http", "github", "com", "ansibl", "ansibl", "issu", "23028", "add", "libsemanag", "python", "as", "requir", "document", "seboolean", "modul", "issu", "type", "doc", "pull", "request", "compon", "name", "seboolean", "modul", "ansibl", "version", "ansibl", "addit", "inform", "**n", "no", "chang", "actual", "execut", "code", "onli", "comment", "that", "use", "gener", "modul", "document"], "B_body": "##### SUMMARY\r\nPreviously, when the active SELinux boolean value was the same as the desired value, regardless of the value of `persistent`, the module would simply exit successfully, assuming no need for update. This made the assumption that the active and persistent values should be the same, but that is not always the case. This modification treats both the active and persistent values separately when checking for the need to update. Note that the persistent update mode, however, will still update the active as well as the persistent value. If this is not desired, it is possible to separately toggle the active value alone.\r\n\r\nOther changes:\r\n* Make the check mode actually perform checks for changes\r\n* Organizes semanage commands into set of logical steps\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nseboolean\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.0 (seboolean-persistent-changed 94283d29d9) last updated 2017/03/19 22:20:16 (GMT -400)\r\n  config file = \r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Jan 12 2017, 17:59:37) [GCC 6.3.1 20161221 (Red Hat 6.3.1-1)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nTo test this, we can set the active SELinux boolean value and then change the persistent value to the same value.\r\n```\r\n$ sudo semanage boolean -l | grep use_fusefs_home_dirs\r\nuse_fusefs_home_dirs           (off  ,  off)  Allow use to fusefs home dirs\r\n$ ansible localhost -b -K -m seboolean -a 'name=\"use_fusefs_home_dirs\" state=\"yes\" persistent=\"no\"'\r\n$ sudo semanage boolean -l | grep use_fusefs_home_dirs\r\nuse_fusefs_home_dirs           (on   ,  off)  Allow use to fusefs home dirs\r\n$ ansible localhost -b -K -m seboolean -a 'name=\"use_fusefs_home_dirs\" state=\"yes\" persistent=\"yes\"'\r\n$ sudo semanage boolean -l | grep use_fusefs_home_dirs\r\nuse_fusefs_home_dirs           (on   ,   on)  Allow use to fusefs home dirs\r\n```\r\nNote that in the previous version, the attempt to toggle the persistent value to \"on\" while the active value was \"on\" would exit before doing so.", "B_clean_body": ["summari", "previous", "when", "activ", "selinux", "se", "linux", "boolean", "valu", "wa", "same", "as", "desir", "valu", "regardless", "valu", "persist", "modul", "would", "simpli", "exit", "success", "assum", "no", "need", "updat", "thi", "made", "assumpt", "that", "activ", "persist", "valu", "same", "but", "that", "not", "alway", "case", "thi", "modif", "treat", "both", "activ", "persist", "valu", "separ", "when", "check", "need", "updat", "note", "that", "persist", "updat", "mode", "howev", "will", "still", "updat", "activ", "as", "well", "as", "persist", "valu", "thi", "not", "desir", "it", "possibl", "separ", "toggl", "activ", "valu", "alon", "other", "chang", "make", "check", "mode", "actual", "perform", "check", "chang", "organ", "semanag", "command", "into", "set", "logic", "step", "issu", "type", "featur", "pull", "request", "compon", "name", "seboolean", "ansibl", "version", "ansibl", "seboolean", "persist", "chang", "94283d29d9", "last", "updat", "2017", "03", "19", "22:20:16", "gmt", "400", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "python", "version", "13", "default", "jan", "12", "2017", "17:59:37", "gcc", "20161221", "red", "hat", "addit", "inform", "test", "thi", "we", "set", "activ", "selinux", "se", "linux", "boolean", "valu", "then", "chang", "persist", "valu", "same", "valu", "sudo", "semanag", "boolean", "grep", "use", "fusef", "home", "dir", "use", "fusef", "home", "dir", "off", "off", "allow", "use", "fusef", "home", "dir", "ansibl", "localhost", "seboolean", "'name=", "use", "fusef", "home", "dir", "state=", "ye", "persistent=", "no", "sudo", "semanag", "boolean", "grep", "use", "fusef", "home", "dir", "use", "fusef", "home", "dir", "off", "allow", "use", "fusef", "home", "dir", "ansibl", "localhost", "seboolean", "'name=", "use", "fusef", "home", "dir", "state=", "ye", "persistent=", "ye", "sudo", "semanag", "boolean", "grep", "use", "fusef", "home", "dir", "use", "fusef", "home", "dir", "allow", "use", "fusef", "home", "dir", "note", "that", "previou", "version", "attempt", "toggl", "persist", "valu", "while", "activ", "valu", "wa", "would", "exit", "befor", "do", "so"], "title_sim": [0.04424343823348124], "body_sim": [0.16763294063092074], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": -1, "time": 8}, {"A_title": "Encrypt the vault file after editing only if the contents changed", "A_clean_title": ["encrypt", "vault", "file", "after", "edit", "onli", "content", "chang"], "B_title": "ansible-vault edit: replicate sudoedit behavior", "B_clean_title": ["ansibl", "vault", "edit", "replic", "sudoedit", "behavior"], "A_body": "Rebased to target `lib/ansible/parsing/vault/__init__.py` instead of `bin/ansible-vault`.\n\nCloses #8602\n", "A_clean_body": ["rebas", "target", "py", "init", "lib", "ansibl", "pars", "vault", "instead", "vault", "bin", "ansibl", "close", "8602"], "B_body": "- do not touch original file if temporary file is not changed,\n  but rekey original file if it uses obsolete scheme\n- create new encrypted file if it does not exist\n- see also #7041 and #7042\n", "B_clean_body": ["not", "touch", "origin", "file", "temporari", "file", "not", "chang", "but", "rekey", "origin", "file", "it", "use", "obsolet", "scheme", "creat", "new", "encrypt", "file", "it", "not", "exist", "see", "also", "7041", "7042"], "title_sim": [0.6082672625141636], "body_sim": [0.016798353570052688], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.09170072017940228, 0.0], "location_sim": [0.0, 0.0], "pattern": -1, "time": 339}, {"A_title": "unarchive module to zip archive with exclude option does not work correctly", "A_clean_title": ["unarch", "modul", "zip", "archiv", "exclud", "option", "not", "work", "correctli"], "B_title": "unarchive: PEP8, imports, cosmetics", "B_clean_title": ["unarch", "pep8", "import", "cosmet"], "A_body": "##### SUMMARY\r\nunarchive module to zip archive with exclude option does not work correctly.\r\nFor example, task described bellow always reports changed=True.\r\n\r\n```\r\n- unarchive:\r\n    src:  apache-tomcat-8.5.15.zip\r\n    dest: /tmp\r\n    exclude:\r\n      - apache-tomcat-8.5.15/webapps/examples\r\n```\r\n\r\nand next example report fails.\r\n\r\n```\r\n    - unarchive:\r\n        src:   apache-tomcat-8.5.15.zip\r\n        dest:  /tmp\r\n        exclude:\r\n          - apache-tomcat-8.5.15/webapps/ROOT/index.jsp\r\n```\r\n\r\n```\r\nfatal: [localhost]: FAILED! => {\"changed\": false, \"check_results\": {\"cmd\": [\"/usr/bin/unzip\", \"-ZT\", \"-s\", \"/root/.ansible/tmp/ansible-tmp-1495755207.8-78580815873129/source\", \" -x \", \"apache-tomcat-8.5.15/webapps/ROOT/index.jsp\"], \"diff\": \"\", \"err\": \"caution: filename not matched:   -x \\n\", \"out\": \"Path apache-tomcat-8.5.15/webapps/ROOT/index.jsp is excluded on request\\n\", \"rc\": 0, \"unarchived\": true}, \"dest\": \"/tmp\", \"failed\": true, \"gid\": 0, \"group\": \"root\", \"handler\": \"ZipArchive\", \"mode\": \"01777\", \"msg\": \"Unexpected error when accessing exploded file: [Errno 2] No such file or directory: '/tmp/apache-tomcat-8.5.15/'\", \"owner\": \"root\", \"size\": 4096, \"src\": \"/root/.ansible/tmp/ansible-tmp-1495755207.8-78580815873129/source\", \"state\": \"directory\", \"uid\": 0}\r\n        to retry, use: --limit @/home/vagrant/test/test.retry\r\n```\r\n\r\nThe reason is an argument passed to unzip command in ZipArchive.is_unarchived method is incorrect.\r\nThis PR fixes argument.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nunarchive\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.3.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.5 (default, Nov  6 2016, 00:28:07) [GCC 4.8.5 20150623 (Red Hat 4.8.5-11)]\r\n```\r\n\r\n", "A_clean_body": ["summari", "unarch", "modul", "zip", "archiv", "exclud", "option", "not", "work", "correctli", "exampl", "task", "describ", "bellow", "alway", "report", "changed=tru", "unarch", "src", "apach", "tomcat", "15", "zip", "dest", "tmp", "exclud", "apach", "tomcat", "15", "webapp", "exampl", "next", "exampl", "report", "fail", "unarch", "src", "apach", "tomcat", "15", "zip", "dest", "tmp", "exclud", "apach", "tomcat", "jsp", "15", "webapp", "root", "index", "fatal", "localhost", "fail", "chang", "fals", "check", "result", "cmd", "usr", "bin", "unzip", "zt", "tmp", "1495755207", "78580815873129", "sourc", "root", "ansibl", "tmp", "ansibl", "apach", "tomcat", "jsp", "15", "webapp", "root", "index", "diff", "err", "caution", "filenam", "not", "match", "out", "path", "apach", "tomcat", "jsp", "15", "webapp", "root", "index", "exclud", "request", "rc", "unarchiv", "true", "dest", "tmp", "fail", "true", "gid", "group", "root", "handler", "ziparch", "zip", "archiv", "mode", "01777", "msg", "unexpect", "error", "when", "access", "explod", "file", "errno", "no", "such", "file", "or", "directori", "tomcat", "tmp", "apach", "15", "owner", "root", "size", "4096", "src", "tmp", "1495755207", "78580815873129", "sourc", "root", "ansibl", "tmp", "ansibl", "state", "directori", "uid", "retri", "use", "limit", "retri", "home", "vagrant", "test", "test", "reason", "argument", "pass", "unzip", "command", "ziparch", "zip", "archiv", "unarchiv", "method", "incorrect", "thi", "pr", "fix", "argument", "issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "unarch", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "python", "version", "default", "nov", "2016", "00:28:07", "gcc", "20150623", "red", "hat", "11"], "B_body": "##### SUMMARY\r\n- Make PEP8 compliant\r\n- Ensure imports are specific\r\n- Few cosmetic changes (sort lists, casing, punctuation)\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nunarchive\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\nv2.4", "B_clean_body": ["summari", "make", "pep8", "compliant", "ensur", "import", "are", "specif", "few", "cosmet", "chang", "sort", "list", "case", "punctuat", "issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "doc", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "unarch", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "v2"], "title_sim": [0.42784042116576476], "body_sim": [0.23273134660040146], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.045454545454545456, 0.046242774566473986], "pattern": -1, "time": 9}, {"A_title": "Use httptester docker image for http tests", "A_clean_title": ["use", "httptester", "docker", "imag", "http", "test"], "B_title": "Install and start up a local httpbin in tests", "B_clean_title": ["instal", "start", "up", "local", "httpbin", "test"], "A_body": "##### ISSUE TYPE\n- Bugfix Pull Request\n##### ANSIBLE VERSION\n\n```\nv2\n```\n##### SUMMARY\n\nAs recently evidenced, when we rely on external services for http tests, we often run into connection time outs, rate limits, etc...\n\nThis PR will spin up a docker container (currently using sivel/httptester) and links it into the test containers.\n\nThe httptester image creates a CA, and certificates needed for the tests.  It also contains httpbin, and nginx so we get a full http/https/sni/httpbin/badssl type of testing capabilities.\n\nThe names such as `ansible.http.tests` is made available through docker linking, and reference the container running nginx/httpbin.\n\nIf desired we can pull the docker image in from https://github.com/sivel/docker-images/tree/master/httptester and make it available from `ansible/ansible:httptester` or similar.\n\nIt will probably take a while for the builds to complete.  Prior build to me squashing commits: https://travis-ci.org/sivel/ansible/builds/129248935\n", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "ansibl", "version", "v2", "summari", "as", "recent", "evidenc", "when", "we", "reli", "extern", "servic", "http", "test", "we", "often", "run", "into", "connect", "time", "out", "rate", "limit", "etc", "thi", "pr", "will", "spin", "up", "docker", "contain", "current", "sivel", "httptester", "link", "it", "into", "test", "contain", "httptester", "imag", "creat", "ca", "certif", "need", "test", "it", "also", "contain", "httpbin", "nginx", "so", "we", "get", "full", "http", "http", "sni", "httpbin", "badssl", "type", "test", "capabl", "name", "such", "as", "ansibl", "http", "test", "made", "avail", "through", "docker", "link", "refer", "contain", "run", "nginx", "httpbin", "desir", "we", "pull", "docker", "imag", "http", "imag", "tree", "master", "httptester", "github", "com", "sivel", "docker", "make", "it", "avail", "ansibl", "ansibl", "httptester", "or", "similar", "it", "will", "probabl", "take", "while", "build", "complet", "prior", "build", "me", "squash", "commit", "http", "travi", "ci", "org", "sivel", "ansibl", "build", "129248935"], "B_body": "##### ISSUE TYPE\n\n<!--- Pick one below and delete the rest: -->\n- Feature Pull Request\n- Bugfix Pull Request\n##### ANSIBLE VERSION\n\n```\nansible 2.2.0 (httpbin 33d079ec6a) last updated 2016/05/02 11:58:58 (GMT -400)\n  lib/ansible/modules/core: (detached HEAD b6ad3b6773) last updated 2016/05/02 09:26:36 (GMT -400)\n  lib/ansible/modules/extras: (detached HEAD 1846de2809) last updated 2016/05/02 09:26:36 (GMT -400)\n  config file = /home/adrian/.ansible.cfg\n  configured module search path = ['/home/adrian/ansible-2.0.2-1/lib/ansible/modules/']\n```\n##### SUMMARY\n\n<!--- Describe the change, including rationale and design decisions -->\n\nFor destructive tests, pip install a local 'httpbin', and use it for the url\nintegration tests instead of the external 'http://httpbin.org/' url, which\nhas a tendency to fail and cause travis tests to fail.\n\nThings to Note:\n- This installs 'httpbin' pip package on the test system, and then removes it at the end of the test. It currently doesn't test if the package was previously installed, so likely needs some tweaks (or a virtualenv, etc)\n- The local httpbin instance defaults to running on port 15261, so potentially local firewall rules may come into play.\n- Currently, only the plain http tests are pointed at the local httpbin. The ssl based tests still point at https://httpbin.org.\n\nTODO:\n- add setup/teardown of a https server for sitting in front of httpbin, since httpbin itself doesn't include any ssl support.\n\nNote: currently doesn't use a virtualenv, etc. Also, no\nhttps support yet.\n", "B_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "bugfix", "pull", "request", "ansibl", "version", "ansibl", "httpbin", "33d079ec6a", "last", "updat", "2016", "05", "02", "11:58:58", "gmt", "400", "lib", "ansibl", "modul", "core", "detach", "head", "b6ad3b6773", "last", "updat", "2016", "05", "02", "09:26:36", "gmt", "400", "lib", "ansibl", "modul", "extra", "detach", "head", "1846de2809", "last", "updat", "2016", "05", "02", "09:26:36", "gmt", "400", "config", "file", "ansibl", "cfg", "home", "adrian", "configur", "modul", "search", "path", "home", "adrian", "ansibl", "lib", "ansibl", "modul", "summari", "describ", "chang", "includ", "rational", "design", "decis", "destruct", "test", "pip", "instal", "local", "'httpbin", "use", "it", "url", "integr", "test", "instead", "extern", "'http", "httpbin", "org", "url", "which", "ha", "tendenc", "fail", "caus", "travi", "test", "fail", "thing", "note", "thi", "instal", "'httpbin", "pip", "packag", "test", "system", "then", "remov", "it", "at", "end", "test", "it", "current", "n't", "test", "packag", "wa", "previous", "instal", "so", "like", "need", "some", "tweak", "or", "virtualenv", "etc", "local", "httpbin", "instanc", "default", "run", "port", "15261", "so", "potenti", "local", "firewal", "rule", "may", "come", "into", "play", "current", "onli", "plain", "http", "test", "are", "point", "at", "local", "httpbin", "ssl", "base", "test", "still", "point", "at", "http", "org", "httpbin", "todo", "add", "setup", "teardown", "http", "server", "sit", "front", "httpbin", "sinc", "httpbin", "itself", "n't", "includ", "ani", "ssl", "support", "note", "current", "n't", "use", "virtualenv", "etc", "also", "no", "http", "support", "yet"], "title_sim": [0.0963032399255637], "body_sim": [0.23863933622464242], "file_list_sim": 0.08333333333333333, "overlap_files_len": 1, "code_sim": [0.034039351636567176, 0.0], "location_sim": [0.4480651731160896, 0.7801418439716312], "pattern": 0, "time": 8}, {"A_title": "Make role required in lambda module per AWS docs", "A_clean_title": ["make", "role", "requir", "lambda", "modul", "per", "aw", "doc"], "B_title": "Lambda integration tests", "B_clean_title": ["lambda", "integr", "test"], "A_body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nPer the [AWS Docs](http://docs.aws.amazon.com/lambda/latest/dg/API_CreateFunction.html), role is a required parameter for Lambda functions. This makes the role required in the lambda module, updates the docs to indicate that it is, and creates a unit test to enforce this behvior.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\nFixes #24757\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nlambda\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.4.0 (require-lambda-role 968d8e6f6f) last updated 2017/05/18 14:12:47 (GMT -500)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/howie/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/howie/thirdparty/ansible/lib/ansible\r\n  executable location = /Users/howie/thirdparty/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Apr 27 2017, 10:40:33) [GCC 4.2.1 Compatible Apple LLVM 8.1.0 (clang-802.0.42)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\nThis is a fairly straight-forward pull request, so additional information is not needed.\r\n\r\n", "A_clean_body": ["summari", "describ", "chang", "includ", "rational", "design", "decis", "per", "aw", "doc", "http", "aw", "amazon", "html", "doc", "createfunct", "com", "lambda", "latest", "dg", "api", "creat", "function", "role", "requir", "paramet", "lambda", "function", "thi", "make", "role", "requir", "lambda", "modul", "updat", "doc", "indic", "that", "it", "creat", "unit", "test", "enforc", "thi", "behvior", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "fix", "24757", "issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "lambda", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "requir", "lambda", "role", "968d8e6f6f", "last", "updat", "2017", "05", "18", "14:12:47", "gmt", "500", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "u'", "user", "howi", "ansibl", "plugin", "modul", "u'", "usr", "share", "ansibl", "plugin", "modul", "ansibl", "python", "modul", "locat", "user", "howi", "thirdparti", "ansibl", "lib", "ansibl", "execut", "locat", "user", "howi", "thirdparti", "ansibl", "bin", "ansibl", "python", "version", "13", "default", "apr", "27", "2017", "10:40:33", "gcc", "compat", "appl", "llvm", "clang", "802", "42", "addit", "inform", "includ", "addit", "inform", "help", "peopl", "understand", "chang", "here", "bug", "that", "n't", "have", "link", "bug", "report", "step", "by", "step", "reproduct", "problem", "help", "thi", "fairli", "straight", "forward", "pull", "request", "so", "addit", "inform", "not", "need"], "B_body": "##### SUMMARY\r\n\r\nThis is a set of integration tests covering lambda.py and incidentally execute_lambda.  Currently creation of a lambda role named ansible_lambda_role is required\r\n\r\nAlso included is a bug fix for an exception when the role argument is not given to the module. \r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nlambda module \r\n\r\n##### ANSIBLE VERSION\r\n```\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/mikedd/dev/ansible/ansible-add-modules/library']\r\n  ansible python module location = /home/mikedd/dev/ansible/ansible-add-modules/lib/ansible\r\n  executable location = /home/mikedd/dev/ansible/ansible-add-modules/bin/ansible\r\n  python version = 2.7.12 (default, Jul  1 2016, 15:12:24) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nto reproduce bug fixed\r\n\r\n1. checkout version with only test cases added (fcec204055e5b63a6cd8bf552fb24bdaf8cb721d)\r\n2. run `test/runner/ansible-test integration -vvv aws_lambda`\r\n3. lambda gives an exception\r\n\r\n", "B_clean_body": ["summari", "thi", "set", "integr", "test", "cover", "lambda", "py", "incident", "execut", "lambda", "current", "creation", "lambda", "role", "name", "ansibl", "lambda", "role", "requir", "also", "includ", "bug", "fix", "except", "when", "role", "argument", "not", "given", "modul", "issu", "type", "bugfix", "pull", "request", "compon", "name", "lambda", "modul", "ansibl", "version", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "add", "u'", "home", "mikedd", "dev", "ansibl", "ansibl", "modul", "librari", "ansibl", "python", "modul", "locat", "add", "home", "mikedd", "dev", "ansibl", "ansibl", "modul", "lib", "ansibl", "execut", "locat", "add", "home", "mikedd", "dev", "ansibl", "ansibl", "modul", "bin", "ansibl", "python", "version", "12", "default", "jul", "2016", "15:12:24", "gcc", "20160609", "addit", "inform", "reproduc", "bug", "fix", "checkout", "version", "onli", "test", "case", "ad", "fcec204055e5b63a6cd8bf552fb24bdaf8cb721d", "run", "test", "test", "runner", "ansibl", "integr", "vvv", "aw", "lambda", "lambda", "give", "except"], "title_sim": [-0.006828047670422428], "body_sim": [0.6253833003705506], "file_list_sim": 0.14285714285714285, "overlap_files_len": 1, "code_sim": [0.34211787676037014, 0.007793180671943819], "location_sim": [0.14919354838709678, 0.41263940520446096], "pattern": -1, "time": 1}, {"A_title": "default callback is way to verbose", "A_clean_title": ["default", "callback", "way", "verbos"], "B_title": "Hide 'include' tasks when not in verbose mode", "B_clean_title": ["hide", "'includ", "task", "when", "not", "verbos", "mode"], "A_body": "##### ISSUE TYPE\n- Bugfix Pull Request\n##### ANSIBLE VERSION\n\n```\nansible 2.0.1.0\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = Default w/o overrides\n```\n##### SUMMARY\n\nThe v2 default callback set is way to verbose.\nThis is especially visible when running on a specifically tagged task: it should rather not show all in-between include statements when verbosity < 2.\n(IMHO even for non-tagged run the current output is inadequate)\n\nSee below: this is using the _MINIMAL_ verbosity, for a specific given tag.\n\n```\nTASK [my.bootstrap : include] *****************************************\n\nincluded: xxx/tasks/blah.yml for hostname\n\nTASK [my.bootstrap : include] *****************************************\n\nincluded: xxx/tasks/foo.yml for hostname\n\n[tons of them]\n```\n\nThis PR is just about the `included: xxx/tasks/blah.yml for hostname` lines.\nIt reduce their visibility toto verbosity-levels 2 and more.\n(like it's already the case for `task path:` lines)\n\nI'd like to do the same for the two others but:\n1) this need to be discussed further\n2) changing the TASK line for `include` only seems a bit more tricky\n", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "ansibl", "version", "ansibl", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "summari", "v2", "default", "callback", "set", "way", "verbos", "thi", "especi", "visibl", "when", "run", "specif", "tag", "task", "it", "rather", "not", "show", "all", "between", "includ", "statement", "when", "verbos", "imho", "even", "non", "tag", "run", "current", "output", "inadequ", "see", "below", "thi", "minim", "verbos", "specif", "given", "tag", "task", "my", "bootstrap", "includ", "includ", "yml", "xxx", "task", "blah", "hostnam", "task", "my", "bootstrap", "includ", "includ", "yml", "xxx", "task", "foo", "hostnam", "ton", "them", "thi", "pr", "just", "about", "includ", "yml", "xxx", "task", "blah", "hostnam", "line", "it", "reduc", "their", "visibl", "toto", "verbos", "level", "more", "like", "it", "'s", "alreadi", "case", "task", "path", "line", "'d", "like", "same", "two", "other", "but", "thi", "need", "discuss", "further", "chang", "task", "line", "includ", "onli", "seem", "bit", "more", "tricki"], "B_body": "This implements #14285 by default.\n\nIt will hide all include-tasks by default and in verbosity 1 (-v), but will show all details when verbosty 2 or higher (-vv).\n\nIt is quite annoying and confusing that Ansible emits all include tasks. Also because the color is the same color as skipping.\n", "B_clean_body": ["thi", "implement", "14285", "by", "default", "it", "will", "hide", "all", "includ", "task", "by", "default", "verbos", "but", "will", "show", "all", "detail", "when", "verbosti", "or", "higher", "vv", "it", "quit", "annoy", "confus", "that", "ansibl", "emit", "all", "includ", "task", "also", "becaus", "color", "same", "color", "as", "skip"], "title_sim": [0.38734116406943253], "body_sim": [0.4327843700561121], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.8400065268013828, 0.8400065268013828], "location_sim": [0.4146341463414634, 0.4146341463414634], "pattern": -1, "time": 91}, {"A_title": "lambda: role isn't necessary when not creating function - fixes #24757", "A_clean_title": ["lambda", "role", "n't", "necessari", "when", "not", "creat", "function", "fix", "24757"], "B_title": "Lambda integration tests", "B_clean_title": ["lambda", "integr", "test"], "A_body": "##### SUMMARY\r\nAllow role to be optional unless creating a lambda function. Alternative to #24789 as a fix for #24757.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/cloud/amazon/lambda.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n2.4.0\r\n```", "A_clean_body": ["summari", "allow", "role", "option", "unless", "creat", "lambda", "function", "altern", "24789", "as", "fix", "24757", "issu", "type", "bugfix", "pull", "request", "compon", "name", "py", "lib", "ansibl", "modul", "cloud", "amazon", "lambda", "ansibl", "version"], "B_body": "##### SUMMARY\r\n\r\nThis is a set of integration tests covering lambda.py and incidentally execute_lambda.  Currently creation of a lambda role named ansible_lambda_role is required\r\n\r\nAlso included is a bug fix for an exception when the role argument is not given to the module. \r\n\r\n##### ISSUE TYPE\r\n\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n\r\nlambda module \r\n\r\n##### ANSIBLE VERSION\r\n```\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/mikedd/dev/ansible/ansible-add-modules/library']\r\n  ansible python module location = /home/mikedd/dev/ansible/ansible-add-modules/lib/ansible\r\n  executable location = /home/mikedd/dev/ansible/ansible-add-modules/bin/ansible\r\n  python version = 2.7.12 (default, Jul  1 2016, 15:12:24) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\nto reproduce bug fixed\r\n\r\n1. checkout version with only test cases added (fcec204055e5b63a6cd8bf552fb24bdaf8cb721d)\r\n2. run `test/runner/ansible-test integration -vvv aws_lambda`\r\n3. lambda gives an exception\r\n\r\n", "B_clean_body": ["summari", "thi", "set", "integr", "test", "cover", "lambda", "py", "incident", "execut", "lambda", "current", "creation", "lambda", "role", "name", "ansibl", "lambda", "role", "requir", "also", "includ", "bug", "fix", "except", "when", "role", "argument", "not", "given", "modul", "issu", "type", "bugfix", "pull", "request", "compon", "name", "lambda", "modul", "ansibl", "version", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "add", "u'", "home", "mikedd", "dev", "ansibl", "ansibl", "modul", "librari", "ansibl", "python", "modul", "locat", "add", "home", "mikedd", "dev", "ansibl", "ansibl", "modul", "lib", "ansibl", "execut", "locat", "add", "home", "mikedd", "dev", "ansibl", "ansibl", "modul", "bin", "ansibl", "python", "version", "12", "default", "jul", "2016", "15:12:24", "gcc", "20160609", "addit", "inform", "reproduc", "bug", "fix", "checkout", "version", "onli", "test", "case", "ad", "fcec204055e5b63a6cd8bf552fb24bdaf8cb721d", "run", "test", "test", "runner", "ansibl", "integr", "vvv", "aw", "lambda", "lambda", "give", "except"], "title_sim": [-0.004118453205632352], "body_sim": [0.33986150896996786], "file_list_sim": 0.3333333333333333, "overlap_files_len": 2, "code_sim": [0.07425717441769807, 0.06172845585747814], "location_sim": [0.1814621409921671, 0.4371069182389937], "pattern": -1, "time": 1}, {"A_title": "Refactor zypper version parsing and handling", "A_clean_title": ["refactor", "zypper", "version", "pars", "handl"], "B_title": "Fix duplicated items in zypper module", "B_clean_title": ["fix", "duplic", "item", "zypper", "modul"], "A_body": "Fixes #23516\r\n\r\n##### SUMMARY\r\nRefactor zypper version parsing and handling\r\n\r\nFixes #23516\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nzypper\r\n\r\n##### ANSIBLE VERSION\r\ndevel", "A_clean_body": ["fix", "23516", "summari", "refactor", "zypper", "version", "pars", "handl", "fix", "23516", "issu", "type", "bugfix", "pull", "request", "compon", "name", "zypper", "ansibl", "version", "devel"], "B_body": "##### SUMMARY\r\nRemove packages found in install_version from name_install.\r\n\r\nFixes #23516\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/packaging/os/zypper.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.0 (zypper acc2b05f28) last updated 2017/04/24 17:26:56 (GMT -500)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/Users/albertom/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/albertom/github/ansible/lib/ansible\r\n  executable location = /Users/albertom/github/ansible/bin/ansible\r\n  python version = 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 12:39:47) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\n\r\n", "B_clean_body": ["summari", "remov", "packag", "found", "instal", "version", "name", "instal", "fix", "23516", "issu", "type", "bugfix", "pull", "request", "compon", "name", "py", "lib", "ansibl", "modul", "packag", "os", "zypper", "ansibl", "version", "ansibl", "zypper", "acc2b05f28", "last", "updat", "2017", "04", "24", "17:26:56", "gmt", "500", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "u'", "user", "albertom", "ansibl", "plugin", "modul", "u'", "usr", "share", "ansibl", "plugin", "modul", "ansibl", "python", "modul", "locat", "user", "albertom", "github", "ansibl", "lib", "ansibl", "execut", "locat", "user", "albertom", "github", "ansibl", "bin", "ansibl", "python", "version", "13", "v2", "13", "a06454b1afa1", "dec", "17", "2016", "12:39:47", "gcc", "appl", "inc", "build", "5666", "dot", "addit", "inform"], "title_sim": [0.010528657327110539], "body_sim": [0.24530501519892914], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.22932889847156857, 0.22932889847156857], "location_sim": [0.4036144578313253, 0.4407894736842105], "pattern": 1, "time": 2}, {"A_title": "Set default value for vg_options", "A_clean_title": ["set", "default", "valu", "vg", "option"], "B_title": "lvg module bugfix on vg_options patch", "B_clean_title": ["lvg", "modul", "bugfix", "vg", "option", "patch"], "A_body": "Fixes a bug when vg_options is not specified:\n  File \"/home/vagrant/.ansible/tmp/ansible-tmp-1397283690.67-233519411783834/lvg\", line 119, in main\n    vgoptions = module.params.get('vg_options', '').split()\nAttributeError: 'NoneType' object has no attribute 'split'\n", "A_clean_body": ["fix", "bug", "when", "vg", "option", "not", "specifi", "file", "tmp", "1397283690", "67", "233519411783834", "lvg", "home", "vagrant", "ansibl", "tmp", "ansibl", "line", "119", "main", "vgoption", "modul", "param", "get", "'vg", "option", "split", "attributeerror", "attribut", "error", "'nonetyp", "'none", "type", "object", "ha", "no", "attribut", "'split"], "B_body": "When no vg_options are passed to the module, 'vg_options' still exists\nin the module.params dict with a value of None, so the default empty string in\nthe get method is never used. None cannot be \"splitted\", which backtraced.\n", "B_clean_body": ["when", "no", "vg", "option", "are", "pass", "modul", "'vg", "option", "still", "exist", "modul", "param", "dict", "valu", "none", "so", "default", "empti", "string", "get", "method", "never", "use", "none", "not", "split", "which", "backtrac"], "title_sim": [0.271189541801895], "body_sim": [0.3325603234569586], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.6666666666666666, 0.6666666666666666], "pattern": 0, "time": 7}, {"A_title": "(library/ec2) VPC Enhanced Support, vpc_private_ip_address, group_name vs. group_id", "A_clean_title": ["librari", "ec2", "vpc", "enhanc", "support", "vpc", "privat", "ip", "address", "group", "name", "vs", "group", "id"], "B_title": "Fix bugs in ec2 library module", "B_clean_title": ["fix", "bug", "ec2", "librari", "modul"], "A_body": "Hi EveryOne!\n\nI'm Samuel, AWS DevOps, new in this community.\n\nFirstly i'd like to thank the helping of IRC.\n\nI have some clients with AWS/EC2 infrastructure, generally with VPC Private Cloud,\nip addresses manageable and specific security groups.\n\nWhen i used the ec2/boto pluggin, i realized that was create specific for \"ec2 public clouds\"\nso i decided the improve this support.\n\nThe requirements are as follows:\n\n1.) Create a machine, in the vpc private cloud;\n2.) This machine needs have a specific IP delimited;\n3.) Close the ports, with a specific security groups;\n\nFollowing the examples, i create my own playbook.\n\n---\n- name: Manager of VPC instances (AWS-VPC-EC2) \n  hosts: 127.0.0.1\n  connection: local\n  user: root\n  gather_facts: false  \n  tasks:\n  - name: Create a VPC instance (AWS-VPC-EC2) \n    local_action: \n                ec2\n                count=1\n                ec2_access_key=AJIYDSNKDYGISHIH\n                ec2_secret_key=jYF766HBbuyg8B8Y79967V7bh9776v877gg8\n                image=ami-7ecf5c17\n                key_name=samukasmk.pub\n                vpc_subnet_id=subnet-89j8qhf\n                instance_tags='{\"Name\":\"My Test VPC Instance\"}'\n                instance_type=t1.micro\n                group=MY-VPC-SPECIFIC-SECURITY-GROUP-24\n                wait=true\n                ###group_id=sg-ad878w9\n    register: ec2\n\nThe first problem that i found: \nmsg: InvalidParameterCombination: The parameter groupName cannot be used with the parameter subnet\n\nThis is a Response of Boto Library.\n\nResearching in the (boto library) for the resolution, i discovery that AWS API does not accepts, launch some\nVPC instance, passing the security group NAME.\n\nIn the http://boto.readthedocs.org/en/latest/ref/ec2.html i got the resolution,\nPass the security group ID parameter (security_group_ids) instead the security group NAME parameter (security_groups).\n\nCHANGE THIS:\n\n```\ntry:\n    if group_id:\n        grp_details = ec2.get_all_security_groups(group_ids=group_id)\n        grp_item = grp_details[0]\n        group_name = grp_item.name\nexcept boto.exception.NoAuthHandlerFound, e:\n        module.fail_json(msg = str(e))\n\ntry:\n    res = ec2.run_instances(image, key_name = key_name,\n                            min_count = count, \n                            max_count = count,\n                            monitoring_enabled = monitoring,\n                            security_groups = [group_name],\n                            instance_type = instance_type,\n                            kernel_id = kernel,\n                            ramdisk_id = ramdisk,\n                            subnet_id = vpc_subnet_id,\n                            user_data = user_data)\n```\n\nFOR THAT:\n\n```\ntry:\n\n    ### [Samuka-SMk]: Lock for pass 2 different security groups definitions\n    if group_id and group_name:\n        print \"ERROR: pass group_name or group_id\"\n\n    ### [Samuka-SMk]: Test Valid the security group ID, instead we got a exception\n    if group_id:\n        grp_details = ec2.get_all_security_groups(group_ids=group_id)\n\n    ### [Samuka-SMk]: Get the security group ID, with the security group NAME\n    if group_name:\n        grp_details = ec2.get_all_security_groups()\n        for id in range(0, len(grp_details)):\n            if str(group_name) in str(grp_details[id]):\n                group_id = str(grp_details[id].id)\n\nexcept boto.exception.NoAuthHandlerFound, e:\n        module.fail_json(msg = str(e))\n\ntry:\n    res = ec2.run_instances(image, key_name = key_name,\n                            min_count = count, \n                            max_count = count,\n                            monitoring_enabled = monitoring,\n                            security_group_ids = [group_id],\n                            instance_type = instance_type,\n                            kernel_id = kernel,\n                            ramdisk_id = ramdisk,\n                            subnet_id = vpc_subnet_id,\n                            user_data = user_data)\n```\n\nThis Resolved my first problem!!\n\nBut i still need to pass the (SPECIFIC VPC PRIVATE IP)\n\nI Create the new Argument;\n\n```\nmodule = AnsibleModule(\n    argument_spec = dict(\n    ...\n    vpc_private_ip_address = dict(aliases=['private_ip_address']),\n    ...\n    )\n)\n```\n\n   vpc_private_ip_address = module.params.get('vpc_private_ip_address')\n\nAnd i pass the new argument, for the boto library:\n\n```\ntry:\n    res = ec2.run_instances(image, key_name = key_name,\n                            min_count = count, \n                            max_count = count,\n                            monitoring_enabled = monitoring,\n                            security_group_ids = [group_id],\n                            instance_type = instance_type,\n                            kernel_id = kernel,\n                            ramdisk_id = ramdisk,\n                            subnet_id = vpc_subnet_id,\n                            private_ip_address = vpc_private_ip_address,\n                            user_data = user_data)\n```\n\nThe new Playbook for my new features:\n\n---\n- name: Manager of VPC instances (AWS-VPC-EC2) \n  hosts: 127.0.0.1\n  connection: local\n  user: root\n  gather_facts: false\n  tasks:\n  - name: Create a VPC instance (AWS-VPC-EC2) \n    local_action: \n                ec2\n                count=1\n                ec2_access_key=AJIYDSNKDYGISHIH\n                ec2_secret_key=jYF766HBbuyg8B8Y79967V7bh9776v877gg8\n                image=ami-7ecf5c17\n                key_name=samukasmk.pub\n                instance_tags='{\"Name\":\"My VPC Instance Test 01\"}'\n                instance_type=t1.micro\n                group=MY-VPC-SPECIFIC-SECURITY-GROUP-24\n                wait=true\n                vpc_subnet_id=subnet-89j8qhf\n                vpc_private_ip_address=\"10.0.4.88\"\n                ###group_id=sg-ad878w9\n    register: ec2\n\nTesting My New Features:\n\nSamukaSMk@stryck3r:~/Projects/smk-ansible/playbooks$ ansible-playbook ec2-playbooks/launch-instance-ec2.yml\nTASK: [Create a VPC instance (AWS-VPC-EC2)] ********************\\* \nchanged: [127.0.0.1]\n\nThat's All Folks Guys!\n", "A_clean_body": ["hi", "everyon", "everi", "one", "'m", "samuel", "aw", "devop", "dev", "op", "new", "thi", "commun", "firstli", "'d", "like", "thank", "help", "irc", "have", "some", "client", "aw", "ec2", "infrastructur", "gener", "vpc", "privat", "cloud", "ip", "address", "manag", "specif", "secur", "group", "when", "use", "ec2", "boto", "pluggin", "realiz", "that", "wa", "creat", "specif", "ec2", "public", "cloud", "so", "decid", "improv", "thi", "support", "requir", "are", "as", "follow", "creat", "machin", "vpc", "privat", "cloud", "thi", "machin", "need", "have", "specif", "ip", "delimit", "close", "port", "specif", "secur", "group", "follow", "exampl", "creat", "my", "own", "playbook", "name", "manag", "vpc", "instanc", "aw", "vpc", "ec2", "host", "127", "connect", "local", "user", "root", "gather", "fact", "fals", "task", "name", "creat", "vpc", "instanc", "aw", "vpc", "ec2", "local", "action", "ec2", "count=1", "ec2", "access", "key=ajiydsnkdygishih", "ec2", "secret", "key=jyf766hbbuyg8b8y79967v7bh9776v877gg8", "key=j", "yf766h", "bbuyg8b8y79967v7bh9776v877gg8", "image=ami", "7ecf5c17", "pub", "key", "name=samukasmk", "89j8qhf", "vpc", "subnet", "id=subnet", "instanc", "tags=", "name", "my", "test", "vpc", "instanc", "micro", "instanc", "type=t1", "group=mi", "vpc", "specif", "secur", "group", "24", "wait=tru", "ad878w9", "group", "id=sg", "regist", "ec2", "first", "problem", "that", "found", "msg", "invalidparametercombin", "invalid", "paramet", "combin", "paramet", "groupnam", "group", "name", "not", "use", "paramet", "subnet", "thi", "respons", "boto", "librari", "research", "boto", "librari", "resolut", "discoveri", "that", "aw", "api", "not", "accept", "launch", "some", "vpc", "instanc", "pass", "secur", "group", "name", "http", "readthedoc", "html", "boto", "org", "en", "latest", "ref", "ec2", "got", "resolut", "pass", "secur", "group", "id", "paramet", "secur", "group", "id", "instead", "secur", "group", "name", "paramet", "secur", "group", "chang", "thi", "tri", "group", "id", "grp", "detail", "ec2", "get", "all", "secur", "group", "group", "ids=group", "id", "grp", "item", "grp", "detail", "group", "name", "name", "grp", "item", "except", "boto", "except", "noauthhandlerfound", "no", "auth", "handler", "found", "modul", "fail", "json", "msg", "str", "tri", "re", "ec2", "run", "instanc", "imag", "key", "name", "key", "name", "min", "count", "count", "max", "count", "count", "monitor", "enabl", "monitor", "secur", "group", "group", "name", "instanc", "type", "instanc", "type", "kernel", "id", "kernel", "ramdisk", "id", "ramdisk", "subnet", "id", "vpc", "subnet", "id", "user", "data", "user", "data", "that", "tri", "samuka", "smk", "mk", "lock", "pass", "differ", "secur", "group", "definit", "group", "id", "group", "name", "print", "error", "pass", "group", "name", "or", "group", "id", "samuka", "smk", "mk", "test", "valid", "secur", "group", "id", "instead", "we", "got", "except", "group", "id", "grp", "detail", "ec2", "get", "all", "secur", "group", "group", "ids=group", "id", "samuka", "smk", "mk", "get", "secur", "group", "id", "secur", "group", "name", "group", "name", "grp", "detail", "ec2", "get", "all", "secur", "group", "id", "rang", "len", "grp", "detail", "str", "group", "name", "str", "grp", "detail", "id", "group", "id", "str", "grp", "detail", "id", "id", "except", "boto", "except", "noauthhandlerfound", "no", "auth", "handler", "found", "modul", "fail", "json", "msg", "str", "tri", "re", "ec2", "run", "instanc", "imag", "key", "name", "key", "name", "min", "count", "count", "max", "count", "count", "monitor", "enabl", "monitor", "secur", "group", "id", "group", "id", "instanc", "type", "instanc", "type", "kernel", "id", "kernel", "ramdisk", "id", "ramdisk", "subnet", "id", "vpc", "subnet", "id", "user", "data", "user", "data", "thi", "resolv", "my", "first", "problem", "but", "still", "need", "pass", "specif", "vpc", "privat", "ip", "creat", "new", "argument", "modul", "ansiblemodul", "ansibl", "modul", "argument", "spec", "dict", "vpc", "privat", "ip", "address", "dict", "aliases=", "'privat", "ip", "address", "vpc", "privat", "ip", "address", "modul", "param", "get", "'vpc", "privat", "ip", "address", "pass", "new", "argument", "boto", "librari", "tri", "re", "ec2", "run", "instanc", "imag", "key", "name", "key", "name", "min", "count", "count", "max", "count", "count", "monitor", "enabl", "monitor", "secur", "group", "id", "group", "id", "instanc", "type", "instanc", "type", "kernel", "id", "kernel", "ramdisk", "id", "ramdisk", "subnet", "id", "vpc", "subnet", "id", "privat", "ip", "address", "vpc", "privat", "ip", "address", "user", "data", "user", "data", "new", "playbook", "my", "new", "featur", "name", "manag", "vpc", "instanc", "aw", "vpc", "ec2", "host", "127", "connect", "local", "user", "root", "gather", "fact", "fals", "task", "name", "creat", "vpc", "instanc", "aw", "vpc", "ec2", "local", "action", "ec2", "count=1", "ec2", "access", "key=ajiydsnkdygishih", "ec2", "secret", "key=jyf766hbbuyg8b8y79967v7bh9776v877gg8", "key=j", "yf766h", "bbuyg8b8y79967v7bh9776v877gg8", "image=ami", "7ecf5c17", "pub", "key", "name=samukasmk", "instanc", "tags=", "name", "my", "vpc", "instanc", "test", "01", "micro", "instanc", "type=t1", "group=mi", "vpc", "specif", "secur", "group", "24", "wait=tru", "89j8qhf", "vpc", "subnet", "id=subnet", "vpc", "privat", "ip", "address=", "10", "88", "ad878w9", "group", "id=sg", "regist", "ec2", "test", "my", "new", "featur", "samukasmk", "samuka", "mk", "stryck3r", "project", "smk", "ansibl", "playbook", "ansibl", "playbook", "ec2", "instanc", "playbook", "launch", "ec2", "yml", "task", "creat", "vpc", "instanc", "aw", "vpc", "ec2", "chang", "127", "that", "'s", "all", "folk", "guy"], "B_body": "Corrects an issue with specifying group_name vs group_id when using VPC instances (see commit message)\n\nInclude private IP/DNS info in json value returned from ec2 module.\n", "B_clean_body": ["correct", "issu", "specifi", "group", "name", "vs", "group", "id", "when", "vpc", "instanc", "see", "commit", "messag", "includ", "privat", "ip", "dn", "info", "json", "valu", "return", "ec2", "modul"], "title_sim": [0.21720558454171748], "body_sim": [0.5729698725793144], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.905982905982906, 0.905982905982906], "pattern": 0, "time": 8}, {"A_title": "added support for OUPath parameter for win_domain_membership", "A_clean_title": ["ad", "support", "oupath", "ou", "path", "paramet", "win", "domain", "membership"], "B_title": "Added ability to specify destination OU when joining a domain", "B_clean_title": ["ad", "abil", "specifi", "destin", "ou", "when", "join", "domain"], "A_body": "##### SUMMARY\r\nAdds support for the OUPath parameter of Add-Computer (i.e. the underlying PowerShell) for invoking win_domain_membership when state = domain.\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/windows/win_domain_membership.ps1\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.4.0\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n# host should be a member of domain ansible.vagrant; module will ensure the hostname is mydomainclient\r\n# host domain object will be created/joined in 'CN=Computers,DC=ansible,DC=vagrant'\r\n# and will use the passed credentials to join domain if necessary.\r\n# Ansible connection should use local credentials if possible.\r\n# If a reboot is required, the second task will trigger one and wait until the host is available.\r\n- hosts: winclient\r\n  gather_facts: no\r\n  tasks:\r\n  - win_domain_membership:\r\n      dns_domain_name: ansible.vagrant\r\n      hostname: mydomainclient\r\n      domain_admin_user: testguy@ansible.vagrant\r\n      domain_admin_password: password123!\r\n      domain_ou_path: 'CN=Computers,DC=ansible,DC=vagrant'\r\n      state: domain\r\n    register: domain_state\r\n\r\n  - win_reboot:\r\n    when: domain_state.reboot_required\r\n```\r\n", "A_clean_body": ["summari", "add", "support", "oupath", "ou", "path", "paramet", "add", "comput", "underli", "powershel", "power", "shell", "invok", "win", "domain", "membership", "when", "state", "domain", "issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "compon", "name", "ps1", "domain", "membership", "lib", "ansibl", "modul", "window", "win", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "addit", "inform", "includ", "addit", "inform", "help", "peopl", "understand", "chang", "here", "bug", "that", "n't", "have", "link", "bug", "report", "step", "by", "step", "reproduct", "problem", "help", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang", "host", "member", "domain", "ansibl", "vagrant", "modul", "will", "ensur", "hostnam", "mydomaincli", "host", "domain", "object", "will", "creat", "join", "'cn=comput", "dc=ansibl", "dc=vagrant'", "will", "use", "pass", "credenti", "join", "domain", "necessari", "ansibl", "connect", "use", "local", "credenti", "possibl", "reboot", "requir", "second", "task", "will", "trigger", "one", "wait", "until", "host", "avail", "host", "winclient", "gather", "fact", "no", "task", "win", "domain", "membership", "dn", "domain", "name", "ansibl", "vagrant", "hostnam", "mydomaincli", "domain", "admin", "user", "testguy", "ansibl", "vagrant", "domain", "admin", "password", "password123", "domain", "ou", "path", "'cn=comput", "dc=ansibl", "dc=vagrant'", "state", "domain", "regist", "domain", "state", "win", "reboot", "when", "domain", "state", "reboot", "requir"], "B_body": "<!---\r\nVerify first that your issue/request is not already reported on GitHub.\r\nAlso test if the latest release, and master branch are affected too.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Idea\r\n\r\n##### COMPONENT NAME\r\nwin_domain_membership\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\n2.4\r\n```\r\n\r\n##### CONFIGURATION\r\n<!---\r\nMention any settings you have changed/added/removed in ansible.cfg\r\n(or using the ANSIBLE_* environment variables).\r\n-->\r\n\r\n##### OS / ENVIRONMENT\r\n<!---\r\nMention the OS you are running Ansible from, and the OS you are\r\nmanaging, or say \u201cN/A\u201d for anything that is not platform-specific.\r\n-->\r\n\r\n##### SUMMARY\r\n<!--- Explain the problem briefly -->\r\nAdd the ability to specify OU destination (OUPath in Add-Computer) when joining to a domain.\r\n\r\nExample Config:\r\n- name: Join domain\r\n  win_domain_membership:\r\n      dns_domain_name: \"{{ global_domain_name }}\"\r\n      hostname: \"{{ global_vm_name }}\"\r\n      domain_admin_user: \"{{ global_domain_join_user }}\"\r\n      domain_admin_password: \"{{ global_domain_join_user_password }}\"\r\n      **domain_ou_path: \"OU=Windows,OU=Servers,DC=yourdomain,DC=local\"**\r\n      state: domain\r\n  register: domain_state\r\n", "B_clean_body": ["verifi", "first", "that", "your", "issu", "request", "not", "alreadi", "report", "github", "git", "hub", "also", "test", "latest", "releas", "master", "branch", "are", "affect", "too", "issu", "type", "pick", "one", "below", "delet", "rest", "featur", "idea", "compon", "name", "win", "domain", "membership", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "configur", "mention", "ani", "set", "you", "have", "chang", "ad", "remov", "ansibl", "cfg", "or", "ansibl", "environ", "variabl", "os", "environ", "mention", "os", "you", "are", "run", "ansibl", "os", "you", "are", "manag", "or", "say", "anyth", "that", "not", "platform", "specif", "summari", "explain", "problem", "briefli", "add", "abil", "specifi", "ou", "destin", "oupath", "ou", "path", "add", "comput", "when", "join", "domain", "exampl", "config", "name", "join", "domain", "win", "domain", "membership", "dn", "domain", "name", "global", "domain", "name", "hostnam", "global", "vm", "name", "domain", "admin", "user", "global", "domain", "join", "user", "domain", "admin", "password", "global", "domain", "join", "user", "password", "**domain", "ou", "path", "ou=window", "ou=serv", "dc=yourdomain", "dc=local", "state", "domain", "regist", "domain", "state"], "title_sim": [0.1642616209323451], "body_sim": [0.3839538224036504], "file_list_sim": 1.0, "overlap_files_len": 2, "code_sim": [0.8046702356288464, 0.8046702356288464], "location_sim": [0.9473684210526315, 0.9473684210526315], "pattern": -1, "time": 40}, {"A_title": "Fixed failure with Redis clusters not having primary endpoint address", "A_clean_title": ["fix", "failur", "redi", "cluster", "not", "have", "primari", "endpoint", "address"], "B_title": "Elasticcache primaryEndpoint can be unassigned", "B_clean_title": ["elasticcach", "primaryendpoint", "primari", "endpoint", "unassign"], "A_body": "Fixed an issue where script would fail with Redis clusters where attempting to get the address off it's primary endpoint.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nec2 dynamic inventory script\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\nIt appears the the Redis clusters don't have a Primary Endpoint address, so the script currently fails because it's trying to find a key of 'Address' off an object of None (the key of 'PrimaryEndpoint' in the parent dictionary).\r\n\r\n\r\n\r\nBefore\r\n```\r\n[wholroyd@wholroyd-fedora Ansible]$ ./hosts --refresh-cache --boto-profile stage\r\nTraceback (most recent call last):\r\n  File \"./hosts\", line 1510, in <module>\r\n    Ec2Inventory()\r\n  File \"./hosts\", line 186, in __init__\r\n    self.do_api_calls_update_cache()\r\n  File \"./hosts\", line 492, in do_api_calls_update_cache\r\n    self.get_elasticache_replication_groups_by_region(region)\r\n  File \"./hosts\", line 722, in get_elasticache_replication_groups_by_region\r\n    self.add_elasticache_replication_group(replication_group, region)\r\n  File \"./hosts\", line 1198, in add_elasticache_replication_group\r\n    dest = replication_group['NodeGroups'][0]['PrimaryEndpoint']['Address']\r\nTypeError: 'NoneType' object has no attribute '__getitem__'\r\n\r\n```\r\n\r\nAfter\r\n```\r\nNot posting the output of my entire us-east-1 inventory, but it does work\r\n```", "A_clean_body": ["fix", "issu", "where", "script", "would", "fail", "redi", "cluster", "where", "attempt", "get", "address", "off", "it", "'s", "primari", "endpoint", "issu", "type", "bugfix", "pull", "request", "compon", "name", "ec2", "dynam", "inventori", "script", "ansibl", "version", "ansibl", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "summari", "it", "appear", "redi", "cluster", "n't", "have", "primari", "endpoint", "address", "so", "script", "current", "fail", "becaus", "it", "'s", "tri", "find", "key", "'address", "off", "object", "none", "key", "'primaryendpoint", "'primari", "endpoint", "parent", "dictionari", "befor", "wholroyd", "wholroyd", "fedora", "ansibl", "host", "refresh", "cach", "boto", "profil", "stage", "traceback", "most", "recent", "call", "last", "file", "host", "line", "1510", "modul", "ec2inventori", "file", "host", "line", "186", "init", "self", "api", "call", "updat", "cach", "file", "host", "line", "492", "api", "call", "updat", "cach", "self", "get", "elasticach", "replic", "group", "by", "region", "region", "file", "host", "line", "722", "get", "elasticach", "replic", "group", "by", "region", "self", "add", "elasticach", "replic", "group", "replic", "group", "region", "file", "host", "line", "1198", "add", "elasticach", "replic", "group", "dest", "replic", "group", "'nodegroup", "'node", "group", "'primaryendpoint", "'primari", "endpoint", "'address", "typeerror", "type", "error", "'nonetyp", "'none", "type", "object", "ha", "no", "attribut", "getitem", "after", "not", "post", "output", "my", "entir", "us", "east", "inventori", "but", "it", "work"], "B_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the plugin/module/task -->\r\nec2.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.2.0.0\r\n  config file = /Users/danielzitzman/projects/ops-tools-infrastructure/ansible.cfg\r\n  configured module search path = ['library/']\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nIf the elasticcache cluster dose not have a primary endpoint the inventory script fails", "B_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "plugin", "modul", "task", "ec2", "py", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "config", "file", "tool", "user", "danielzitzman", "project", "op", "cfg", "infrastructur", "ansibl", "configur", "modul", "search", "path", "'librari", "summari", "describ", "chang", "includ", "rational", "design", "decis", "elasticcach", "cluster", "dose", "not", "have", "primari", "endpoint", "inventori", "script", "fail"], "title_sim": [0.46013995145990927], "body_sim": [0.3047920131766437], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [1.0, 1.0], "pattern": 1, "time": 52}, {"A_title": "Dynamically add ssl key to the mysql config hash iff needed", "A_clean_title": ["dynam", "add", "ssl", "key", "mysql", "config", "hash", "iff", "need"], "B_title": "Remove SSL config map when empty", "B_clean_title": ["remov", "ssl", "config", "map", "when", "empti"], "A_body": "##### Issue Type:\n- Bugfix Pull Request\n##### Ansible Version:\n\n```\nansible 2.0.1.0\n```\n##### Summary:\n\nmodule_utils.mysql will throw a \"client library does not have SSL support\" exception if MySQL SSL support is not available. This occurs even when attempting to use a non-SSL protected connection. \n\n```\n- name: create users\n  mysql_user: name='root' host='192.168.1.%' state=present\n    password='xxxx' encrypted=no\n    priv='*.*:all'\n    login_user=root login_password=yyyy login_unix_socket=/opt/local/var/run/mariadb-10.0/mysqld.sock\n```\n##### Example output:\n\n```\nfailed: [host] => (item={u'passwd': u'xxxx', u'host': u'192.168.1.%', u'name': u'root', u'priv': u'*.*:all'}) => {\"failed\": true, \"item\": {\"host\": \"192.168.1.%\", \"name\": \"root\", \"passwd\": \"xxxx\", \"priv\": \"*.*:all\"}, \"msg\": \"unable to connect to database, check login_user and login_password are correct or /Us\ners/mgrimes/.my.cnf has the credentials. Exception message: client library does not have SSL support\"}\n```\n", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "ansibl", "version", "ansibl", "summari", "mysql", "modul", "util", "will", "throw", "client", "librari", "not", "have", "ssl", "support", "except", "mysql", "my", "sql", "ssl", "support", "not", "avail", "thi", "occur", "even", "when", "attempt", "use", "non", "ssl", "protect", "connect", "name", "creat", "user", "mysql", "user", "name='root", "host='192", "168", "state=pres", "password='xxxx", "encrypted=no", "priv='*", "all'", "login", "user=root", "login", "password=yyyy", "login", "unix", "10", "sock", "socket=", "opt", "local", "var", "run", "mariadb", "mysqld", "exampl", "output", "fail", "host", "item=", "u'passwd", "u'xxxx", "u'host", "u'192", "168", "u'nam", "u'root", "u'priv", "u'*", "all", "fail", "true", "item", "host", "192", "168", "name", "root", "passwd", "xxxx", "priv", "all", "msg", "unabl", "connect", "databas", "check", "login", "user", "login", "password", "are", "correct", "or", "us", "my", "cnf", "er", "mgrime", "ha", "credenti", "except", "messag", "client", "librari", "not", "have", "ssl", "support"], "B_body": "This avoids exceptions when ssl is not available.\n\nSee #14594 for details.\n", "B_clean_body": ["thi", "avoid", "except", "when", "ssl", "not", "avail", "see", "14594", "detail"], "title_sim": [0.22784090202147894], "body_sim": [0.393481655778457], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.07226844477616427, 0.07226844477616427], "location_sim": [0.0, 0.0], "pattern": -1, "time": 19}, {"A_title": "Fix \"AttributeError: 'ActionModule' object has no attribute '_shell'\"", "A_clean_title": ["fix", "attributeerror", "attribut", "error", "'actionmodul", "'action", "modul", "object", "ha", "no", "attribut", "shell"], "B_title": "Fix spacing and using name in item loop in task executor, fix using connection shell from plugins", "B_clean_title": ["fix", "space", "name", "item", "loop", "task", "executor", "fix", "connect", "shell", "plugin"], "A_body": "'_shell' was removed with commit 2a5fbd85700b719df9c2af22f0ccc61633ee4ac6\n", "A_clean_body": ["shell", "wa", "remov", "commit", "2a5fbd85700b719df9c2af22f0ccc61633ee4ac6"], "B_body": "- [x] Fix spacing and using name in item loop in task executor\n- [x] Fix using connection shell from plugins\n", "B_clean_body": ["fix", "space", "name", "item", "loop", "task", "executor", "fix", "connect", "shell", "plugin"], "title_sim": [0.18842323783101078], "body_sim": [0.2505388131818087], "file_list_sim": 0.8571428571428571, "overlap_files_len": 6, "code_sim": [0.999566231989428, 1.0], "location_sim": [0.8074866310160428, 1.0], "pattern": 0, "time": 0}, {"A_title": "kickstart script for Windows to fully enable ansible", "A_clean_title": ["kickstart", "script", "window", "fulli", "enabl", "ansibl"], "B_title": "Added script for configuring winrm for Ansible", "B_clean_title": ["ad", "script", "configur", "winrm", "ansibl"], "A_body": "credit to: Matt Martz and trondhindenes\n\nThis script will ask for a password for the ansible user and at the end it will ask if you wish to reboot\n(if it has done some actions that require it)\nIt won't do any actions twice, so it doesn't generate an problem if you run it mutliple times after eachothe\n", "A_clean_body": ["credit", "matt", "martz", "trondhinden", "thi", "script", "will", "ask", "password", "ansibl", "user", "at", "end", "it", "will", "ask", "you", "wish", "reboot", "it", "ha", "done", "some", "action", "that", "requir", "it", "it", "wo", "n't", "ani", "action", "twice", "so", "it", "n't", "gener", "problem", "you", "run", "it", "mutlipl", "time", "after", "eachoth"], "B_body": "The script can be used to set up a windows host with WinRM with the least possible effort.\n", "B_clean_body": ["script", "use", "set", "up", "window", "host", "winrm", "win", "rm", "least", "possibl", "effort"], "title_sim": [0.3119818300145673], "body_sim": [0.08278558529268154], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 15}, {"A_title": "column must always be less than len(probline)", "A_clean_title": ["column", "must", "alway", "less", "than", "len", "problin"], "B_title": "Off by one error", "B_clean_title": ["off", "by", "one", "error"], "A_body": "Fixes related to GH-5773.\n\nOtherwise we get an IndexError.\n", "A_clean_body": ["fix", "relat", "gh", "5773", "otherwis", "we", "get", "indexerror", "index", "error"], "B_body": "When len(probline) == column then probline[column] is outside of the string\n", "B_clean_body": ["when", "len", "problin", "column", "then", "problin", "column", "outsid", "string"], "title_sim": [-0.002960712298205899], "body_sim": [0.058811074010105685], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [1.0, 1.0], "pattern": 0, "time": 2}, {"A_title": "Adding a new 'load_callback_plugins' config option, defaults to False", "A_clean_title": ["ad", "new", "'load", "callback", "plugin", "config", "option", "default", "fals"], "B_title": "Load callback plugins in the ansible script", "B_clean_title": ["load", "callback", "plugin", "ansibl", "script"], "A_body": "As discussed on the ansible-devel ML, here is the code to allow \"ansible\" command to load callback plugins.\n", "A_clean_body": ["as", "discuss", "ansibl", "devel", "ml", "here", "code", "allow", "ansibl", "command", "load", "callback", "plugin"], "B_body": "This is an open discussion, since I'm far from an expert on ansible.\nHowever, since I often run some commands on a lot of host, I've written a small callback plugin that summarize output on stdout and stderr.\nI need this callback to be called when running ansible (not the playbook), since I only run once a command, and forget it after that.\nMaybe the modified line is not enough, too much, or at a wrong location. I just copied it from the ansible-playbook script.\n", "B_clean_body": ["thi", "open", "discuss", "sinc", "'m", "far", "expert", "ansibl", "howev", "sinc", "often", "run", "some", "command", "lot", "host", "'ve", "written", "small", "callback", "plugin", "that", "summar", "output", "stdout", "stderr", "need", "thi", "callback", "call", "when", "run", "ansibl", "not", "playbook", "sinc", "onli", "run", "onc", "command", "forget", "it", "after", "that", "mayb", "modifi", "line", "not", "enough", "too", "much", "or", "at", "wrong", "locat", "just", "copi", "it", "ansibl", "playbook", "script"], "title_sim": [0.47833992085026866], "body_sim": [0.30701077527002335], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.6818181818181818, 1.0], "pattern": 0, "time": 35}, {"A_title": "Allow ec2 tags to be used to address servers in ec2 dynamic inventory.", "A_clean_title": ["allow", "ec2", "tag", "use", "address", "server", "ec2", "dynam", "inventori"], "B_title": "Tag Based EC2 Inventory Names", "B_clean_title": ["tag", "base", "ec2", "inventori", "name"], "A_body": "My use case for this PR is addressing instances using domain names separate from EC2's public and private dns names. The PR is completely backward-compatible.\n", "A_clean_body": ["my", "use", "case", "thi", "pr", "address", "instanc", "domain", "name", "separ", "ec2", "'s", "public", "privat", "dn", "name", "pr", "complet", "backward", "compat"], "B_body": "This pull request implements a feature to allow an EC2 tag to override the vpc_destination_variable which already overrides the default destination_variable. When using the inventory script, I found it much more meaningful to see a friendly, recognizable host name in the Ansible output than the options available.\n", "B_clean_body": ["thi", "pull", "request", "implement", "featur", "allow", "ec2", "tag", "overrid", "vpc", "destin", "variabl", "which", "alreadi", "overrid", "default", "destin", "variabl", "when", "inventori", "script", "found", "it", "much", "more", "meaning", "see", "friendli", "recogniz", "host", "name", "ansibl", "output", "than", "option", "avail"], "title_sim": [0.6750220782865745], "body_sim": [0.11749061723596756], "file_list_sim": 1.0, "overlap_files_len": 2, "code_sim": [0.4214926113964832, 0.4214926113964832], "location_sim": [0.27450980392156865, 0.27450980392156865], "pattern": 0, "time": 199}, {"A_title": "make ansible-galaxy version work for branches as well as tree-ish", "A_clean_title": ["make", "ansibl", "galaxi", "version", "work", "branch", "as", "well", "as", "tree", "ish"], "B_title": "git archive in ansible-galaxy fails for non-default-branch versions", "B_clean_title": ["git", "archiv", "ansibl", "galaxi", "fail", "non", "default", "branch", "version"], "A_body": "Squashes WIP merges and replaces https://github.com/ansible/ansible/pull/10478\n\nVersion can now be a branch, a tag, or any <tree-ish> supported by git including specific commit IDs.\n", "A_clean_body": ["squash", "wip", "merg", "replac", "http", "github", "com", "ansibl", "ansibl", "pull", "10478", "version", "now", "branch", "tag", "or", "ani", "tree", "ish", "support", "by", "git", "includ", "specif", "commit", "id", "ds"], "B_body": "Trying to install a branch that is not the default (typically 'master') via ansible-galaxy fails because `git archive` cannot handle remote branches. Introducing a `git checkout` solves this problem by pulling the remote branch onto the local machine.\n\nMy concrete example was:\n\n``` yaml\n# galaxy.yml\n- src: https://github.com/thefinn93/ansible-tlsdate.git\n  version: rename-service\n```\n\nwhich caused:\n\n```\n- executing: git clone https://github.com/thefinn93/ansible-tlsdate.git ansible-tlsdate\n- executing: git archive --prefix=ansible-tlsdate/ --output=/tmp/tmpOLH2Y4.tar rename-service\n- command git archive --prefix=ansible-tlsdate/ --output=/tmp/tmpOLH2Y4.tar rename-service failed\n  in directory /tmp/tmpTlAMNS\n- ansible-tlsdate was NOT installed successfully.\n- you can use --ignore-errors to skip failed roles.\n```\n", "B_clean_body": ["tri", "instal", "branch", "that", "not", "default", "typic", "'master", "via", "ansibl", "galaxi", "fail", "becaus", "git", "archiv", "not", "handl", "remot", "branch", "introduc", "git", "checkout", "solv", "thi", "problem", "by", "pull", "remot", "branch", "onto", "local", "machin", "my", "concret", "exampl", "wa", "yaml", "galaxi", "yml", "src", "http", "tlsdate", "git", "github", "com", "thefinn93", "ansibl", "version", "renam", "servic", "which", "caus", "execut", "git", "clone", "http", "tlsdate", "git", "github", "com", "thefinn93", "ansibl", "ansibl", "tlsdate", "execut", "git", "archiv", "prefix=ans", "tlsdate", "tar", "output=", "tmp", "tmpolh2y4", "tmp", "olh2y4", "renam", "servic", "command", "git", "archiv", "prefix=ans", "tlsdate", "tar", "output=", "tmp", "tmpolh2y4", "tmp", "olh2y4", "renam", "servic", "fail", "directori", "tmp", "tmptlamn", "tmp", "tl", "amn", "ansibl", "tlsdate", "wa", "not", "instal", "success", "you", "use", "ignor", "error", "skip", "fail", "role"], "title_sim": [0.369076272437562], "body_sim": [0.3692550451332305], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 35}, {"A_title": "New library/cloud/ec2 module parameter (assign_public_ip) for non-default VPC instance launching.", "A_clean_title": ["new", "librari", "cloud", "ec2", "modul", "paramet", "assign", "public", "ip", "non", "default", "vpc", "instanc", "launch"], "B_title": "This adds a associate_public_ip parameter (to the ec2 module)", "B_clean_title": ["thi", "add", "associ", "public", "ip", "paramet", "ec2", "modul"], "A_body": "If an AWS account does not have a default subnet in their VPC configuration, then creating instances in that VPC will not automatically provide a public IP/DNS. Boto added this functionality in 2.13.0 (NetworkInterfaceSpecification.associate_public_ip_address).\n\nThis change adds assign_pubic_ip as a parameter to the ec2 module, ensuring that it is not set to one of BOOLEANS_TRUE if vpc_subnet_id is not also set, and if Boto is less than 2.13.0.\n\nAll tests pass (make tests).\n", "A_clean_body": ["aw", "account", "not", "have", "default", "subnet", "their", "vpc", "configur", "then", "creat", "instanc", "that", "vpc", "will", "not", "automat", "provid", "public", "ip", "dn", "boto", "ad", "thi", "function", "13", "networkinterfacespecif", "network", "interfac", "specif", "associ", "public", "ip", "address", "thi", "chang", "add", "assign", "pubic", "ip", "as", "paramet", "ec2", "modul", "ensur", "that", "it", "not", "set", "one", "boolean", "true", "vpc", "subnet", "id", "not", "also", "set", "boto", "less", "than", "13", "all", "test", "pass", "make", "test"], "B_body": "The parameter defaults to true and sets things up so that VPC type instances\ncan get public IP addresses in non-default subnets.  The snag is that it\nrequires boto >= 2.13 which may be an issue for some deployments.\n", "B_clean_body": ["paramet", "default", "true", "set", "thing", "up", "so", "that", "vpc", "type", "instanc", "get", "public", "ip", "address", "non", "default", "subnet", "snag", "that", "it", "requir", "boto", "13", "which", "may", "issu", "some", "deploy"], "title_sim": [0.7679010694032677], "body_sim": [0.5186907171431998], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.518324607329843, 0.518324607329843], "pattern": -1, "time": 25}, {"A_title": "ec2_lc: Add params instance_monitoring and spot_price", "A_clean_title": ["ec2", "lc", "add", "param", "instanc", "monitor", "spot", "price"], "B_title": "Ec2_lc instance_monitoring option", "B_clean_title": ["ec2", "lc", "instanc", "monitor", "option"], "A_body": "In EC2 auto scaling setup, `instance_monitoring` is usually enabled, so that the scale-up / scale-down decision can made based on more accurate statistics. Currently, the parameter is not exposed by ansible, while boto has it disabled by default, thus making the module less useful.\n\nThe `spot_price` parameter is to allow spot instance bidding.\n", "A_clean_body": ["ec2", "auto", "scale", "setup", "instanc", "monitor", "usual", "enabl", "so", "that", "scale", "up", "scale", "down", "decis", "made", "base", "more", "accur", "statist", "current", "paramet", "not", "expos", "by", "ansibl", "while", "boto", "ha", "it", "disabl", "by", "default", "thu", "make", "modul", "less", "use", "spot", "price", "paramet", "allow", "spot", "instanc", "bid"], "B_body": "We are migrating to Ansible for all our AWS tool management. One of the things we need for creating Launch Configurations is the ability to enable detailed monitoring.\n\nI have checked similar functions and pull requests and hope that this is acceptable.\n\nI would also be happy if a core maintainer were to add the feature in a better way.\n\nThanks\n", "B_clean_body": ["we", "are", "migrat", "ansibl", "all", "our", "aw", "tool", "manag", "one", "thing", "we", "need", "creat", "launch", "configur", "abil", "enabl", "detail", "monitor", "have", "check", "similar", "function", "pull", "request", "hope", "that", "thi", "accept", "would", "also", "happi", "core", "maintain", "were", "add", "featur", "better", "way", "thank"], "title_sim": [0.6824531452473588], "body_sim": [0.20401922209041626], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.6808510638297872, 0.6808510638297872], "pattern": 0, "time": 5}, {"A_title": "ec2_vol module: add support for name / id to mount volume on instance", "A_clean_title": ["ec2", "vol", "modul", "add", "support", "name", "id", "mount", "volum", "instanc"], "B_title": "Ability to specify name of ec2 volume.", "B_clean_title": ["abil", "specifi", "name", "ec2", "volum"], "A_body": "- volume_size no longer required if name OR id is provided\n- id is volume-id\n- name is volume Name tag\n- special checking is provided\n", "A_clean_body": ["volum", "size", "no", "longer", "requir", "name", "or", "id", "provid", "id", "volum", "id", "name", "volum", "name", "tag", "special", "check", "provid"], "B_body": "Completely untested!\n", "B_clean_body": ["complet", "untest"], "title_sim": [0.4106723349538959], "body_sim": [0.0030456238945774454], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.8498168498168498, 0.8498168498168498], "pattern": 0, "time": 23}, {"A_title": "Define a persistent guest VM from a xml definition for virt module", "A_clean_title": ["defin", "persist", "guest", "vm", "xml", "definit", "virt", "modul"], "B_title": "Add define command to virt module", "B_clean_title": ["add", "defin", "command", "virt", "modul"], "A_body": "", "A_clean_body": [], "B_body": "This allows you to define a VM if one with the given name doesn't already exist, it can be used in a playbook like so:\n\n``` yaml\n- name: define vm\n  virt: name=myvm command=define xml=\"{{item}}\" uri=lxc:///\n  with_template: [\"container-template.xml.j2\"]\n- name: start vm\n  virt: name=myvm state=running uri=lxc:///\n```\n\nI'm not particularly happy with how the xml argument is populated, but it does work - suggestions for a better syntax welcome, I'm still getting my head around some of this.\n\nOne obvious caveat is that it wont re-define a VM for you if the XML changes, but I dont think you could safely do that anyway.\n", "B_clean_body": ["thi", "allow", "you", "defin", "vm", "one", "given", "name", "n't", "alreadi", "exist", "it", "use", "playbook", "like", "so", "yaml", "name", "defin", "vm", "virt", "name=myvm", "command=defin", "xml=", "item", "uri=lxc", "templat", "contain", "templat", "xml", "j2", "name", "start", "vm", "virt", "name=myvm", "state=run", "uri=lxc", "'m", "not", "particularli", "happi", "how", "xml", "argument", "popul", "but", "it", "work", "suggest", "better", "syntax", "welcom", "'m", "still", "get", "my", "head", "around", "some", "thi", "one", "obviou", "caveat", "that", "it", "wont", "re", "defin", "vm", "you", "xml", "chang", "but", "dont", "think", "you", "could", "safe", "that", "anyway"], "title_sim": [0.334013564401002], "body_sim": [0.0], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.7430555555555556, 0.7430555555555556], "pattern": 0, "time": 0}, {"A_title": "allow for sshpass support for `synchronize`", "A_clean_title": ["allow", "sshpass", "support", "synchron"], "B_title": "add sshpass support for `synchronize`", "B_clean_title": ["add", "sshpass", "support", "synchron"], "A_body": "Needs: https://github.com/ansible/ansible-modules-core/pull/2244\n- sshpass support\n- env support for run_command\n\ndelegate_to fix - https://github.com/ansible/ansible/pull/12752\n##### Security consideration\n- /proc/pid/environ are only readable by owner, or root. root can read almost everything based on selinux/security policies (including /proc/kcore)\n- ssh client tends to strip out env variables, SSHPASS will not be seen by client process (SendEnv ssh config bit)\n##### reasons to opt for env var\n- module.run_command does not support passing an fd to command module.\n- ssh and sshpass do not support reading password from stdin pipe ( data arg of run_command)\n- passing fd number to sshpass will not work, as fd no can be random.\n- adding support for setting up env was the least invasive and most reliable change\n", "A_clean_body": ["need", "http", "modul", "core", "pull", "2244", "github", "com", "ansibl", "ansibl", "sshpass", "support", "env", "support", "run", "command", "deleg", "fix", "http", "github", "com", "ansibl", "ansibl", "pull", "12752", "secur", "consider", "proc", "pid", "environ", "are", "onli", "readabl", "by", "owner", "or", "root", "root", "read", "almost", "everyth", "base", "selinux", "secur", "polici", "includ", "proc", "kcore", "ssh", "client", "tend", "strip", "out", "env", "variabl", "sshpass", "will", "not", "seen", "by", "client", "process", "sendenv", "send", "env", "ssh", "config", "bit", "reason", "opt", "env", "var", "modul", "run", "command", "not", "support", "pass", "fd", "command", "modul", "ssh", "sshpass", "not", "support", "read", "password", "stdin", "pipe", "data", "arg", "run", "command", "pass", "fd", "number", "sshpass", "will", "not", "work", "as", "fd", "no", "random", "ad", "support", "set", "up", "env", "wa", "least", "invas", "most", "reliabl", "chang"], "B_body": "add sshpass support for rsync\nwork together with https://github.com/ansible/ansible-modules-core/pull/1755\n", "B_clean_body": ["add", "sshpass", "support", "rsync", "work", "togeth", "http", "modul", "core", "pull", "1755", "github", "com", "ansibl", "ansibl"], "title_sim": [0.8469992924625245], "body_sim": [0.49931060852718184], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.3462334231289805, 0.5988775790156251], "location_sim": [0.0, 0.0], "pattern": -1, "time": 82}, {"A_title": "fixes 11607, override ansible_ssh_port in group/host_vars", "A_clean_title": ["fix", "11607", "overrid", "ansibl", "ssh", "port", "var", "group", "host"], "B_title": "ssh port not working as the if clause is wrong", "B_clean_title": ["ssh", "port", "not", "work", "as", "claus", "wrong"], "A_body": "Tested with `ansible myhost -m ping -vvvv`.  It correctly picks up ansible_ssh_port in the following order\n- host_vars\n- group_vars\n- remote_port (default) in ansible.cfg\n\nFull testing can be seen in https://gist.github.com/halberom/2195fe0d6dfa996d9439\n\nOnly thing I'm not sure about is whether it should be assigned to a class variable?  Also I took a look at the unit tests and although i could see there's a port test in executor.connection_info, I've no idea how to validate or expand on it.  Any tips appreciated.\n", "A_clean_body": ["test", "ansibl", "myhost", "ping", "vvvv", "it", "correctli", "pick", "up", "ansibl", "ssh", "port", "follow", "order", "host", "var", "group", "var", "remot", "port", "default", "ansibl", "cfg", "full", "test", "seen", "http", "github", "gist", "com", "halberom", "2195fe0d6dfa996d9439", "onli", "thing", "'m", "not", "sure", "about", "whether", "it", "assign", "class", "variabl", "also", "took", "look", "at", "unit", "test", "although", "could", "see", "there", "'s", "port", "test", "executor", "connect", "info", "'ve", "no", "idea", "how", "valid", "or", "expand", "it", "ani", "tip", "appreci"], "B_body": "The ssh port always results in port 22 as the if clause is never executed, this means that hosts on non-standard ssh port cannot be accessed\n", "B_clean_body": ["ssh", "port", "alway", "result", "port", "22", "as", "claus", "never", "execut", "thi", "mean", "that", "host", "non", "standard", "ssh", "port", "not", "access"], "title_sim": [0.3680516188633861], "body_sim": [0.3871839849865368], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 1}, {"A_title": "Add support for multiple required auth for openssh v6.2 onwards.", "A_clean_title": ["add", "support", "multipl", "requir", "auth", "openssh", "v6", "onward"], "B_title": "Don't disable GSSAPIAuthentication or PubkeyAuthentication when using --ask-pass", "B_clean_title": ["n't", "disabl", "gssapiauthent", "gssapi", "authent", "or", "pubkeyauthent", "pubkey", "authent", "when", "ask", "pass"], "A_body": "", "A_clean_body": [], "B_body": "As requested on irc, here's the output of ansible-playbook -vvvv with one echo on a delegate_to host and one on the main host.  The password on the delegated host is different from the one I provided on the command line, so it had to use the pubkey, and the main host doesn't have a pubkey on it yet, so it had to use the password.\n\nTASK: [createvm | echo on delegated host] ****************************************\n<delegate.example.net> ESTABLISH CONNECTION FOR USER: ansible\n<delegate.example.net> REMOTE_MODULE command echo \"This is on the delegated host\"\n<delegate.example.net> EXEC ['sshpass', '-d14', 'ssh', '-C', '-vvv', '-o', 'ControlMaster=auto', '-o', 'ControlPersist=60s', '-o', 'ForwardAgent=yes', '-o', 'ControlPath=/home/jon/.ansible/cp/ansible-ssh-%h-%p-%r', '-o', 'User=ansible', '-o', 'ConnectTimeout=10', u'delegate.example.net', '/bin/sh -c /usr/bin/python']\nchanged: [main.example.net] => {\"changed\": true, \"cmd\": [\"echo\", \"This is on the delegated host\"], \"delta\": \"0:00:00.001584\", \"end\": \"2014-04-03 13:19:35.184026\", \"item\": \"\", \"rc\": 0, \"start\": \"2014-04-03 13:19:35.182442\", \"stderr\": \"\", \"stdout\": \"This is on the delegated host\"}\n\nTASK: [bootstrap | echo on main host] *****************************************\n<main.example.net> ESTABLISH CONNECTION FOR USER: root\n<main.example.net> REMOTE_MODULE command echo \"This is on the main host\"\n<main.example.net> EXEC ['sshpass', '-d9', 'ssh', '-C', '-vvv', '-o', 'ControlMaster=auto', '-o', 'ControlPersist=60s', '-o', 'ForwardAgent=yes', '-o', 'ControlPath=/home/jon/.ansible/cp/ansible-ssh-%h-%p-%r', '-o', 'User=root', '-o', 'ConnectTimeout=10', u'main.example.net', '/bin/sh -c /usr/bin/python']\nchanged: [main.example.net] => {\"changed\": true, \"cmd\": [\"echo\", \"This is on the main host\"], \"delta\": \"0:00:00.001749\", \"end\": \"2014-04-03 13:19:42.459113\", \"item\": \"\", \"rc\": 0, \"start\": \"2014-04-03 13:19:42.457364\", \"stderr\": \"\", \"stdout\": \"This is on the main host\"}\n", "B_clean_body": ["as", "request", "irc", "here", "'s", "output", "ansibl", "playbook", "vvvv", "one", "echo", "deleg", "host", "one", "main", "host", "password", "deleg", "host", "differ", "one", "provid", "command", "line", "so", "it", "had", "use", "pubkey", "main", "host", "n't", "have", "pubkey", "it", "yet", "so", "it", "had", "use", "password", "task", "createvm", "echo", "deleg", "host", "deleg", "exampl", "net", "establish", "connect", "user", "ansibl", "deleg", "exampl", "net", "remot", "modul", "command", "echo", "thi", "deleg", "host", "deleg", "exampl", "net", "exec", "'sshpass", "d14", "'ssh", "vvv", "'controlmaster=auto", "'control", "master=auto", "'controlpersist=60", "'control", "persist=60", "'forwardagent=y", "'forward", "agent=y", "ssh", "'controlpath=", "home", "jon", "ansibl", "cp", "ansibl", "'control", "path=", "'user=ans", "'connecttimeout=10", "'connect", "timeout=10", "u'deleg", "exampl", "net", "bin", "sh", "usr", "bin", "python", "chang", "main", "exampl", "net", "chang", "true", "cmd", "echo", "thi", "deleg", "host", "delta", "0:00:00", "001584", "end", "2014", "04", "03", "13:19:35", "184026", "item", "rc", "start", "2014", "04", "03", "13:19:35", "182442", "stderr", "stdout", "thi", "deleg", "host", "task", "bootstrap", "echo", "main", "host", "main", "exampl", "net", "establish", "connect", "user", "root", "main", "exampl", "net", "remot", "modul", "command", "echo", "thi", "main", "host", "main", "exampl", "net", "exec", "'sshpass", "d9", "'ssh", "vvv", "'controlmaster=auto", "'control", "master=auto", "'controlpersist=60", "'control", "persist=60", "'forwardagent=y", "'forward", "agent=y", "ssh", "'controlpath=", "home", "jon", "ansibl", "cp", "ansibl", "'control", "path=", "'user=root", "'connecttimeout=10", "'connect", "timeout=10", "u'main", "exampl", "net", "bin", "sh", "usr", "bin", "python", "chang", "main", "exampl", "net", "chang", "true", "cmd", "echo", "thi", "main", "host", "delta", "0:00:00", "001749", "end", "2014", "04", "03", "13:19:42", "459113", "item", "rc", "start", "2014", "04", "03", "13:19:42", "457364", "stderr", "stdout", "thi", "main", "host"], "title_sim": [0.021002043218503276], "body_sim": [0.0], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.04104716750075354, 0.0], "location_sim": [0.0, 0.0], "pattern": -1, "time": 200}, {"A_title": "Allow tree-ish versions for ansible-galaxy", "A_clean_title": ["allow", "tree", "ish", "version", "ansibl", "galaxi"], "B_title": "git archive in ansible-galaxy fails for non-default-branch versions", "B_clean_title": ["git", "archiv", "ansibl", "galaxi", "fail", "non", "default", "branch", "version"], "A_body": "Rebase of #10620, retaining credit for @semifocused's work. For justification etc., see #10620.\n", "A_clean_body": ["rebas", "10620", "retain", "credit", "semifocus", "'s", "work", "justif", "etc", "see", "10620"], "B_body": "Trying to install a branch that is not the default (typically 'master') via ansible-galaxy fails because `git archive` cannot handle remote branches. Introducing a `git checkout` solves this problem by pulling the remote branch onto the local machine.\n\nMy concrete example was:\n\n``` yaml\n# galaxy.yml\n- src: https://github.com/thefinn93/ansible-tlsdate.git\n  version: rename-service\n```\n\nwhich caused:\n\n```\n- executing: git clone https://github.com/thefinn93/ansible-tlsdate.git ansible-tlsdate\n- executing: git archive --prefix=ansible-tlsdate/ --output=/tmp/tmpOLH2Y4.tar rename-service\n- command git archive --prefix=ansible-tlsdate/ --output=/tmp/tmpOLH2Y4.tar rename-service failed\n  in directory /tmp/tmpTlAMNS\n- ansible-tlsdate was NOT installed successfully.\n- you can use --ignore-errors to skip failed roles.\n```\n", "B_clean_body": ["tri", "instal", "branch", "that", "not", "default", "typic", "'master", "via", "ansibl", "galaxi", "fail", "becaus", "git", "archiv", "not", "handl", "remot", "branch", "introduc", "git", "checkout", "solv", "thi", "problem", "by", "pull", "remot", "branch", "onto", "local", "machin", "my", "concret", "exampl", "wa", "yaml", "galaxi", "yml", "src", "http", "tlsdate", "git", "github", "com", "thefinn93", "ansibl", "version", "renam", "servic", "which", "caus", "execut", "git", "clone", "http", "tlsdate", "git", "github", "com", "thefinn93", "ansibl", "ansibl", "tlsdate", "execut", "git", "archiv", "prefix=ans", "tlsdate", "tar", "output=", "tmp", "tmpolh2y4", "tmp", "olh2y4", "renam", "servic", "command", "git", "archiv", "prefix=ans", "tlsdate", "tar", "output=", "tmp", "tmpolh2y4", "tmp", "olh2y4", "renam", "servic", "fail", "directori", "tmp", "tmptlamn", "tmp", "tl", "amn", "ansibl", "tlsdate", "wa", "not", "instal", "success", "you", "use", "ignor", "error", "skip", "fail", "role"], "title_sim": [0.4197862405906048], "body_sim": [0.0388139265929379], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 262}, {"A_title": "Split comma separated tags and include in groups", "A_clean_title": ["split", "comma", "separ", "tag", "includ", "group"], "B_title": "Updated version of my original PR #7292 to incorporate nested group changes", "B_clean_title": ["updat", "version", "my", "origin", "pr", "7292", "incorpor", "nest", "group", "chang"], "A_body": "Split tags that are comma separated and add the host to those different groups.\n\nE.g.: myhost: env = \"dev,staging\"\n\nInstead of having the actual:\n\"tag_env_dev_staging\": [ ..., \"myhost\" ]\n\nthis would result in:\n\"tag_env_dev\": [ ..., \"myhost\" ],\n\"tag_env_staging\": [ ..., \"myhost\" ]\n\nI think it's more flexible and allows more grouping options based in tags.\n", "A_clean_body": ["split", "tag", "that", "are", "comma", "separ", "add", "host", "those", "differ", "group", "myhost", "env", "dev", "stage", "instead", "have", "actual", "tag", "env", "dev", "stage", "myhost", "thi", "would", "result", "tag", "env", "dev", "myhost", "tag", "env", "stage", "myhost", "think", "it", "'s", "more", "flexibl", "allow", "more", "group", "option", "base", "tag"], "B_body": "My previous PR for the expanding of CSV values in ec2 tags did not merge cleanly with the current devel HEAD, so have updated the patches to resolve this.\n", "B_clean_body": ["my", "previou", "pr", "expand", "csv", "valu", "ec2", "tag", "did", "not", "merg", "cleanli", "current", "devel", "head", "so", "have", "updat", "patch", "resolv", "thi"], "title_sim": [0.24264697323343462], "body_sim": [0.30155607881269086], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.015202932763362383, 0.01826771871771636], "location_sim": [0.3804347826086957, 0.4117647058823529], "pattern": 0, "time": 59}, {"A_title": "Answer yes for pkgin list command to update package database if requeste...", "A_clean_title": ["answer", "ye", "pkgin", "list", "command", "updat", "packag", "databas", "request"], "B_title": "Added `-y` flag to `query_package`", "B_clean_title": ["ad", "flag", "queri", "packag"], "A_body": "...d.\n\nIf the pkgin database is outdated the pkgin list command will prompt the user asking if the package database should be updated.  This behavior causes Ansible to hang as well.  Adding the \"-y\" option to pkgin list will answer yes when prompted and bypass this message.  The \"-y\" option is already included in the other pkgin commands so this change follows right along with those.\n", "A_clean_body": ["pkgin", "databas", "outdat", "pkgin", "list", "command", "will", "prompt", "user", "ask", "packag", "databas", "updat", "thi", "behavior", "caus", "ansibl", "hang", "as", "well", "ad", "option", "pkgin", "list", "will", "answer", "ye", "when", "prompt", "bypass", "thi", "messag", "option", "alreadi", "includ", "other", "pkgin", "command", "so", "thi", "chang", "follow", "right", "along", "those"], "B_body": "- library/packaging/pkgin:\n\nSigned-off-by: giorgio-v giorgio@refactor.it\n", "B_clean_body": ["librari", "packag", "pkgin", "sign", "off", "by", "giorgio", "giorgio", "refactor", "it"], "title_sim": [0.25327446822127425], "body_sim": [0.08972099261300515], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [1.0, 1.0], "pattern": 0, "time": 11}, {"A_title": "Missing argument", "A_clean_title": ["miss", "argument"], "B_title": "closes issue #12403: pass groups to get_file_parser", "B_clean_title": ["close", "issu", "12403", "pass", "group", "get", "file", "parser"], "A_body": "", "A_clean_body": [], "B_body": "", "B_clean_body": [], "title_sim": [0.010308845894222216], "body_sim": [0.0], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [1.0, 1.0], "location_sim": [1.0, 1.0], "pattern": 0, "time": 0}, {"A_title": "ansible-doc now shows return value docs", "A_clean_title": ["ansibl", "doc", "now", "show", "return", "valu", "doc"], "B_title": "add doc to stat module + function to display doc", "B_clean_title": ["add", "doc", "stat", "modul", "function", "display", "doc"], "A_body": "modified ansible-doc to show documented return values (registered var structure) if a module has this data embeded.\n\nTODO: \n- add to docsite/rst (docs.ansible.com)\n- create common docs for common data returned by all modules (msg,changed,failed,skipped, etc)\n", "A_clean_body": ["modifi", "ansibl", "doc", "show", "document", "return", "valu", "regist", "var", "structur", "modul", "ha", "thi", "data", "embed", "todo", "add", "docsit", "rst", "doc", "ansibl", "com", "creat", "common", "doc", "common", "data", "return", "by", "all", "modul", "msg", "chang", "fail", "skip", "etc"], "B_body": "Hi, \n\nI had to make a function in ansible-doc to display parameters list properly.\n\nBest regards\n\nPS: tmp_stat is a working directory\n", "B_clean_body": ["hi", "had", "make", "function", "ansibl", "doc", "display", "paramet", "list", "properli", "best", "regard", "ps", "tmp", "stat", "work", "directori"], "title_sim": [0.469147892418208], "body_sim": [0.1453447236099119], "file_list_sim": 0.25, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.17791411042944785, 0.58], "pattern": 0, "time": 202}, {"A_title": "VAULT_TOKEN is ignored when set as env var or from $HOME/.vault-token file", "A_clean_title": ["vault", "token", "ignor", "when", "set", "as", "env", "var", "or", "token", "vault", "home", "file"], "B_title": "hashi_vault: fix token logic", "B_clean_title": ["hashi", "vault", "fix", "token", "logic"], "A_body": "##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nhashi_vault lookup plugin\r\n\r\n##### ANSIBLE VERSION\r\n```\r\n# ansible --version\r\nansible 2.3.0\r\n  config file = /root/.ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\nThis actually patches #18659\r\n\r\n<!-- Paste verbatim command output below, e.g. before and after your change -->\r\n\r\nEnvironment\r\n```\r\n# cat vault.yml \r\n---\r\n\r\n- hosts: 127.0.0.1\r\n  connection: local\r\n  tasks:\r\n  - name:\r\n    shell: \"echo {{ lookup('hashi_vault', 'secret=secret/foo:bar') }}\"\r\n\r\n# export | grep VAULT_\r\ndeclare -x VAULT_ADDR=\"http://xxxxxxxxxx:8200\"\r\ndeclare -x VAULT_TOKEN=\"ab0fd063xxxxxxxxb06f9\"\r\n\r\n```\r\n\r\nBefore\r\n```\r\nroot@c02b4846c9e1:/# ansible-playbook -i 'localhost,' vault.yml\r\n\r\nPLAY [127.0.0.1] *****************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ***********************************************************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [command] *******************************************************************************************************************************************************************************************\r\nfatal: [localhost]: FAILED! => {\"failed\": true, \"msg\": \"An unhandled exception occurred while running the lookup plugin 'hashi_vault'. Error was a <class 'ansible.errors.AnsibleError'>, original message: yy No Vault Token specified\"}\r\n\tto retry, use: --limit @/vault.retry\r\n\r\nPLAY RECAP ***********************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=1   \r\n\r\nroot@c02b4846c9e1:/# \r\n```\r\n\r\nAfter:\r\n```\r\n# ansible-playbook -i 'localhost,' vault.yml\r\n\r\nPLAY [127.0.0.1] *****************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ***********************************************************************************************************************************************************************************\r\nok: [localhost]\r\n\r\nTASK [command] *******************************************************************************************************************************************************************************************\r\nchanged: [localhost]\r\n\r\nPLAY RECAP ***********************************************************************************************************************************************************************************************\r\nlocalhost                  : ok=2    changed=1    unreachable=0    failed=0   \r\n\r\nroot@c02b4846c9e1:/#\r\n```\r\n\r\n\r\nThe same behavior was experienced when `.vault-token` existed - it was also ignored.", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "compon", "name", "hashi", "vault", "lookup", "plugin", "ansibl", "version", "ansibl", "version", "ansibl", "config", "file", "ansibl", "cfg", "root", "configur", "modul", "search", "path", "default", "overrid", "summari", "describ", "chang", "includ", "rational", "design", "decis", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "thi", "actual", "patch", "18659", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang", "environ", "cat", "vault", "yml", "host", "127", "connect", "local", "task", "name", "shell", "echo", "lookup", "'hashi", "vault", "'secret=secret", "foo", "bar", "export", "grep", "vault", "declar", "vault", "addr=", "http", "xxxxxxxxxx:8200", "declar", "vault", "token=", "ab0fd063xxxxxxxxb06f9", "befor", "root", "c02b4846c9e1", "ansibl", "playbook", "'localhost", "vault", "yml", "play", "127", "task", "gather", "fact", "ok", "localhost", "task", "command", "fatal", "localhost", "fail", "fail", "true", "msg", "unhandl", "except", "occur", "while", "run", "lookup", "plugin", "'hashi", "vault", "error", "wa", "class", "'ansibl", "error", "ansibleerror", "ansibl", "error", "origin", "messag", "yy", "no", "vault", "token", "specifi", "retri", "use", "limit", "retri", "vault", "play", "recap", "localhost", "ok=1", "changed=0", "unreachable=0", "failed=1", "root", "c02b4846c9e1", "after", "ansibl", "playbook", "'localhost", "vault", "yml", "play", "127", "task", "gather", "fact", "ok", "localhost", "task", "command", "chang", "localhost", "play", "recap", "localhost", "ok=2", "changed=1", "unreachable=0", "failed=0", "root", "c02b4846c9e1", "same", "behavior", "wa", "experienc", "when", "token", "vault", "exist", "it", "wa", "also", "ignor"], "B_body": "##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nhashi_vault\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.3.0 (devel 7798297317) last updated 2017/02/24 15:54:44 (GMT -400)\r\n  config file = /home/ec2-user/ansible-aws-dev/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\ne2e4a69425a4128738846be24e16544b56a7cda9 (which added the ability to automatically set the authentication token from an environment variable or the default Vault credential file) is broken due to 65f561e496582024812aa97fb8acb717ef169c33, which was applied before it and added a second place where `self.token` is set and checked. The new authentication flow makes `token` into an optional setting, so I consolidated the two set/check stanzas into the second one.\r\n\r\n<!-- Paste verbatim command output below, e.g. before and after your change -->\r\nBefore:\r\n```\r\nTASK [debug] *******************************************************************\r\nfatal: [localhost]: FAILED! => {\"failed\": true, \"msg\": \"{{ lookup('hashi_vault', 'secret=secret/ping') }}: An unhandled exception occurred while running the lookup plugin 'hashi_vault'. Error was a <class 'ansible.errors.AnsibleError'>, original message: No Vault Token specified\"}\r\n\r\n```\r\nAfter:\r\n```\r\nTASK [debug] *******************************************************************\r\nok: [localhost] => {\r\n    \"changed\": false, \r\n    \"test\": \"pong\"\r\n}\r\n```", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "compon", "name", "hashi", "vault", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "devel", "7798297317", "last", "updat", "2017", "02", "24", "15:54:44", "gmt", "400", "config", "file", "aw", "home", "ec2", "user", "ansibl", "cfg", "dev", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "summari", "e2e4a69425a4128738846be24e16544b56a7cda9", "which", "ad", "abil", "automat", "set", "authent", "token", "environ", "variabl", "or", "default", "vault", "credenti", "file", "broken", "due", "65f561e496582024812aa97fb8acb717ef169c33", "which", "wa", "appli", "befor", "it", "ad", "second", "place", "where", "self", "token", "set", "check", "new", "authent", "flow", "make", "token", "into", "option", "set", "so", "consolid", "two", "set", "check", "stanza", "into", "second", "one", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang", "befor", "task", "debug", "fatal", "localhost", "fail", "fail", "true", "msg", "lookup", "'hashi", "vault", "'secret=secret", "ping", "unhandl", "except", "occur", "while", "run", "lookup", "plugin", "'hashi", "vault", "error", "wa", "class", "'ansibl", "error", "ansibleerror", "ansibl", "error", "origin", "messag", "no", "vault", "token", "specifi", "after", "task", "debug", "ok", "localhost", "chang", "fals", "test", "pong"], "title_sim": [0.7633828743459212], "body_sim": [0.6856229771945541], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.7857142857142857, 0.7857142857142857], "pattern": 1, "time": 0}, {"A_title": "Add Docker net parameter", "A_clean_title": ["add", "docker", "net", "paramet"], "B_title": "Add networking mode parameter (net) to docker", "B_clean_title": ["add", "network", "mode", "paramet", "net", "docker"], "A_body": "Example:\nCreate containers using the hosts network stack:\n\n```\n- hosts: web\n  sudo: yes\n  tasks:\n  docker: image=nginx net=host\n```\n\nThis closes #7324.\n", "A_clean_body": ["exampl", "creat", "contain", "host", "network", "stack", "host", "web", "sudo", "ye", "task", "docker", "image=nginx", "net=host", "thi", "close", "7324"], "B_body": "Since 0.11 Docker supports different networking modes (see docker run --net). This commit add support for that to the ansible docker module.\n\nThis depends on dotcloud/docker-py@2d58351\n", "B_clean_body": ["sinc", "11", "docker", "support", "differ", "network", "mode", "see", "docker", "run", "net", "thi", "commit", "add", "support", "that", "ansibl", "docker", "modul", "thi", "depend", "py", "dotcloud", "docker", "2d58351"], "title_sim": [0.7589468569149661], "body_sim": [0.3767282426633288], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.38235294117647056, 0.38235294117647056], "pattern": -1, "time": 56}, {"A_title": "New lookup-plugin: `dig' for performing DNS lookups", "A_clean_title": ["new", "lookup", "plugin", "dig", "perform", "dn", "lookup"], "B_title": "New Jinja2 'resolve' filter.", "B_clean_title": ["new", "jinja2", "'resolv", "filter"], "A_body": "This makes `dnstxt.py` obsolete, and I recommend it be removed.\n", "A_clean_body": ["thi", "make", "dnstxt", "py", "obsolet", "recommend", "it", "remov"], "B_body": "Translates list of domain names into list of IP addresses.\nYou can select IPs by address family.\nBy default filter lists IPv4 and IPv6 addresses.\n\nUsage (in Jinja2 template): \n- Get list of IPv4 addresses for list of domains:\n  - `{{ domains | resolve('IPv4') }}`\n  - `{{ domains | resolve('v4') }}`\n  - `{{ domains | resolver(4) }}`\n- Get list of IPv6 addresses for list of domains:\n  - `{{ domains | resolve('IPv6') }}`\n  - `{{ domains | resolve('v6') }}`\n  - `{{ domains | resolve(6) }}`\n", "B_clean_body": ["translat", "list", "domain", "name", "into", "list", "ip", "address", "you", "select", "ip", "ps", "by", "address", "famili", "by", "default", "filter", "list", "ipv4", "pv4", "ipv6", "pv6", "address", "usag", "jinja2", "templat", "get", "list", "ipv4", "pv4", "address", "list", "domain", "domain", "resolv", "'ipv4", "'i", "pv4", "domain", "resolv", "'v4", "domain", "resolv", "get", "list", "ipv6", "pv6", "address", "list", "domain", "domain", "resolv", "'ipv6", "'i", "pv6", "domain", "resolv", "'v6", "domain", "resolv"], "title_sim": [0.12110349996679673], "body_sim": [0.05234358821557898], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.10619940469877437, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 35}, {"A_title": "ec2 module: Added ability to start and stop existing EC2 instances.", "A_clean_title": ["ec2", "modul", "ad", "abil", "start", "stop", "exist", "ec2", "instanc"], "B_title": "support starting and stopping ec2 instances", "B_clean_title": ["support", "start", "stop", "ec2", "instanc"], "A_body": "This adds the ability to set the state of an existing instance to 'started' or 'stopped' in the ec2 module.\n\nExample usage to start an instance:\n\n```\n- name: Start the sandbox instances\n  local_action:\n   module: ec2\n   instance_ids: '{{ instance_ids }}'\n   region: '{{ region }}'\n   state: running\n   wait: True\n```\n\nSince I had this in my main fork I rebased and reset my fork and created a branch to properly put this change in to. So this is the same changes from my original pull #4805.\n", "A_clean_body": ["thi", "add", "abil", "set", "state", "exist", "instanc", "'start", "or", "'stop", "ec2", "modul", "exampl", "usag", "start", "instanc", "name", "start", "sandbox", "instanc", "local", "action", "modul", "ec2", "instanc", "id", "instanc", "id", "region", "region", "state", "run", "wait", "true", "sinc", "had", "thi", "my", "main", "fork", "rebas", "reset", "my", "fork", "creat", "branch", "properli", "put", "thi", "chang", "so", "thi", "same", "chang", "my", "origin", "pull", "4805"], "B_body": "This seems to be working locally for me !\n", "B_clean_body": ["thi", "seem", "work", "local", "me"], "title_sim": [0.7757911564329925], "body_sim": [0.21291632049897327], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.4726775956284153, 0.5864406779661017], "pattern": 0, "time": 9}, {"A_title": "Fix #7711", "A_clean_title": ["fix", "7711"], "B_title": "Fix issue with relative symlinks", "B_clean_title": ["fix", "issu", "rel", "symlink"], "A_body": "Fix relative symlinks creation in file module.\n", "A_clean_body": ["fix", "rel", "symlink", "creation", "file", "modul"], "B_body": "Fixes #7711\n", "B_clean_body": ["fix", "7711"], "title_sim": [0.1594320037734418], "body_sim": [0.1307186245411546], "file_list_sim": 1.0, "overlap_files_len": 2, "code_sim": [0.0, 0.0], "location_sim": [0.8064516129032258, 0.8064516129032258], "pattern": 1, "time": 24}, {"A_title": "Fix docs/api sphinx-build err on 'make rpm'", "A_clean_title": ["fix", "doc", "api", "sphinx", "build", "err", "'make", "rpm"], "B_title": "Fix deb builder docker image", "B_clean_title": ["fix", "deb", "builder", "docker", "imag"], "A_body": "\r\n##### SUMMARY\r\nFix docs/api sphinx-build err on 'make rpm'\r\n\r\nremove check/warning about sphinx-build on 'make'\r\n\r\nThe makefile in docs/api/ had a top level check for the\r\n'sphinx-build' tool, but the check was getting triggered\r\non 'make clean' when it is not needed and causing 'make rpm'\r\nand similar builds to fail.\r\n\r\nSo this commit removes the check.\r\n\r\nFixes #24163\r\n\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\ndocs/api/Makefile\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.4.0 (docs_makefile_24163 bef877c4d3) last updated 2017/05/05 13:12:18 (GMT -400)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/adrian/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/adrian/src/ansible/lib/ansible\r\n  executable location = /home/adrian/src/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Jan 12 2017, 17:59:37) [GCC 6.3.1 20161221 (Red Hat 6.3.1-1)]\r\n\r\n```\r\n\r\n", "A_clean_body": ["summari", "fix", "doc", "api", "sphinx", "build", "err", "'make", "rpm'", "remov", "check", "warn", "about", "sphinx", "build", "'make'", "makefil", "doc", "api", "had", "top", "level", "check", "'sphinx", "build", "tool", "but", "check", "wa", "get", "trigger", "'make", "clean", "when", "it", "not", "need", "caus", "'make", "rpm'", "similar", "build", "fail", "so", "thi", "commit", "remov", "check", "fix", "24163", "describ", "chang", "includ", "rational", "design", "decis", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "doc", "api", "makefil", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "doc", "makefil", "24163", "bef877c4d3", "last", "updat", "2017", "05", "05", "13:12:18", "gmt", "400", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "u'", "home", "adrian", "ansibl", "plugin", "modul", "u'", "usr", "share", "ansibl", "plugin", "modul", "ansibl", "python", "modul", "locat", "home", "adrian", "src", "ansibl", "lib", "ansibl", "execut", "locat", "home", "adrian", "src", "ansibl", "bin", "ansibl", "python", "version", "13", "default", "jan", "12", "2017", "17:59:37", "gcc", "20161221", "red", "hat"], "B_body": "##### SUMMARY\r\nI needed to install Sphinx inside this image to get `make deb` working.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nDebian Packaging\r\n\r\n##### ANSIBLE VERSION\r\nN/A", "B_clean_body": ["summari", "need", "instal", "sphinx", "insid", "thi", "imag", "get", "make", "deb", "work", "issu", "type", "bugfix", "pull", "request", "compon", "name", "debian", "packag", "ansibl", "version"], "title_sim": [0.0600622518647698], "body_sim": [0.13428549332083542], "file_list_sim": 0.0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 48}, {"A_title": "win_copy: added remote and content options", "A_clean_title": ["win", "copi", "ad", "remot", "content", "option"], "B_title": "win_copy: Add force parameter and check-mode support", "B_clean_title": ["win", "copi", "add", "forc", "paramet", "check", "mode", "support"], "A_body": "##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nwin_copy\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.0 (win_copy-extra-params 4708fea394) last updated 2017/02/17 08:11:27 (GMT +1000)\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\n\r\nFixed up documentation to reference content parameter\r\nAdded support for copy files from remote host with remote_src\r\nAdded check mode\r\nCleaned up tests\r\nCleaned up module to fit with current formatting standard", "A_clean_body": ["issu", "type", "featur", "pull", "request", "compon", "name", "win", "copi", "ansibl", "version", "ansibl", "extra", "param", "win", "copi", "4708fea394", "last", "updat", "2017", "02", "17", "08:11:27", "gmt", "+1000", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "summari", "fix", "up", "document", "refer", "content", "paramet", "ad", "support", "copi", "file", "remot", "host", "remot", "src", "ad", "check", "mode", "clean", "up", "test", "clean", "up", "modul", "fit", "current", "format", "standard"], "B_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nwin_copy\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\nv2.3\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\nThe rationale behind this is that if you're working with +3GB files,\r\ncreating the checksum takes a lot of time, which we can avoid by simply\r\ntesting if the file exists.\r\n\r\nI also took the liberty to put the various parameters together. It\r\nprobably takes a (neglible) performance hit but makes the code a bit\r\neasier to inspect/work with, as its closer to all other windows modules.\r\n\r\nOn a normal run, the action plugin does a local checksum of the source\r\nand a remote checksum of the destination. And afterwards, the module\r\nwill do another remote checksum of the copied source, a remote checksum\r\nof the original destination, and another remote checksum of the copied\r\ndestination.\r\n\r\nOn a very huge file (think 4GB) that means **no less than 5x reading the\r\ncomplete file** *If you have a large cache you may get away with it, otherwise\r\nyou're doomed !*\r\n\r\nThis patch will ensure with `force: no` that no checksums are being\r\nperformed by the action plugin and the module. We do this by delaying\r\nthe checksum calls until we have determined whether the destination in\r\nfact exists. More optimisations are still possible, especially in the case the\r\ndestination does not exist (we don't need a checksum in that case anyhow).", "B_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "win", "copi", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "v2", "summari", "describ", "chang", "includ", "rational", "design", "decis", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "rational", "behind", "thi", "that", "you", "'re", "work", "+3gb", "file", "creat", "checksum", "take", "lot", "time", "which", "we", "avoid", "by", "simpli", "test", "file", "exist", "also", "took", "liberti", "put", "variou", "paramet", "togeth", "it", "probabl", "take", "neglibl", "perform", "hit", "but", "make", "code", "bit", "easier", "inspect", "work", "as", "it", "closer", "all", "other", "window", "modul", "normal", "run", "action", "plugin", "local", "checksum", "sourc", "remot", "checksum", "destin", "afterward", "modul", "will", "anoth", "remot", "checksum", "copi", "sourc", "remot", "checksum", "origin", "destin", "anoth", "remot", "checksum", "copi", "destin", "veri", "huge", "file", "think", "4gb", "that", "mean", "**no", "less", "than", "5x", "read", "complet", "file**", "*if", "you", "have", "larg", "cach", "you", "may", "get", "away", "it", "otherwis", "you", "'re", "doom", "thi", "patch", "will", "ensur", "forc", "no", "that", "no", "checksum", "are", "be", "perform", "by", "action", "plugin", "modul", "we", "thi", "by", "delay", "checksum", "call", "until", "we", "have", "determin", "whether", "destin", "fact", "exist", "more", "optimis", "are", "still", "possibl", "especi", "case", "destin", "not", "exist", "we", "n't", "need", "checksum", "that", "case", "anyhow"], "title_sim": [0.26206873451469], "body_sim": [0.2534267177891193], "file_list_sim": 0.4, "overlap_files_len": 2, "code_sim": [0.13632736672788495, 0.2168887363860213], "location_sim": [0.36796536796536794, 0.9392265193370166], "pattern": -1, "time": 29}, {"A_title": "Fixes #15215 - Inventory script does not work with assumed roles", "A_clean_title": ["fix", "15215", "inventori", "script", "not", "work", "assum", "role"], "B_title": "IAM role support for EC2 dynamic inventory", "B_clean_title": ["iam", "role", "support", "ec2", "dynam", "inventori"], "A_body": "##### ISSUE TYPE\n\n<!--- Pick one below and delete the rest: -->\n- Feature Pull Request\n##### ANSIBLE VERSION\n\n```\nno special\n```\n##### SUMMARY\n\nadd support to dynamic ec2 host inventory from `system environment`, `.boto`, and assume role from `.aws/config`\nFixes #15215\n\n```\nIf you set system environment \n\nAWS_ACCESS_KEY_ID\nAWS_SECRET_ACCESS_KEY\nAWS_SESSION_TOKEN\n\nYou can run directly\n./ec2.py  --list\n\nIf you set profile with aws_security_token in `~/.boto` or `~/.aws/credentials`\n\n./ec2.py --profile marketingadmin --list\n\nIf you set profile with assume role in `~/.aws/config`\n\n./ec2.py --profile marketingadmin --list\n\n```\n", "A_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "ansibl", "version", "no", "special", "summari", "add", "support", "dynam", "ec2", "host", "inventori", "system", "environ", "boto", "assum", "role", "aw", "config", "fix", "15215", "you", "set", "system", "environ", "aw", "access", "key", "id", "aw", "secret", "access", "key", "aw", "session", "token", "you", "run", "directli", "py", "ec2", "list", "you", "set", "profil", "aw", "secur", "token", "boto", "or", "aw", "credenti", "py", "ec2", "profil", "marketingadmin", "list", "you", "set", "profil", "assum", "role", "aw", "config", "py", "ec2", "profil", "marketingadmin", "list"], "B_body": "##### ISSUE TYPE\n- Feature Pull Request\n##### ANSIBLE VERSION\n\n```\nansible 2.1.0\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = Default w/o overrides\n```\n\nTested on both `2.1.0` and `1.9.4`\n##### SUMMARY\n\nThis change allows the EC2 dynamic inventory to assume an IAM role prior to connecting to the AWS modules.\nWe needed this functionality at my company due to how we have structured our AWS setup, and I thought others might find it useful.\n", "B_clean_body": ["issu", "type", "featur", "pull", "request", "ansibl", "version", "ansibl", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "test", "both", "summari", "thi", "chang", "allow", "ec2", "dynam", "inventori", "assum", "iam", "role", "prior", "connect", "aw", "modul", "we", "need", "thi", "function", "at", "my", "compani", "due", "how", "we", "have", "structur", "our", "aw", "setup", "thought", "other", "might", "find", "it", "use"], "title_sim": [0.40916149951166686], "body_sim": [0.5008637936928266], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.4865145730998274, 0.5091351479992975], "location_sim": [0.680672268907563, 0.75], "pattern": -1, "time": 18}, {"A_title": "Adds feature from Boto missing in ec2_lc module", "A_clean_title": ["add", "featur", "boto", "miss", "ec2", "lc", "modul"], "B_title": "Update ec2_lc with missing LaunchConfig params", "B_clean_title": ["updat", "ec2", "lc", "miss", "launchconfig", "launch", "config", "param"], "A_body": "This PR adds the feature present in Boto and missing in Ansible ec2_lc:\n- kernel_id for custom kernel\n- ramdisk_id for custom ramdisk\n- instance_profile_name to launch instances within an IAM role\n- ebs_optimized (to launch an EBS optimized instance or not)\n- associate_public_ip_address to associate a public IP address within a VPC\n- instance_monitoring to enable Cloudwatch on the instance (replaces https://github.com/ansible/ansible/pull/7896)\n", "A_clean_body": ["thi", "pr", "add", "featur", "present", "boto", "miss", "ansibl", "ec2", "lc", "kernel", "id", "custom", "kernel", "ramdisk", "id", "custom", "ramdisk", "instanc", "profil", "name", "launch", "instanc", "within", "iam", "role", "eb", "optim", "launch", "eb", "optim", "instanc", "or", "not", "associ", "public", "ip", "address", "associ", "public", "ip", "address", "within", "vpc", "instanc", "monitor", "enabl", "cloudwatch", "instanc", "replac", "http", "github", "com", "ansibl", "ansibl", "pull", "7896"], "B_body": "Add support for instance_profile_name and associate_public_ip_address.\n", "B_clean_body": ["add", "support", "instanc", "profil", "name", "associ", "public", "ip", "address"], "title_sim": [0.6735313838546051], "body_sim": [0.5265316275766373], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.7557251908396947, 0.7557251908396947], "pattern": 0, "time": 21}, {"A_title": "Modified ec2_vol to use the new SSD based storage", "A_clean_title": ["modifi", "ec2", "vol", "use", "new", "ssd", "base", "storag"], "B_title": "Added support for general purpose SSD EBS volume_type", "B_clean_title": ["ad", "support", "gener", "purpos", "ssd", "eb", "volum", "type"], "A_body": "The older magnetic storage was referenced as volume_type = 'standard'\nThe new SSD based general purpose storage is now referenced as volume_type = 'gp2'\nThe change proposed will leverage the new storage without needing to retrofit the module to have volume_type added as a required type and expect people to know its moved from 'storage' to 'gp2'.\n", "A_clean_body": ["older", "magnet", "storag", "wa", "referenc", "as", "volum", "type", "'standard'", "new", "ssd", "base", "gener", "purpos", "storag", "now", "referenc", "as", "volum", "type", "'gp2'", "chang", "propos", "will", "leverag", "new", "storag", "without", "need", "retrofit", "modul", "have", "volum", "type", "ad", "as", "requir", "type", "expect", "peopl", "know", "it", "move", "'storag", "'gp2"], "B_body": "This adds support for AWS general purpose SSD volumes: http://aws.amazon.com/ebs/details/ \n- volume_type module parameter added which defaults to standard if one is not specified\n- if standard and iops are both specified, volume_type is changed to io1 for backwards compatibility (as opposed to requiring the user to now specify volume_type in plays) .\n- if gp2 volume_type is specified with an iops value, the play will error. Defaulting this to io1 as well seemed assuming to much since it's reasonable that one could mix up he ssd types, and there are performance/cost ramifications between the two types. \n\nNot a huge fan of assuming if iops are specified the volume_type should be silently changed to io1 from standard, but it seemed best for maintaining backwards compatibility. \n\nThanks!\niain\n", "B_clean_body": ["thi", "add", "support", "aw", "gener", "purpos", "ssd", "volum", "http", "amazon", "aw", "com", "eb", "detail", "volum", "type", "modul", "paramet", "ad", "which", "default", "standard", "one", "not", "specifi", "standard", "iop", "are", "both", "specifi", "volum", "type", "chang", "io1", "backward", "compat", "as", "oppos", "requir", "user", "now", "specifi", "volum", "type", "play", "gp2", "volum", "type", "specifi", "iop", "valu", "play", "will", "error", "default", "thi", "io1", "as", "well", "seem", "assum", "much", "sinc", "it", "'s", "reason", "that", "one", "could", "mix", "up", "he", "ssd", "type", "there", "are", "perform", "cost", "ramif", "between", "two", "type", "not", "huge", "fan", "assum", "iop", "are", "specifi", "volum", "type", "silent", "chang", "io1", "standard", "but", "it", "seem", "best", "maintain", "backward", "compat", "thank", "iain"], "title_sim": [-0.013718481592662044], "body_sim": [0.5324997830929288], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 27}, {"A_title": "Fix typo of environment var \"AWS_ACCESS_KEY\"", "A_clean_title": ["fix", "typo", "environ", "var", "aw", "access", "key"], "B_title": "AWS_ACCESS_KEY misspelt in shared EC2 connection library", "B_clean_title": ["aw", "access", "key", "misspelt", "share", "ec2", "connect", "librari"], "A_body": "", "A_clean_body": [], "B_body": "", "B_clean_body": [], "title_sim": [0.5815108616039752], "body_sim": [0.0], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [1.0, 1.0], "location_sim": [1.0, 1.0], "pattern": 0, "time": 0}, {"A_title": "Added support for AWS credentials in ec2.ini", "A_clean_title": ["ad", "support", "aw", "credenti", "ec2", "ini"], "B_title": "Read AWS key and secret from `ec2.ini`", "B_clean_title": ["read", "aw", "key", "secret", "ec2", "ini"], "A_body": "Adds support for specifiying AWS credentials in ec2.ini that is used by the ec2.py dynamic inventory.\n", "A_clean_body": ["add", "support", "specifiy", "aw", "credenti", "ec2", "ini", "that", "use", "by", "ec2", "py", "dynam", "inventori"], "B_body": "If you have multiple projects which use AWS, it's not convenient to use global- or user-wide boto configs. You could use environment variables, but since we have ec2.ini right there, it seems like an easy place to have your project's AWS credentials.\n\nI had to resubmit this PR, previously it was https://github.com/ansible/ansible/pull/9360\n", "B_clean_body": ["you", "have", "multipl", "project", "which", "use", "aw", "it", "'s", "not", "conveni", "use", "global", "or", "user", "wide", "boto", "config", "you", "could", "use", "environ", "variabl", "but", "sinc", "we", "have", "ec2", "ini", "right", "there", "it", "seem", "like", "easi", "place", "have", "your", "project", "'s", "aw", "credenti", "had", "resubmit", "thi", "pr", "previous", "it", "wa", "http", "github", "com", "ansibl", "ansibl", "pull", "9360"], "title_sim": [0.7384113596000228], "body_sim": [0.4154068554621605], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.6420500383945086, 0.6071890539211273], "location_sim": [0.38461538461538464, 0.425531914893617], "pattern": 0, "time": 8}, {"A_title": "Don't overwrite param variables if already set.", "A_clean_title": ["n't", "overwrit", "param", "variabl", "alreadi", "set"], "B_title": "Optimistically detect if params are coming from get_aws_connection_in\u2026", "B_clean_title": ["optimist", "detect", "param", "are", "come", "get", "aw", "connect", "in\u2026"], "A_body": "Since get_aws_connection_info() correctly sets config parameters\nboto_params['aws_session_token'] and boto_params['verify'] when\nboto3 is detected we must detect whether these have already\nbeen set in boto3_conn() before overwriting them from old-style\nboto (not boto3) parameters ('security_token' and 'validate_certs'\nrespectively).\n", "A_clean_body": ["sinc", "get", "aw", "connect", "info", "correctli", "set", "config", "paramet", "boto", "param", "'aw", "session", "token", "boto", "param", "'verifi", "when", "boto3", "detect", "we", "must", "detect", "whether", "these", "have", "alreadi", "been", "set", "boto3", "conn", "befor", "overwrit", "them", "old", "style", "boto", "not", "boto3", "paramet", "'secur", "token", "'valid", "certs'", "respect"], "B_body": "\u2026fo()\nAs discussed in dev mailing lists (https://groups.google.com/forum/#!topic/ansible-devel/cAJTW3V4dSk) current version of boto3_conn seems to overrides **params from get_aws_connection_info() which is already boto3 friendly.\nHere's a very simple patch to workaround the problem. I deliberately avoid to make the assumption that get_aws_connection_info() is systematically used.\n\nThanks\n", "B_clean_body": ["\u2026fo", "as", "discuss", "dev", "mail", "list", "http", "googl", "group", "com", "forum", "topic", "ansibl", "devel", "cajtw3v4dsk", "ajtw3v4d", "sk", "current", "version", "boto3", "conn", "seem", "overrid", "**param", "get", "aw", "connect", "info", "which", "alreadi", "boto3", "friendli", "here", "'s", "veri", "simpl", "patch", "workaround", "problem", "deliber", "avoid", "make", "assumpt", "that", "get", "aw", "connect", "info", "systemat", "use", "thank"], "title_sim": [0.28391369794611154], "body_sim": [0.3656810643916598], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.8436515753576392, 0.8436515753576392], "location_sim": [1.0, 1.0], "pattern": 0, "time": 74}, {"A_title": "Correct documentation reference to SSH section.", "A_clean_title": ["correct", "document", "refer", "ssh", "section"], "B_title": "Change ssh header to ssh_connection header", "B_clean_title": ["chang", "ssh", "header", "ssh", "connect", "header"], "A_body": "The reference in the documentation indicates the section title is [ssh], however this doesn't work when set in the configuration file.  In lib/ansible/contants.py the section is referenced as [ssh_connection], therefore update documentation to match config.\n", "A_clean_body": ["refer", "document", "indic", "section", "titl", "ssh", "howev", "thi", "n't", "work", "when", "set", "configur", "file", "py", "lib", "ansibl", "contant", "section", "referenc", "as", "ssh", "connect", "therefor", "updat", "document", "match", "config"], "B_body": "Pretty self explanatory. Just a minor typo in the OpenSSH section of the ansible.cfg documentation.\n", "B_clean_body": ["pretti", "self", "explanatori", "just", "minor", "typo", "openssh", "open", "ssh", "section", "ansibl", "cfg", "document"], "title_sim": [0.26300176345086007], "body_sim": [0.5222693140994417], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [1.0, 1.0], "pattern": 0, "time": 1}, {"A_title": "Add a module to [un]install postgresql extensions", "A_clean_title": ["add", "modul", "un", "instal", "postgresql", "extens"], "B_title": "Add module for adding/deleting extensions in Postgres databases", "B_clean_title": ["add", "modul", "ad", "delet", "extens", "postgr", "databas"], "A_body": "Based off of the postgresql_db module.\n", "A_clean_body": ["base", "off", "postgresql", "db", "modul"], "B_body": "Just a simple module to install and uninstall Postgres extensions. Based off the other Postgres modules.\n\nIf any changes need to be made, please do let me know!\n", "B_clean_body": ["just", "simpl", "modul", "instal", "uninstal", "postgr", "extens", "base", "off", "other", "postgr", "modul", "ani", "chang", "need", "made", "pleas", "let", "me", "know"], "title_sim": [0.5729781221600829], "body_sim": [0.42844187012561735], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [1.0, 1.0], "pattern": 0, "time": 75}, {"A_title": "Add exact_count and count_tag to the ec2 module.", "A_clean_title": ["add", "exact", "count", "count", "tag", "ec2", "modul"], "B_title": "[module/ec2] Use tags for idempotence.", "B_clean_title": ["modul", "ec2", "use", "tag", "idempot"], "A_body": "Adds the exact_count and count_tag parameters to the ec2 module. \n\nTags can be a dictionary, a list or a string. If only tag names are given, only their presence is evaluated. If values are given, values will also be matched.\n\nExamples:\n\n```\n        count_tag: '{\"db\":\"postgres\"}'\n```\n\n```\n        count_tag:\n            Name: idempotent-instance\n            foo: barbazbang\n            empty:\n```\n\n```\n        count_tag: foo\n```\n\n```\n        count_tag:\n            foo:\n```\n", "A_clean_body": ["add", "exact", "count", "count", "tag", "paramet", "ec2", "modul", "tag", "dictionari", "list", "or", "string", "onli", "tag", "name", "are", "given", "onli", "their", "presenc", "evalu", "valu", "are", "given", "valu", "will", "also", "match", "exampl", "count", "tag", "db", "postgr", "count", "tag", "name", "idempot", "instanc", "foo", "barbazbang", "empti", "count", "tag", "foo", "count", "tag", "foo"], "B_body": "Use tags to achieve idempotence for ec2 instances.\n\nThis is a better way to do achieve idempotence for ec2 instances. Using \"client-token\" is a hack, since terminating an instance with a given ID will prevent us from starting a new one with the same ID.\n\nI think that if this pull request is accepted, the code using client-token i.e. the \"id\" params should be removed.\n", "B_clean_body": ["use", "tag", "achiev", "idempot", "ec2", "instanc", "thi", "better", "way", "achiev", "idempot", "ec2", "instanc", "client", "token", "hack", "sinc", "termin", "instanc", "given", "id", "will", "prevent", "us", "start", "new", "one", "same", "id", "think", "that", "thi", "pull", "request", "accept", "code", "client", "token", "id", "param", "remov"], "title_sim": [0.5426109651589444], "body_sim": [0.2612134026289748], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.5922330097087378, 0.5922330097087378], "pattern": 0, "time": 154}, {"A_title": "vault and variables best practices info added, edited, and referenced", "A_clean_title": ["vault", "variabl", "best", "practic", "info", "ad", "edit", "referenc"], "B_title": "add vault inventory value encryption example", "B_clean_title": ["add", "vault", "inventori", "valu", "encrypt", "exampl"], "A_body": "This work fulfills PR #11799. Moved the content out of the vault file,\ninto best practices, edited it, then referenced it from variables and\nvaults content files.\n", "A_clean_body": ["thi", "work", "fulfil", "pr", "11799", "move", "content", "out", "vault", "file", "into", "best", "practic", "edit", "it", "then", "referenc", "it", "variabl", "vault", "content", "file"], "B_body": "", "B_clean_body": [], "title_sim": [0.3369705111916901], "body_sim": [0.0], "file_list_sim": 0.3333333333333333, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 374}, {"A_title": "Add Consul node, agent and session policies from version 0.8.0", "A_clean_title": ["add", "consul", "node", "agent", "session", "polici", "version"], "B_title": "consul_acl: added in support for 'agent' and 'node' types.", "B_clean_title": ["consul", "acl", "ad", "support", "'agent", "'node", "type"], "A_body": "##### SUMMARY\r\nAdd support for the new ACL types agent, node and session which Consul introduced in 0.8.0 https://www.consul.io/docs/guides/acl.html#complete-acl-coverage-in-consul-0-8.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nconsul_acl\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.3.0.0 (stable-2.3 b6f3b27eaa) last updated 2017/04/25 20:35:07 (GMT +100)\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.12 (default, Nov 19 2016, 06:48:10) [GCC 5.4.0 20160609]\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nThey have the same structure as existing policies that this module already implements https://github.com/hashicorp/consul/blob/master/acl/policy.go.\r\n\r\n```\r\n- consul_acl:\r\n    rules:\r\n      - agent: 'foo'\r\n        policy: read\r\n      - node: 'foo'\r\n        policy: read\r\n      - session: 'foo'\r\n        policy: read\r\n```", "A_clean_body": ["summari", "add", "support", "new", "acl", "type", "agent", "node", "session", "which", "consul", "introduc", "http", "consul", "html", "www", "io", "doc", "guid", "acl", "complet", "acl", "coverag", "consul", "issu", "type", "featur", "pull", "request", "compon", "name", "consul", "acl", "ansibl", "version", "ansibl", "stabl", "b6f3b27eaa", "last", "updat", "2017", "04", "25", "20:35:07", "gmt", "+100", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "python", "version", "12", "default", "nov", "19", "2016", "06:48:10", "gcc", "20160609", "addit", "inform", "they", "have", "same", "structur", "as", "exist", "polici", "that", "thi", "modul", "alreadi", "implement", "http", "go", "github", "com", "hashicorp", "consul", "blob", "master", "acl", "polici", "consul", "acl", "rule", "agent", "'foo'", "polici", "read", "node", "'foo'", "polici", "read", "session", "'foo'", "polici", "read"], "B_body": "##### SUMMARY\r\nAdding in support for consul_acl module to allow for the 'agent' and 'node' types\r\nhttps://www.consul.io/docs/guides/acl.html#acl-rules-and-scope\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nconsul_acl\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.2.1.0\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\nbefore:\r\n```\r\nfailed: [localhost] (item={u'rules': [{u'policy': u'read', u'agent': u''}], u'token': u'XXXXXXX', u'name': u'consul', u'mgmt_token': u'XXXXXX'}) => {\r\n    \"failed\": true,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"host\": \"consul\",\r\n            \"mgmt_token\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"name\": \"consul\",\r\n            \"port\": 8500,\r\n            \"rules\": [\r\n                {\r\n                    \"agent\": \"\",\r\n                    \"policy\": \"read\"\r\n                }\r\n            ],\r\n            \"scheme\": \"http\",\r\n            \"state\": \"present\",\r\n            \"token\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"token_type\": \"client\",\r\n            \"validate_certs\": true\r\n        },\r\n        \"module_name\": \"consul_acl\"\r\n    },\r\n    \"item\": {\r\n        \"mgmt_token\": \"XXXXXXX\",\r\n        \"name\": \"consul\",\r\n        \"rules\": [\r\n            {\r\n                \"agent\": \"\",\r\n                \"policy\": \"read\"\r\n            }\r\n        ],\r\n        \"token\": \"XXXXXXXXXX\"\r\n    },\r\n    \"msg\": \"a rule requires a key/service/event or query and a policy.\"\r\n}\r\n```\r\nafter:\r\n```\r\nchanged: [localhost] => (item={u'rules': [{u'policy': u'read', u'agent': u''}, {u'node': u'', u'policy': u'read'}], u'token': u'XXXXXXX', u'name': u'consul', u'mgmt_token': u'XXXXXXXX'}) => {\r\n    \"changed\": true,\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"host\": \"consul\",\r\n            \"mgmt_token\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"name\": \"consul\",\r\n            \"port\": 8500,\r\n            \"rules\": [\r\n                {\r\n                    \"agent\": \"\",\r\n                    \"policy\": \"read\"\r\n                },\r\n                {\r\n                    \"node\": \"\",\r\n                    \"policy\": \"read\"\r\n                }\r\n            ],\r\n            \"scheme\": \"http\",\r\n            \"state\": \"present\",\r\n            \"token\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"token_type\": \"client\",\r\n            \"validate_certs\": true\r\n        },\r\n        \"module_name\": \"consul_acl\"\r\n    },\r\n    \"item\": {\r\n        \"mgmt_token\": \"XXXXXXXXX\",\r\n        \"name\": \"consul\",\r\n        \"rules\": [\r\n            {\r\n                \"agent\": \"\",\r\n                \"policy\": \"read\"\r\n            },\r\n            {\r\n                \"node\": \"\",\r\n                \"policy\": \"read\"\r\n            }\r\n        ],\r\n        \"token\": \"XXXXXXXXX\"\r\n    },\r\n    \"name\": \"consul\",\r\n    \"rules\": [\r\n        {\r\n            \"agent\": \"\",\r\n            \"policy\": \"read\"\r\n        },\r\n        {\r\n            \"node\": \"\",\r\n            \"policy\": \"read\"\r\n        }\r\n    ],\r\n    \"token\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n    \"type\": \"client\"\r\n}\r\n```", "B_clean_body": ["summari", "ad", "support", "consul", "acl", "modul", "allow", "'agent", "'node", "type", "http", "consul", "html", "www", "io", "doc", "guid", "acl", "acl", "rule", "scope", "issu", "type", "featur", "pull", "request", "compon", "name", "consul", "acl", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "addit", "inform", "includ", "addit", "inform", "help", "peopl", "understand", "chang", "here", "bug", "that", "n't", "have", "link", "bug", "report", "step", "by", "step", "reproduct", "problem", "help", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang", "befor", "fail", "localhost", "item=", "u'rul", "u'polici", "u'read", "u'ag", "u'token", "u'xxxxxxx", "u'nam", "u'consul", "u'mgmt", "token", "u'xxxxxx", "fail", "true", "invoc", "modul", "arg", "host", "consul", "mgmt", "token", "valu", "specifi", "no", "log", "paramet", "name", "consul", "port", "8500", "rule", "agent", "polici", "read", "scheme", "http", "state", "present", "token", "valu", "specifi", "no", "log", "paramet", "token", "type", "client", "valid", "cert", "true", "modul", "name", "consul", "acl", "item", "mgmt", "token", "xxxxxxx", "name", "consul", "rule", "agent", "polici", "read", "token", "xxxxxxxxxx", "msg", "rule", "requir", "key", "servic", "event", "or", "queri", "polici", "after", "chang", "localhost", "item=", "u'rul", "u'polici", "u'read", "u'ag", "u'nod", "u'polici", "u'read", "u'token", "u'xxxxxxx", "u'nam", "u'consul", "u'mgmt", "token", "u'xxxxxxxx", "chang", "true", "invoc", "modul", "arg", "host", "consul", "mgmt", "token", "valu", "specifi", "no", "log", "paramet", "name", "consul", "port", "8500", "rule", "agent", "polici", "read", "node", "polici", "read", "scheme", "http", "state", "present", "token", "valu", "specifi", "no", "log", "paramet", "token", "type", "client", "valid", "cert", "true", "modul", "name", "consul", "acl", "item", "mgmt", "token", "xxxxxxxxx", "name", "consul", "rule", "agent", "polici", "read", "node", "polici", "read", "token", "xxxxxxxxx", "name", "consul", "rule", "agent", "polici", "read", "node", "polici", "read", "token", "valu", "specifi", "no", "log", "paramet", "type", "client"], "title_sim": [-0.03179312598074837], "body_sim": [0.46771149305663595], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.989537107879738, 0.989537107879738], "location_sim": [0.8571428571428571, 0.8571428571428571], "pattern": -1, "time": 17}, {"A_title": "Switched primary and alias names of the name/db parameter. Fixes #8065.", "A_clean_title": ["switch", "primari", "alia", "name", "name", "db", "paramet", "fix", "8065"], "B_title": "To fix error message produced in bug report 8065", "B_clean_title": ["fix", "error", "messag", "produc", "bug", "report", "8065"], "A_body": "In the documentation, the name of the mysql database to create is called \"name,\" with an alias of \"db.\" However, in the code, \"db\" is the primary name and \"name\" is the alias. This causes a confusing error message. This patch updates the code to match the documentation.\n", "A_clean_body": ["document", "name", "mysql", "databas", "creat", "call", "name", "alia", "db", "howev", "code", "db", "primari", "name", "name", "alia", "thi", "caus", "confus", "error", "messag", "thi", "patch", "updat", "code", "match", "document"], "B_body": "", "B_clean_body": [], "title_sim": [0.013592574836548106], "body_sim": [0.0], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.6666666666666666, 0.6666666666666666], "pattern": 1, "time": 2}, {"A_title": "Adds support for Cloudwatch detailled monitoring in ec2_lc module.", "A_clean_title": ["add", "support", "cloudwatch", "detail", "monitor", "ec2", "lc", "modul"], "B_title": "Ec2_lc instance_monitoring option", "B_clean_title": ["ec2", "lc", "instanc", "monitor", "option"], "A_body": "Enabling detailled monitoring in the launch config is mandatory to be able to activate cloudwatch in the to be created autoscaling group.\n", "A_clean_body": ["enabl", "detail", "monitor", "launch", "config", "mandatori", "abl", "activ", "cloudwatch", "creat", "autosc", "group"], "B_body": "We are migrating to Ansible for all our AWS tool management. One of the things we need for creating Launch Configurations is the ability to enable detailed monitoring.\n\nI have checked similar functions and pull requests and hope that this is acceptable.\n\nI would also be happy if a core maintainer were to add the feature in a better way.\n\nThanks\n", "B_clean_body": ["we", "are", "migrat", "ansibl", "all", "our", "aw", "tool", "manag", "one", "thing", "we", "need", "creat", "launch", "configur", "abil", "enabl", "detail", "monitor", "have", "check", "similar", "function", "pull", "request", "hope", "that", "thi", "accept", "would", "also", "happi", "core", "maintain", "were", "add", "featur", "better", "way", "thank"], "title_sim": [0.6867837196990582], "body_sim": [0.2540623135749211], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.7534246575342466, 0.7534246575342466], "pattern": 0, "time": 30}, {"A_title": "win_service: support for Automatic (Delayed Start)", "A_clean_title": ["win", "servic", "support", "automat", "delay", "start"], "B_title": "Win service rewrite", "B_clean_title": ["win", "servic", "rewrit"], "A_body": "Add a new delayed parameter which is needed to mark the service with\r\nDelayed Start.\r\n\r\nAlso requested by #16759.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nwin_service\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.0.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\nSupport for Automatic (Delayed Start) services on Windows.\r\n", "A_clean_body": ["add", "new", "delay", "paramet", "which", "need", "mark", "servic", "delay", "start", "also", "request", "by", "16759", "issu", "type", "featur", "pull", "request", "compon", "name", "win", "servic", "ansibl", "version", "ansibl", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "summari", "support", "automat", "delay", "start", "servic", "window"], "B_body": "##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nwin_service\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.0.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\nRewrite the win_service module to support the below features\r\n* Allow it to return existance info instead of just failing outright\r\n* Return a lot more info on the service such as username, dependencies, description, etc\r\n* Allow setting of the service username and password\r\n* Allow setting of dependencies\r\n* Allow creation/removal of services\r\n* Allow setting description, display name and path to executable of service\r\n", "B_clean_body": ["issu", "type", "featur", "pull", "request", "compon", "name", "win", "servic", "ansibl", "version", "ansibl", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "summari", "rewrit", "win", "servic", "modul", "support", "below", "featur", "allow", "it", "return", "exist", "info", "instead", "just", "fail", "outright", "return", "lot", "more", "info", "servic", "such", "as", "usernam", "depend", "descript", "etc", "allow", "set", "servic", "usernam", "password", "allow", "set", "depend", "allow", "creation", "remov", "servic", "allow", "set", "descript", "display", "name", "path", "execut", "servic"], "title_sim": [0.5708523674487419], "body_sim": [0.6104937095410212], "file_list_sim": 0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 1, "time": 31}, {"A_title": "Support specifying an md5sum for get_url", "A_clean_title": ["support", "specifi", "md5sum", "get", "url"], "B_title": "get_url: Allow additional hashing algorithms", "B_clean_title": ["get", "url", "allow", "addit", "hash", "algorithm"], "A_body": "Add sunny day integration test for md5sum check\nAdd sunny day integration test for sha256sum check\n", "A_clean_body": ["add", "sunni", "day", "integr", "test", "md5sum", "check", "add", "sunni", "day", "integr", "test", "sha256sum", "check"], "B_body": "Allow all hashing algorithms that hashlib provides (e.g. 'md5', 'sha1', 'sha224', 'sha256', 'sha384', 'sha512'). Introduces a new parameter \"checksum\" with format: `<algorithm>:<checksum>`, e.g. `checksum=\"md5:66dffb5228a211e61d6d7ef4a86f5758\"`\nDeprecates parameter `sha256sum`. Uses hashlib directly instead of methods in module_utils/basic.py.\n\nAlso gives helpful error messages:\n`msg: Could not hash with algorithm 'md6'. Available algorithms: ('md5', 'sha1', 'sha224', 'sha256', 'sha384', 'sha512')`\n`msg: The checksum parameter has to be in format <algorithm>:<checksum>`\n\nSee also #6304\n", "B_clean_body": ["allow", "all", "hash", "algorithm", "that", "hashlib", "provid", "'md5", "'sha1", "'sha224", "'sha256", "'sha384", "'sha512", "introduc", "new", "paramet", "checksum", "format", "algorithm", "checksum", "checksum=", "md5:66dffb5228a211e61d6d7ef4a86f5758", "deprec", "paramet", "sha256sum", "use", "hashlib", "directli", "instead", "method", "py", "modul", "util", "basic", "also", "give", "help", "error", "messag", "msg", "could", "not", "hash", "algorithm", "'md6", "avail", "algorithm", "'md5", "'sha1", "'sha224", "'sha256", "'sha384", "'sha512", "msg", "checksum", "paramet", "ha", "format", "algorithm", "checksum", "see", "also", "6304"], "title_sim": [0.3956908142516405], "body_sim": [0.0017838180556587623], "file_list_sim": 0.5, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.625, 0.6666666666666666], "pattern": 1, "time": 106}, {"A_title": "ec2_elb_facts: Handle AWS throttling when requesting ELB information", "A_clean_title": ["ec2", "elb", "fact", "handl", "aw", "throttl", "when", "request", "elb", "inform"], "B_title": "ec2_elb_facts - Fixes #21553 empty health_check path error", "B_clean_title": ["ec2", "elb", "fact", "fix", "21553", "empti", "health", "check", "path", "error"], "A_body": "##### SUMMARY\r\nFixes issue where module would fail immediately upon encountering AWS API throttling.\r\nAlso makes minor changes to error handling.\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nec2_elb_facts.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.1.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nUses the `AWSRetry.backoff` method both as a decorator and, where more efficient, directly as a wrapper function to  handle AWS API throttling for boto methods invoked in the module. \r\n\r\nVarious instances of `BotoServerError` exceptions being caught and handled simply by invoking the  `fail_json` method have been removed, and replaced with a similar try/catch block in the `main` function. I'm not sure that this exception handling was particularly useful in the first place (and I'd be open to removing it completely), but moving it into `main` at least provides pretty much equivalent behavior without interfering with use of the `AWSRetry` decorator, which can handle specific cases of `BotoServerError`.\r\n\r\nAlso, removes questionable 'catch-all' clause on line 111 which would return an empty dict for tags. ", "A_clean_body": ["summari", "fix", "issu", "where", "modul", "would", "fail", "immedi", "upon", "encount", "aw", "api", "throttl", "also", "make", "minor", "chang", "error", "handl", "issu", "type", "bugfix", "pull", "request", "compon", "name", "py", "ec2", "elb", "fact", "ansibl", "version", "ansibl", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "addit", "inform", "use", "awsretri", "backoff", "aw", "retri", "method", "both", "as", "decor", "where", "more", "effici", "directli", "as", "wrapper", "function", "handl", "aw", "api", "throttl", "boto", "method", "invok", "modul", "variou", "instanc", "botoservererror", "boto", "server", "error", "except", "be", "caught", "handl", "simpli", "by", "invok", "fail", "json", "method", "have", "been", "remov", "replac", "similar", "tri", "catch", "block", "main", "function", "'m", "not", "sure", "that", "thi", "except", "handl", "wa", "particularli", "use", "first", "place", "'d", "open", "remov", "it", "complet", "but", "move", "it", "into", "main", "at", "least", "provid", "pretti", "much", "equival", "behavior", "without", "interf", "use", "awsretri", "aw", "retri", "decor", "which", "handl", "specif", "case", "botoservererror", "boto", "server", "error", "also", "remov", "question", "'catch", "all", "claus", "line", "111", "which", "would", "return", "empti", "dict", "tag"], "B_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nec2_elb_facts\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.2.1.0 (stable-2.2 c92ce0c2ca) last updated 2017/02/16 13:25:38 (GMT +1000)\r\n  lib/ansible/modules/core: (detached HEAD 72194a29dc) last updated 2017/02/16 13:26:51 (GMT +1000)\r\n  lib/ansible/modules/extras: (detached HEAD 994349b647) last updated 2017/02/16 13:27:50 (GMT +1000)\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nThis change was made after troubleshooting errors for ELBs that have a Health Check path that is just a slash - i.e. HTTP:2000/\r\n\r\nIn these cases the port_path.split('/', 1) will leave 'path' as an empty var and an error is thrown when it then tries to format this empty string. In dealing with this error, the whole port_path var is then asserted as an INT and set as the 'port' value. This obviously throws a module failure as the port value still has a slash in it - i.e. '2000/'\r\n\r\nTo get around this I've added a check that will set 'path' as a slash if the path var appears empty, therefore the format will still work and the error isn't thrown which would result in an incorrect INT assertion.\r\n\r\n<!-- Paste verbatim command output below, e.g. before and after your change -->\r\n**Before:**\r\n```\r\nAn exception occurred during task execution. To see the full traceback, use -vvv. The error was: ValueError: invalid literal for int() wit\r\nfatal: [127.0.0.1]: FAILED! => {\"attempts\": 1, \"changed\": false, \"failed\": true, \"module_stderr\": \"Traceback (most recent call last):\\n  Flb_facts_adam.py\\\", line 256, in <module>\\n    main()\\n  File \\\"/tmp/ansible_axwNhr/ansible_module_ec2_elb_facts_adam.py\\\", line 248, in mFile \\\"/tmp/ansible_axwNhr/ansible_module_ec2_elb_facts_adam.py\\\", line 222, in list_elbs\\n    return list(map(self._get_elb_info, elb_arrule_ec2_elb_facts_adam.py\\\", line 170, in _get_elb_info\\n    'health_check': self._get_health_check(elb.health_check),\\n  File \\\"/tmp/ansiy\\\", line 146, in _get_health_check\\n    'ping_port': int(port),\\nValueError: invalid literal for int() with base 10: '80/'\\n\", \"module_st\r\n```\r\n\r\n**After:**\r\n```\r\nok: [127.0.0.1] => {\"attempts\": 1, \"changed\": false, \"elbs\": [{\"canonical_hosted_zone_name\": null, \"canonical_hosted_zone_name_id\": \"Z1GM3OXH4ZPM65\", \"dns_name\": \"internal-adam-test-bug-787573477.ap-southeast-2.elb.amazonaws.com\", \"health_check\": {\"healthy_threshold\": 10, \"interval\": 30, \"ping_path\": \"/\", \"ping_port\": 80, \"ping_protocol\": \"http\", \"response_timeout\": 5, \"unhealthy_threshold\": 2}, \"hosted_zone_id\": \"Z1GM3OXH4ZPM65\", \"hosted_zone_name\": null, \"instances\": [\"i-cfe2be60\", \"i-e5d4804a\"], \"instances_inservice\": [], \"instances_inservice_count\": 0, \"instances_inservice_percent\": 0.0, \"instances_outofservice\": [\"i-cfe2be60\", \"i-e5d4804a\"], \"instances_outofservice_count\": 2, \"listeners\": [{\"instance_port\": 80, \"load_balancer_port\": 80, \"protocol\": \"HTTP\"}], \"name\": \"adam-test-bug\", \"scheme\": \"internal\", \"security_groups\": [\"sg-e7fe8982\"], \"subnets\": [\"subnet-a78f24d0\", \"subnet-b9189adc\"], \"tags\": {}, \"vpc_id\": \"vpc-8952ffec\", \"zones\": [\"ap-southeast-2b\", \"ap-southeast-2a\"]}]}\r\n```", "B_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "ec2", "elb", "fact", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "stabl", "c92ce0c2ca", "last", "updat", "2017", "02", "16", "13:25:38", "gmt", "+1000", "lib", "ansibl", "modul", "core", "detach", "head", "72194a29dc", "last", "updat", "2017", "02", "16", "13:26:51", "gmt", "+1000", "lib", "ansibl", "modul", "extra", "detach", "head", "994349b647", "last", "updat", "2017", "02", "16", "13:27:50", "gmt", "+1000", "summari", "describ", "chang", "includ", "rational", "design", "decis", "thi", "chang", "wa", "made", "after", "troubleshoot", "error", "elb", "el", "bs", "that", "have", "health", "check", "path", "that", "just", "slash", "http:2000", "these", "case", "split", "port", "path", "will", "leav", "'path", "as", "empti", "var", "error", "thrown", "when", "it", "then", "tri", "format", "thi", "empti", "string", "deal", "thi", "error", "whole", "port", "path", "var", "then", "assert", "as", "int", "set", "as", "'port", "valu", "thi", "obvious", "throw", "modul", "failur", "as", "port", "valu", "still", "ha", "slash", "it", "'2000", "get", "around", "thi", "'ve", "ad", "check", "that", "will", "set", "'path", "as", "slash", "path", "var", "appear", "empti", "therefor", "format", "will", "still", "work", "error", "n't", "thrown", "which", "would", "result", "incorrect", "int", "assert", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang", "**befor", "except", "occur", "dure", "task", "execut", "see", "full", "traceback", "use", "vvv", "error", "wa", "valueerror", "valu", "error", "invalid", "liter", "int", "wit", "fatal", "127", "fail", "attempt", "chang", "fals", "fail", "true", "modul", "stderr", "traceback", "most", "recent", "call", "last", "flb", "fact", "adam", "py", "line", "256", "modul", "main", "file", "modul", "ec2", "elb", "fact", "adam", "py", "tmp", "ansibl", "axwnhr", "ansibl", "axw", "nhr", "line", "248", "mfile", "file", "modul", "ec2", "elb", "fact", "adam", "py", "tmp", "ansibl", "axwnhr", "ansibl", "axw", "nhr", "line", "222", "list", "elb", "return", "list", "map", "self", "get", "elb", "info", "elb", "arrul", "ec2", "elb", "fact", "adam", "py", "line", "170", "get", "elb", "info", "'health", "check", "self", "get", "health", "check", "elb", "health", "check", "file", "tmp", "ansiy", "line", "146", "get", "health", "check", "'ping", "port", "int", "port", "nvalueerror", "valu", "error", "invalid", "liter", "int", "base", "10", "'80", "modul", "st", "**after", "ok", "127", "attempt", "chang", "fals", "elb", "canon", "host", "zone", "name", "null", "canon", "host", "zone", "name", "id", "z1gm3oxh4zpm65", "dn", "name", "intern", "adam", "test", "bug", "southeast", "787573477", "ap", "elb", "amazonaw", "com", "health", "check", "healthi", "threshold", "10", "interv", "30", "ping", "path", "ping", "port", "80", "ping", "protocol", "http", "respons", "timeout", "unhealthi", "threshold", "host", "zone", "id", "z1gm3oxh4zpm65", "host", "zone", "name", "null", "instanc", "cfe2be60", "e5d4804a", "instanc", "inservic", "instanc", "inservic", "count", "instanc", "inservic", "percent", "instanc", "outofservic", "cfe2be60", "e5d4804a", "instanc", "outofservic", "count", "listen", "instanc", "port", "80", "load", "balanc", "port", "80", "protocol", "http", "name", "adam", "test", "bug", "scheme", "intern", "secur", "group", "sg", "e7fe8982", "subnet", "subnet", "a78f24d0", "subnet", "b9189adc", "tag", "vpc", "id", "vpc", "8952ffec", "zone", "ap", "southeast", "2b", "ap", "southeast", "2a"], "title_sim": [0.41695642525369864], "body_sim": [0.31226426139513025], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.1588785046728972, 0.1588785046728972], "pattern": 1, "time": 1}, {"A_title": "finer grained failed/skipped on async for actions", "A_clean_title": ["finer", "grain", "fail", "skip", "async", "action"], "B_title": "add missing checks for async and check_mode", "B_clean_title": ["add", "miss", "check", "async", "check", "mode"], "A_body": "##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nBrings back specific behaviour for each condition\r\nfixes #23729\r\n\r\n##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nasync\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\n2.3/2.4\r\n```\r\n\r\n", "A_clean_body": ["summari", "describ", "chang", "includ", "rational", "design", "decis", "bring", "back", "specif", "behaviour", "each", "condit", "fix", "23729", "issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "async", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below"], "B_body": "fixes #23729\r\n\r\nfollowing refactoring of async : c86a17b7a003ac22c173cfa832ed2368e15015e6\r\n\r\nwhen call to ActionBase.run returns a skipped result,\r\nreturn directly in ActionModule.run\r\n\r\nRestore previous behavior when misuse of async in modules not\r\nsupporting async: fail with msg\r\n\r\n\r\n##### SUMMARY\r\nAdd fail in ActionBase.run so previous behavior before refactoring is kept.\r\n\r\nAdd check in every ActionModule.run so it returns if ActionBase.run fails.\r\n\r\nAdd tests.\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.4.0 (issue-23729 a1483ea2d2) last updated 2017/04/19 12:20:00 (GMT +200)\r\n  config file =\r\n  configured module search path = ['/home/fridim/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /home/fridim/sync/dev/ansible/lib/ansible\r\n  executable location = /home/fridim/sync/dev/ansible/bin/ansible\r\n  python version = 3.6.0 (default, Jan 16 2017, 12:12:55) [GCC 6.3.1 20170109]\r\n\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "B_clean_body": ["fix", "23729", "follow", "refactor", "async", "c86a17b7a003ac22c173cfa832ed2368e15015e6", "when", "call", "actionbas", "run", "action", "base", "return", "skip", "result", "return", "directli", "actionmodul", "run", "action", "modul", "restor", "previou", "behavior", "when", "misus", "async", "modul", "not", "support", "async", "fail", "msg", "summari", "add", "fail", "actionbas", "run", "action", "base", "so", "previou", "behavior", "befor", "refactor", "kept", "add", "check", "everi", "actionmodul", "run", "action", "modul", "so", "it", "return", "actionbas", "run", "action", "base", "fail", "add", "test", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "issu", "type", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "issu", "23729", "a1483ea2d2", "last", "updat", "2017", "04", "19", "12:20:00", "gmt", "+200", "config", "file", "configur", "modul", "search", "path", "home", "fridim", "ansibl", "plugin", "modul", "usr", "share", "ansibl", "plugin", "modul", "ansibl", "python", "modul", "locat", "home", "fridim", "sync", "dev", "ansibl", "lib", "ansibl", "execut", "locat", "home", "fridim", "sync", "dev", "ansibl", "bin", "ansibl", "python", "version", "default", "jan", "16", "2017", "12:12:55", "gcc", "20170109", "addit", "inform", "includ", "addit", "inform", "help", "peopl", "understand", "chang", "here", "bug", "that", "n't", "have", "link", "bug", "report", "step", "by", "step", "reproduct", "problem", "help", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang"], "title_sim": [0.27075722108190303], "body_sim": [0.3767394911509364], "file_list_sim": 0.13636363636363635, "overlap_files_len": 6, "code_sim": [0.7990904098305486, 1.0000000000000002], "location_sim": [0.22317596566523606, 1.0], "pattern": 1, "time": 0}, {"A_title": "Download and open file in binary mode for python3", "A_clean_title": ["download", "open", "file", "binari", "mode", "python3"], "B_title": "Write downloaded file as binary", "B_clean_title": ["write", "download", "file", "as", "binari"], "A_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n- unarchive\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.3.0\r\n  config file = /home/paul/.ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nAdjust download of a zip file explicit in bytes for the module `unarchive`.\r\nSo the exception is raised when f.write(data) happens on the first iteration.  Python 3 has opened the file and `write` is waiting for text and not bytes so then when it receives bytes it raises. \r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\nFix for this issue https://github.com/ansible/ansible/issues/21951\r\n<!-- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\nfatal: [127.0.0.1]: FAILED! => {\r\n    \"changed\": false, \r\n    \"failed\": true, \r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"backup\": null, \r\n            \"content\": null, \r\n            \"copy\": false, \r\n            \"creates\": null, \r\n            \"delimiter\": null, \r\n            \"dest\": \"/tmp/\", \r\n            \"directory_mode\": null, \r\n            \"exclude\": [], \r\n            \"extra_opts\": [], \r\n            \"follow\": false, \r\n            \"force\": null, \r\n            \"group\": null, \r\n            \"keep_newer\": false, \r\n            \"list_files\": false, \r\n            \"mode\": null, \r\n            \"original_basename\": \"prometheus-1.5.0.linux-amd64.tar.gz\", \r\n            \"owner\": null, \r\n            \"regexp\": null, \r\n            \"remote_src\": false, \r\n            \"selevel\": null, \r\n            \"serole\": null, \r\n            \"setype\": null, \r\n            \"seuser\": null, \r\n            \"src\": \"https://github.com/prometheus/prometheus/releases/download/v1.5.0/prometheus-1.5.0.linux-amd64.tar.gz\", \r\n            \"unsafe_writes\": null, \r\n            \"validate_certs\": true\r\n        }\r\n    }, \r\n    \"msg\": \"Failure downloading https://github.com/prometheus/prometheus/releases/download/v1.5.0/prometheus-1.5.0.linux-amd64.tar.gz, write() argument must be str, not bytes\"\r\n}\r\n```\r\n\r\n", "A_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "unarch", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "config", "file", "ansibl", "cfg", "home", "paul", "configur", "modul", "search", "path", "default", "overrid", "summari", "describ", "chang", "includ", "rational", "design", "decis", "adjust", "download", "zip", "file", "explicit", "byte", "modul", "unarch", "so", "except", "rais", "when", "write", "data", "happen", "first", "iter", "python", "ha", "open", "file", "write", "wait", "text", "not", "byte", "so", "then", "when", "it", "receiv", "byte", "it", "rais", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "fix", "thi", "issu", "http", "github", "com", "ansibl", "ansibl", "issu", "21951", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang", "fatal", "127", "fail", "chang", "fals", "fail", "true", "invoc", "modul", "arg", "backup", "null", "content", "null", "copi", "fals", "creat", "null", "delimit", "null", "dest", "tmp", "directori", "mode", "null", "exclud", "extra", "opt", "follow", "fals", "forc", "null", "group", "null", "keep", "newer", "fals", "list", "file", "fals", "mode", "null", "origin", "basenam", "prometheu", "linux", "amd64", "tar", "gz", "owner", "null", "regexp", "null", "remot", "src", "fals", "selevel", "null", "serol", "null", "setyp", "null", "seuser", "null", "src", "http", "linux", "amd64", "tar", "gz", "github", "com", "prometheu", "prometheu", "releas", "download", "v1", "prometheu", "unsaf", "write", "null", "valid", "cert", "true", "msg", "failur", "download", "http", "linux", "amd64", "tar", "gz", "github", "com", "prometheu", "prometheu", "releas", "download", "v1", "prometheu", "write", "argument", "must", "str", "not", "byte"], "B_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nunarchive\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.3.0 (devel 01ac1bc6e5) last updated 2017/02/25 17:18:32 (GMT +200)\r\n  config file = /home/thom/git/dotfiles-ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nThis fixes #21951 by having the write() expect bytes on Py3.\r\n\r\nI haven't dealt with all the other code smells (unused imports, variables, other stuff).", "B_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "unarch", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "devel", "01ac1bc6e5", "last", "updat", "2017", "02", "25", "17:18:32", "gmt", "+200", "config", "file", "home", "thom", "git", "dotfil", "cfg", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "summari", "describ", "chang", "includ", "rational", "design", "decis", "thi", "fix", "21951", "by", "have", "write", "expect", "byte", "py3", "have", "n't", "dealt", "all", "other", "code", "smell", "unus", "import", "variabl", "other", "stuff"], "title_sim": [0.6431755625297988], "body_sim": [0.2730169590625521], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.6121208089870627, 0.6121208089870627], "location_sim": [1.0, 1.0], "pattern": 1, "time": 9}, {"A_title": "Async module: Update module args for the target module", "A_clean_title": ["async", "modul", "updat", "modul", "arg", "target", "modul"], "B_title": "Async fixes", "B_clean_title": ["async", "fix"], "A_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nAsync\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.2.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nWhen any ansible task is run with async module on a machine where\r\nSELinux is enabled, the module arg _ansible_selinux_special_fs is\r\nnot set; resulting into an error like:\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n<!-- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n(ab) ~/h/ansible \u276f\u276f\u276f getenforce\r\nEnforcing\r\n(ab) ~/h/ansible \u276f\u276f\u276f ansible localhost -m file -B 4 -a 'path=/tmp/junk state=directory'\r\n [WARNING]: provided hosts list is empty, only localhost is available\r\n\r\nlocalhost | FAILED! => {\r\n    \"ansible_job_id\": \"739794416549.30537\",\r\n    \"changed\": false,\r\n    \"failed\": true,\r\n    \"finished\": 1,\r\n    \"gid\": 1000,\r\n    \"group\": \"wani\",\r\n    \"mode\": \"0755\",\r\n    \"msg\": \"There was an issue creating /tmp/junk as requested: 'AnsibleModule' object has no attribute '_selinux_special_fs'\",\r\n    \"owner\": \"wani\",\r\n    \"path\": \"/tmp/junk\",\r\n    \"secontext\": \"unconfined_u:object_r:user_tmp_t:s0\",\r\n    \"size\": 40,\r\n    \"state\": \"directory\",\r\n    \"uid\": 1000\r\n}\r\n```\r\nThis patch ensures that the common module args are updated for the\r\ntarget module, before it is configured and transferred.\r\n\r\nFixes https://github.com/ansible/ansible-modules-core/issues/5864", "A_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "async", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "summari", "describ", "chang", "includ", "rational", "design", "decis", "when", "ani", "ansibl", "task", "run", "async", "modul", "machin", "where", "selinux", "se", "linux", "enabl", "modul", "arg", "ansibl", "selinux", "special", "fs", "not", "set", "result", "into", "error", "like", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang", "ab", "ansibl", "getenforc", "enforc", "ab", "ansibl", "ansibl", "localhost", "file", "'path=", "tmp", "junk", "state=directory'", "warn", "provid", "host", "list", "empti", "onli", "localhost", "avail", "localhost", "fail", "ansibl", "job", "id", "739794416549", "30537", "chang", "fals", "fail", "true", "finish", "gid", "1000", "group", "wani", "mode", "0755", "msg", "there", "wa", "issu", "creat", "tmp", "junk", "as", "request", "'ansiblemodul", "'ansibl", "modul", "object", "ha", "no", "attribut", "selinux", "special", "fs", "owner", "wani", "path", "tmp", "junk", "secontext", "unconfin", "object", "user", "tmp", "s0", "size", "40", "state", "directori", "uid", "1000", "thi", "patch", "ensur", "that", "common", "modul", "arg", "are", "updat", "target", "modul", "befor", "it", "configur", "transfer", "fix", "http", "modul", "core", "issu", "5864", "github", "com", "ansibl", "ansibl"], "B_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Bugfix Pull Request\r\n\r\n\r\n##### COMPONENT NAME\r\n<!--- Name of the module/plugin/module/task -->\r\nasync\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\n2.3\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n\r\nalso fixes #20869 by making poll default to 10s again", "B_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "name", "modul", "plugin", "modul", "task", "async", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "summari", "describ", "chang", "includ", "rational", "design", "decis", "also", "fix", "20869", "by", "make", "poll", "default", "10", "again"], "title_sim": [0.5684225377430632], "body_sim": [0.4656052633211071], "file_list_sim": 0.045454545454545456, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": -1, "time": 13}, {"A_title": "Add an option to ec2.ini to filter instances based on various things", "A_clean_title": ["add", "option", "ec2", "ini", "filter", "instanc", "base", "variou", "thing"], "B_title": "Filter hosts based on ec2 variables in inventory script", "B_clean_title": ["filter", "host", "base", "ec2", "variabl", "inventori", "script"], "A_body": "(This is try two for the PR, replacing #7359 which ended up with merge commits. See the previous PR for a bit of commentary.)\n\nThis lets you filter instances right at the EC2 API level using the EC2 inventory plugin. You can use this to retrieve only instances with certain tags, or only certain instance types, etc, etc. See ec2.ini for more info and examples.\n", "A_clean_body": ["thi", "tri", "two", "pr", "replac", "7359", "which", "end", "up", "merg", "commit", "see", "previou", "pr", "bit", "commentari", "thi", "let", "you", "filter", "instanc", "right", "at", "ec2", "api", "level", "ec2", "inventori", "plugin", "you", "use", "thi", "retriev", "onli", "instanc", "certain", "tag", "or", "onli", "certain", "instanc", "type", "etc", "etc", "see", "ec2", "ini", "more", "info", "exampl"], "B_body": "This adds a host_filter option to ec2.ini that adds only hosts that pass the filter to the inventory. Can be used to separate stage and prod envs in the same region via tags, for example.\n", "B_clean_body": ["thi", "add", "host", "filter", "option", "ec2", "ini", "that", "add", "onli", "host", "that", "pass", "filter", "inventori", "use", "separ", "stage", "prod", "env", "same", "region", "via", "tag", "exampl"], "title_sim": [0.44636843976719], "body_sim": [0.4313238972736646], "file_list_sim": 1.0, "overlap_files_len": 2, "code_sim": [0.7016826162136836, 0.7016826162136836], "location_sim": [0.3333333333333333, 0.3333333333333333], "pattern": 0, "time": 41}, {"A_title": "allow for non standard hostnames", "A_clean_title": ["allow", "non", "standard", "hostnam"], "B_title": "Enable use of non standard hostname in inventory", "B_clean_title": ["enabl", "use", "non", "standard", "hostnam", "inventori"], "A_body": "- Changed parse_addresses to throw exceptions instead of passing None\n- Switched callers to trap and pass through the original values.\n- Look at deprecating this and possibly validate at plugin instead\n  fixes #13608\n", "A_clean_body": ["chang", "pars", "address", "throw", "except", "instead", "pass", "none", "switch", "caller", "trap", "pass", "through", "origin", "valu", "look", "at", "deprec", "thi", "possibl", "valid", "at", "plugin", "instead", "fix", "13608"], "B_body": "If the host given cannot be parsed in hostnae:port tuple,\nthen it might be a different format and used by a alternative\nconnexion plugin.\n\nFixes #13608\n", "B_clean_body": ["host", "given", "not", "pars", "hostna", "port", "tupl", "then", "it", "might", "differ", "format", "use", "by", "altern", "connexion", "plugin", "fix", "13608"], "title_sim": [0.7175556621538831], "body_sim": [0.1359988066631022], "file_list_sim": 0.1111111111111111, "overlap_files_len": 1, "code_sim": [0.21757997696939982, 0.15691612722773765], "location_sim": [0.1317365269461078, 0.6285714285714286], "pattern": 1, "time": 2}, {"A_title": "Add options to control output and execution of test-module", "A_clean_title": ["add", "option", "control", "output", "execut", "test", "modul"], "B_title": "Test module improvements", "B_clean_title": ["test", "modul", "improv"], "A_body": "test-module is useful but sometimes you want to edit the\nresult before running it to e.g. set a debug point.\n\nAdded a noexecute option (i.e. just create the module script, don't\nrun it) and an output option to choose the filename of the result.\n", "A_clean_body": ["test", "modul", "use", "but", "sometim", "you", "want", "edit", "result", "befor", "run", "it", "set", "debug", "point", "ad", "noexecut", "option", "just", "creat", "modul", "script", "don't", "run", "it", "output", "option", "choos", "filenam", "result"], "B_body": "Allows the module test runner to:\n1. dump the generated module file\n2. take json string as complex args to module\n", "B_clean_body": ["allow", "modul", "test", "runner", "dump", "gener", "modul", "file", "take", "json", "string", "as", "complex", "arg", "modul"], "title_sim": [0.1834170069851429], "body_sim": [0.07059180261499275], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.504424778761062, 0.504424778761062], "pattern": 0, "time": 295}, {"A_title": "Added availability zone support to ec2 module", "A_clean_title": ["ad", "avail", "zone", "support", "ec2", "modul"], "B_title": "Add availability zone parameter", "B_clean_title": ["add", "avail", "zone", "paramet"], "A_body": "", "A_clean_body": [], "B_body": "This commit adds the availability zone parameter, which allows a user to specify their zone and thus by extension the region.  We need to have this to enable us to deploy consistent stacks regardless of location (i.e. \"I want to deploy my playbook stack in EU now, kthx.\").  \n\nIt should also resolve the issue where launch fails when EC2 cannot find an image. \n", "B_clean_body": ["thi", "commit", "add", "avail", "zone", "paramet", "which", "allow", "user", "specifi", "their", "zone", "thu", "by", "extens", "region", "we", "need", "have", "thi", "enabl", "us", "deploy", "consist", "stack", "regardless", "locat", "want", "deploy", "my", "playbook", "stack", "eu", "now", "kthx", "it", "also", "resolv", "issu", "where", "launch", "fail", "when", "ec2", "not", "find", "imag"], "title_sim": [0.5324027690575948], "body_sim": [0.0], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.20588235294117646, 0.20588235294117646], "pattern": 0, "time": 4}, {"A_title": "Fix issue with cc and bcc getting added to mail if unset", "A_clean_title": ["fix", "issu", "cc", "bcc", "get", "ad", "mail", "unset"], "B_title": "fix mail when cc and bcc are used if None", "B_clean_title": ["fix", "mail", "when", "cc", "bcc", "are", "use", "none"], "A_body": "##### ISSUE TYPE\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nansible/lib/ansible/plugins/callback/mail.py\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  ```\r\n\r\n##### SUMMARY\r\n\"None\" was being added as a recipient on the email if cc or bcc were unset and defaulting to None. This was throwing the following smtplib exception:\r\n```python\r\nsmtplib.SMTPRecipientsRefused: {'None': (550, '5.1.1 <None>... User unknown')}\r\n```\r\n\r\nansible-playbook runs were erroring as follows:\r\n```python\r\n[WARNING]: Failure using method (v2_runner_on_failed) in callback plugin (</usr/lib/python2.7/dist-packages/ansible/plugins/callback/mail.CallbackModule object at 0x7f0d2a139f10>): {'None': (550, '5.1.1 <None>... User unknown')}\r\n```\r\n\r\nThis was fixed by changing the conditional that adds in cc and bcc to the address list to check the cc and bcc variables instead of the b_cc and b_bcc variables that had been transformed to byte strings.\r\n", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "compon", "name", "py", "ansibl", "lib", "ansibl", "plugin", "callback", "mail", "ansibl", "version", "ansibl", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "summari", "none", "wa", "be", "ad", "as", "recipi", "email", "cc", "or", "bcc", "were", "unset", "default", "none", "thi", "wa", "throw", "follow", "smtplib", "except", "python", "smtplib", "smtprecipientsrefus", "smtp", "recipi", "refus", "'none", "550", "none", "user", "unknown", "ansibl", "playbook", "run", "were", "error", "as", "follow", "python", "warn", "failur", "method", "v2", "runner", "fail", "callback", "plugin", "callbackmodul", "usr", "lib", "python2", "dist", "packag", "ansibl", "plugin", "callback", "mail", "callback", "modul", "object", "at", "0x7f0d2a139f10", "'none", "550", "none", "user", "unknown", "thi", "wa", "fix", "by", "chang", "condit", "that", "add", "cc", "bcc", "address", "list", "check", "cc", "bcc", "variabl", "instead", "cc", "bcc", "variabl", "that", "had", "been", "transform", "byte", "string"], "B_body": "##### ISSUE TYPE\n- Bugfix Pull Request\n##### ANSIBLE VERSION\n\n```\nansible 2.1.0\n  config file = /home/simon/.ansible.cfg\n  configured module search path = Default w/o overrides\n```\n##### SUMMARY\n\nfixes #15607 \nIn `./lib/ansible/plugins/callback/mail.py`, `cc` and `bcc` have default values of `None`, which are blindly copied to strings and then added to the recipient list of the email.\n\n```\nb_cc = to_bytes(cc)\nb_bcc = to_bytes(bcc)\n...\nif b_cc:\n    b_addresses += b_cc.split(b',')\nif b_bcc:\n    b_addresses += b_bcc.split(b',')\n```\n\nThe two `if` statements are always true, because `b_cc` and `b_bcc` are both `\"None\"` `<type 'str'>` instead of `None` `<type 'NoneType'>`\n\nThis commit changes the two `if` statements to check against `NoneType`, not `\"None\"`\n", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "ansibl", "version", "ansibl", "config", "file", "ansibl", "cfg", "home", "simon", "configur", "modul", "search", "path", "default", "overrid", "summari", "fix", "15607", "py", "lib", "ansibl", "plugin", "callback", "mail", "cc", "bcc", "have", "default", "valu", "none", "which", "are", "blindli", "copi", "string", "then", "ad", "recipi", "list", "email", "cc", "byte", "cc", "bcc", "byte", "bcc", "cc", "address", "split", "cc", "bcc", "address", "split", "bcc", "two", "statement", "are", "alway", "true", "becaus", "cc", "bcc", "are", "both", "none", "type", "'str", "instead", "none", "type", "'nonetyp", "'none", "type", "thi", "commit", "chang", "two", "statement", "check", "against", "nonetyp", "none", "type", "not", "none"], "title_sim": [0.18251329268854077], "body_sim": [0.636881089867936], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [1.0, 1.0], "pattern": -1, "time": 273}, {"A_title": "Added region to nova client connection. ", "A_clean_title": ["ad", "region", "nova", "client", "connect"], "B_title": "use region_name in nova_compute", "B_clean_title": ["use", "region", "name", "nova", "comput"], "A_body": "Added the argument to nova client instantiation. Without it, it will fail if the cloud provider you are using uses multiple regions because the driver doesn't know how to disambiguate.\n\nI made this pull request on an earlier branch. I'm re-doing so as to make it simple.\n", "A_clean_body": ["ad", "argument", "nova", "client", "instanti", "without", "it", "it", "will", "fail", "cloud", "provid", "you", "are", "use", "multipl", "region", "becaus", "driver", "n't", "know", "how", "disambigu", "made", "thi", "pull", "request", "earlier", "branch", "'m", "re", "do", "so", "as", "make", "it", "simpl"], "B_body": "Currently region_name is not used. This commit fixes it.\n", "B_clean_body": ["current", "region", "name", "not", "use", "thi", "commit", "fix", "it"], "title_sim": [0.021087550288262414], "body_sim": [0.3137156609592946], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [1.0, 1.0], "pattern": 0, "time": 20}, {"A_title": "Adds Kerberos authentication to winrm if available", "A_clean_title": ["add", "kerbero", "authent", "winrm", "avail"], "B_title": "Suppport for kerberos\\domain authentication for winrm", "B_clean_title": ["suppport", "kerbero", "domain", "authent", "winrm"], "A_body": "If the kerberos module is available, winrm will attempt to establish a Kerberized connection to a Windows server. This allows use of Windows domain accounts, which are quite often the only kinds of accounts enabled on enterprise networks.\n\nThis also pulls the `transport_schemes` variable up into the `winrm.Connection` class. This lets tests or future modifications alter the list of available schemas without reaching into `Connection.__init__`.\n\n(Identical to #10161, but now with moar devel.)\n", "A_clean_body": ["kerbero", "modul", "avail", "winrm", "will", "attempt", "establish", "kerber", "connect", "window", "server", "thi", "allow", "use", "window", "domain", "account", "which", "are", "quit", "often", "onli", "kind", "account", "enabl", "enterpris", "network", "thi", "also", "pull", "transport", "scheme", "variabl", "up", "into", "winrm", "connect", "class", "thi", "let", "test", "or", "futur", "modif", "alter", "list", "avail", "schema", "without", "reach", "into", "connect", "init", "ident", "10161", "but", "now", "moar", "devel"], "B_body": "This patch allows ansible to authenticate to winrm server via kerberos for Domain users.\n\nPre-requisite steps on Ansible host:\n\n1) kinit user@domain.com  [The user gets a valid kerberos ticket to authenticate]\n\n2) Set the windows variables in ansible. \n ansible_ssh_user: ansible_kerberos\n ansible_ssh_pass: ansible_kerberos\n ansible_ssh_port: 5986\n ansible_connection: winrm \nPlease make sure the username and password is set to 'ansible_kerberos' which tells ansible to use the kerberos ticket for authentication.\n\nPre-requisite steps on Windows host:\n\n1) Follow the steps on http://docs.ansible.com/intro_windows.html under the section \"Window sys prep\"\n\n2) Make sure that Kerberos and Negotiate authentication is enabled on WinRm service. \n'winrm g winrm/config/service/auth'\n\n3) Verify connection  with WinRM service using Kerberos.\n'winrm id -r:hostname.somedomain.com -a:Kerberos -u:domainusername@somedomain.com -p:'\n\n4) Make sure there are no firewall blocking access to winrm service from ansible host.\non ansible host: 'telnet <host> 5986/5'\n\nNotes:\nkinit is provided with the package 'krb5-workstation' in centos/Rhel\n\nAn example /etc/krb5.conf file\n\n```\n[logging]\n default = FILE:/var/log/krb5libs.log\n kdc = FILE:/var/log/krb5kdc.log\n admin_server = FILE:/var/log/kadmind.log\n\n[libdefaults]\n default_realm = BENNO.COM\n dns_lookup_kdc = false\n ticket_lifetime = 24h\n renew_lifetime = 7d\n forwardable = true\n udp_preference_limit = 1\n\n[realms]\n BENNO.COM = {\n  kdc = WIN-EUO6PCEBU37.benno.com\n  admin_server = WIN-EUO6PCEBU37.benno.com\n  default_domain = benno.com\n }\n\n[appdefaults]\nvalidate=false\n\n[domain_realm]\n .benno.com = BENNO.COM\n benno.com = BENNO.COM\n\n```\n\nPlease also make sure the hostnames given in ansible are available in both FORWARD and REVERSE DNS lookups.\n", "B_clean_body": ["thi", "patch", "allow", "ansibl", "authent", "winrm", "server", "via", "kerbero", "domain", "user", "pre", "requisit", "step", "ansibl", "host", "kinit", "user", "domain", "com", "user", "get", "valid", "kerbero", "ticket", "authent", "set", "window", "variabl", "ansibl", "ansibl", "ssh", "user", "ansibl", "kerbero", "ansibl", "ssh", "pass", "ansibl", "kerbero", "ansibl", "ssh", "port", "5986", "ansibl", "connect", "winrm", "pleas", "make", "sure", "usernam", "password", "set", "'ansibl", "kerbero", "which", "tell", "ansibl", "use", "kerbero", "ticket", "authent", "pre", "requisit", "step", "window", "host", "follow", "step", "http", "ansibl", "html", "doc", "window", "com", "intro", "under", "section", "window", "sy", "prep", "make", "sure", "that", "kerbero", "negoti", "authent", "enabl", "winrm", "win", "rm", "servic", "'winrm", "winrm", "config", "servic", "auth'", "verifi", "connect", "winrm", "win", "rm", "servic", "kerbero", "'winrm", "id", "hostnam", "somedomain", "com", "kerbero", "domainusernam", "somedomain", "com", "make", "sure", "there", "are", "no", "firewal", "block", "access", "winrm", "servic", "ansibl", "host", "ansibl", "host", "'telnet", "host", "5986", "5'", "note", "kinit", "provid", "packag", "'krb5", "workstat", "cento", "rhel", "exampl", "conf", "etc", "krb5", "file", "log", "default", "file", "log", "var", "log", "krb5lib", "kdc", "file", "log", "var", "log", "krb5kdc", "admin", "server", "file", "log", "var", "log", "kadmind", "libdefault", "default", "realm", "benno", "com", "dn", "lookup", "kdc", "fals", "ticket", "lifetim", "24h", "renew", "lifetim", "7d", "forward", "true", "udp", "prefer", "limit", "realm", "benno", "com", "kdc", "win", "euo6pcebu37", "benno", "com", "admin", "server", "win", "euo6pcebu37", "benno", "com", "default", "domain", "benno", "com", "appdefault", "validate=fals", "domain", "realm", "benno", "com", "benno", "com", "benno", "com", "benno", "com", "pleas", "also", "make", "sure", "hostnam", "given", "ansibl", "are", "avail", "both", "forward", "revers", "dn", "lookup"], "title_sim": [0.7055638652273586], "body_sim": [0.3142879446100006], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.667139303091377, 0.667139303091377], "location_sim": [0.0, 0.0], "pattern": 0, "time": 195}, {"A_title": "Update ec2_vpc_net_facts to use Boto3", "A_clean_title": ["updat", "ec2", "vpc", "net", "fact", "use", "boto3"], "B_title": "Support check_mode for ec2_vpc_net_facts", "B_clean_title": ["support", "check", "mode", "ec2", "vpc", "net", "fact"], "A_body": "##### SUMMARY\r\nUpdate the ec2_vpc_net_facts module to use boto3. This change also brings additional features to the module. It now reports additional facts about VPCs that were not possible with boto. \r\n\r\ni.e. IPv6 CIDR block information (association set, cidr range, etc), additional VPC attributes (classic_link_dns_supported, enable_dns_support, enable_dns_hostnames)\r\n\r\nAlso added an additional module parameter: vpc_ids. The boto3 function supports passing a list of subnet ids directly.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.4.0 (boto3_update_ec2_vpc_facts_modules 683ed18561) last updated 2017/06/05 18:41:50 (GMT -400)\r\n  config file = /Users/user/.ansible.cfg\r\n  configured module search path = [u'/Users/user/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /Users/user/devel/ansible/lib/ansible\r\n  executable location = /Users/user/devel/ansible/bin/ansible\r\n  python version = 2.7.13 (default, Dec 18 2016, 07:03:39) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)]\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\n<!---\r\nInclude additional information to help people understand the change here.\r\nFor bugs that don't have a linked bug report, a step-by-step reproduction\r\nof the problem is helpful.\r\n  -->\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "A_clean_body": ["summari", "updat", "ec2", "vpc", "net", "fact", "modul", "use", "boto3", "thi", "chang", "also", "bring", "addit", "featur", "modul", "it", "now", "report", "addit", "fact", "about", "vpc", "vp", "cs", "that", "were", "not", "possibl", "boto", "ipv6", "pv6", "cidr", "block", "inform", "associ", "set", "cidr", "rang", "etc", "addit", "vpc", "attribut", "classic", "link", "dn", "support", "enabl", "dn", "support", "enabl", "dn", "hostnam", "also", "ad", "addit", "modul", "paramet", "vpc", "id", "boto3", "function", "support", "pass", "list", "subnet", "id", "directli", "issu", "type", "featur", "pull", "request", "compon", "name", "py", "vpc", "net", "fact", "lib", "ansibl", "modul", "cloud", "amazon", "ec2", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "boto3", "updat", "ec2", "vpc", "fact", "modul", "683ed18561", "last", "updat", "2017", "06", "05", "18:41:50", "gmt", "400", "config", "file", "ansibl", "cfg", "user", "user", "configur", "modul", "search", "path", "u'", "user", "user", "ansibl", "plugin", "modul", "u'", "usr", "share", "ansibl", "plugin", "modul", "ansibl", "python", "modul", "locat", "user", "user", "devel", "ansibl", "lib", "ansibl", "execut", "locat", "user", "user", "devel", "ansibl", "bin", "ansibl", "python", "version", "13", "default", "dec", "18", "2016", "07:03:39", "gcc", "compat", "appl", "llvm", "clang", "800", "42", "addit", "inform", "includ", "addit", "inform", "help", "peopl", "understand", "chang", "here", "bug", "that", "n't", "have", "link", "bug", "report", "step", "by", "step", "reproduct", "problem", "help", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang"], "B_body": "##### SUMMARY\r\nAs a facts module, ec2_vpc_net_facts supports check mode by default\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nec2_vpc_net_facts\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.4.0 (devel c1b3d6a51f) last updated 2017/03/30 09:17:50 (GMT +1000)\r\n  config file = ./ansible.cfg\r\n  configured module search path = [u'./library']\r\n  python version = 2.7.13 (default, Jan 12 2017, 17:59:37) [GCC 6.3.1 20161221 (Red Hat 6.3.1-1)]\r\n```", "B_clean_body": ["summari", "as", "fact", "modul", "ec2", "vpc", "net", "fact", "support", "check", "mode", "by", "default", "issu", "type", "featur", "pull", "request", "compon", "name", "ec2", "vpc", "net", "fact", "ansibl", "version", "ansibl", "devel", "c1b3d6a51f", "last", "updat", "2017", "03", "30", "09:17:50", "gmt", "+1000", "config", "file", "cfg", "ansibl", "configur", "modul", "search", "path", "u'", "librari", "python", "version", "13", "default", "jan", "12", "2017", "17:59:37", "gcc", "20161221", "red", "hat"], "title_sim": [0.5210619261131969], "body_sim": [0.5763929782330228], "file_list_sim": 1.0, "overlap_files_len": 2, "code_sim": [0.09042683606109775, 0.09042683606109775], "location_sim": [0.8909090909090909, 0.8909090909090909], "pattern": 1, "time": 67}, {"A_title": "add win_service_status module", "A_clean_title": ["add", "win", "servic", "statu", "modul"], "B_title": "Win service rewrite", "B_clean_title": ["win", "servic", "rewrit"], "A_body": "##### ISSUE TYPE\r\n - New Module Pull Request\r\n\r\n##### COMPONENT NAME\r\nwin_service_status\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.2.0.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\nAdds `win_service_status` module which Get-WmiObject to get information about a specified Windows service. It works similar to the `win_stat` module.\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n###### On a service that exists \r\n\r\n```yml\r\n- name: get service status of a service that exists\r\n  win_service_status:\r\n    name: winrm\r\n  register: existing_service_status\r\n\r\n- name: debug result of service that exists\r\n  debug:\r\n    msg: \"{{ existing_service_status }}\"\r\n```\r\n\r\nThe result will be the following:\r\n\r\n```json\r\n{\r\n  \"msg\": {\r\n    \"changed\": false,\r\n    \"win_service_status\": {\r\n      \"caption\": \"Windows Remote Management (WS-Management)\",\r\n      \"exists\": true,\r\n      \"name\": \"WinRM\",\r\n      \"path_name\": \"C:\\\\Windows\\\\System32\\\\svchost.exe -k NetworkService\",\r\n      \"start_mode\": \"Auto\",\r\n      \"start_name\": \"NT AUTHORITY\\\\NetworkService\",\r\n      \"state\": \"Running\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n###### On a service that doesn't exists \r\n\r\n```yml\r\n- name: get service status of a service that does not exist\r\n  win_service_status:\r\n    name: testservice\r\n  register: non_existing_service_status\r\n\r\n- name: debug result of service that does not exists\r\n  debug:\r\n    msg: \"{{ non_existing_service_status }}\"\r\n```\r\n\r\nThe result will be the following:\r\n\r\n```json\r\n{\r\n  \"msg\": {\r\n    \"changed\": false,\r\n    \"win_service_status\": {\r\n      \"exists\": false\r\n    }\r\n  }\r\n}\r\n```\r\n", "A_clean_body": ["issu", "type", "new", "modul", "pull", "request", "compon", "name", "win", "servic", "statu", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "summari", "describ", "chang", "includ", "rational", "design", "decis", "add", "win", "servic", "statu", "modul", "which", "get", "wmiobject", "wmi", "object", "get", "inform", "about", "specifi", "window", "servic", "it", "work", "similar", "win", "stat", "modul", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "servic", "that", "exist", "yml", "name", "get", "servic", "statu", "servic", "that", "exist", "win", "servic", "statu", "name", "winrm", "regist", "exist", "servic", "statu", "name", "debug", "result", "servic", "that", "exist", "debug", "msg", "exist", "servic", "statu", "result", "will", "follow", "json", "msg", "chang", "fals", "win", "servic", "statu", "caption", "window", "remot", "manag", "ws", "manag", "exist", "true", "name", "winrm", "win", "rm", "path", "name", "exe", "window", "system32", "svchost", "networkservic", "network", "servic", "start", "mode", "auto", "start", "name", "nt", "author", "networkservic", "network", "servic", "state", "run", "servic", "that", "n't", "exist", "yml", "name", "get", "servic", "statu", "servic", "that", "not", "exist", "win", "servic", "statu", "name", "testservic", "regist", "non", "exist", "servic", "statu", "name", "debug", "result", "servic", "that", "not", "exist", "debug", "msg", "non", "exist", "servic", "statu", "result", "will", "follow", "json", "msg", "chang", "fals", "win", "servic", "statu", "exist", "fals"], "B_body": "##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nwin_service\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.0.0\r\n  config file =\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\nRewrite the win_service module to support the below features\r\n* Allow it to return existance info instead of just failing outright\r\n* Return a lot more info on the service such as username, dependencies, description, etc\r\n* Allow setting of the service username and password\r\n* Allow setting of dependencies\r\n* Allow creation/removal of services\r\n* Allow setting description, display name and path to executable of service\r\n", "B_clean_body": ["issu", "type", "featur", "pull", "request", "compon", "name", "win", "servic", "ansibl", "version", "ansibl", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "summari", "rewrit", "win", "servic", "modul", "support", "below", "featur", "allow", "it", "return", "exist", "info", "instead", "just", "fail", "outright", "return", "lot", "more", "info", "servic", "such", "as", "usernam", "depend", "descript", "etc", "allow", "set", "servic", "usernam", "password", "allow", "set", "depend", "allow", "creation", "remov", "servic", "allow", "set", "descript", "display", "name", "path", "execut", "servic"], "title_sim": [0.4919179198205548], "body_sim": [0.5686535623027712], "file_list_sim": 0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 1, "time": 0}, {"A_title": "vmware_guest: module rewrite to add many features & fixes", "A_clean_title": ["vmware", "guest", "modul", "rewrit", "add", "mani", "featur", "fix"], "B_title": "vmware_guest: Add multiple nics management + Bug fixes", "B_clean_title": ["vmware", "guest", "add", "multipl", "nic", "manag", "bug", "fix"], "A_body": "##### ISSUE TYPE\r\n - Feature Pull Request\r\n - Bugfix Pull Request\r\n - Docs Pull Request\r\n\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.0.0\r\n```\r\n\r\n##### SUMMARY\r\n   \r\n* New feature: Add template_flag attribute to define if the destination machine is a template\r\n* New feature: create VM without using templates\r\n* New feature: multiple NIC\r\n* New feature: multiple disks\r\n* New feature: custom SCSI controller types (default: paravirtual)\r\n* New feature: NIC can now be E1000 or VMXNet3 (default)\r\n* New feature: customize NIC mac address\r\n* New feature: new disk option autoselect_datastore permit to select the less used datastore. If datastore field is provided, filter the datastore list before selection\r\n* New feature: Implement disk resizing + addition when state=present and VM exists\r\n* New feature: when state=present and vm exists, modify the current CPU, Memory and disk space\r\n* New feature: Add guest_id attribute to customize VM guest ID in VMWare\r\n* New feature: affect VM to a resource pool\r\n* New feature: change VM configuration without recreating it (CPU, memory, disks, network, guest ID, resource pool)\r\n* New feature: suspended state (thanks @berney)\r\n* Add 'gatherfacts' state to gather facts on a VM instead of previous 'present' state ('present' ensure the VM configuration)\r\n* Add PyVmomiCache class to cache read only object\r\n* Various python code fixes\r\n* Various documentation fixes\r\n* esxi_hostname & cluster are now exclusive\r\n* Drop ips attribute & set ip directly into networks\r\n* Little performance fixes by removing some duplicate calls to VMWare API\r\n* Python 3 portability fixes\r\n* Create many functions to make the code maintainable\r\n* Cleanup some useless attributes\r\n* Add helper class to create:\r\n  * SCSI controller\r\n  * Disks\r\n  * Network devices\r\n\r\n", "A_clean_body": ["issu", "type", "featur", "pull", "request", "bugfix", "pull", "request", "doc", "pull", "request", "compon", "name", "vmware", "guest", "ansibl", "version", "ansibl", "summari", "new", "featur", "add", "templat", "flag", "attribut", "defin", "destin", "machin", "templat", "new", "featur", "creat", "vm", "without", "templat", "new", "featur", "multipl", "nic", "new", "featur", "multipl", "disk", "new", "featur", "custom", "scsi", "control", "type", "default", "paravirtu", "new", "featur", "nic", "now", "e1000", "or", "vmxnet3", "vmx", "net3", "default", "new", "featur", "custom", "nic", "mac", "address", "new", "featur", "new", "disk", "option", "autoselect", "datastor", "permit", "select", "less", "use", "datastor", "datastor", "field", "provid", "filter", "datastor", "list", "befor", "select", "new", "featur", "implement", "disk", "resiz", "addit", "when", "state=pres", "vm", "exist", "new", "featur", "when", "state=pres", "vm", "exist", "modifi", "current", "cpu", "memori", "disk", "space", "new", "featur", "add", "guest", "id", "attribut", "custom", "vm", "guest", "id", "vmware", "vm", "ware", "new", "featur", "affect", "vm", "resourc", "pool", "new", "featur", "chang", "vm", "configur", "without", "recreat", "it", "cpu", "memori", "disk", "network", "guest", "id", "resourc", "pool", "new", "featur", "suspend", "state", "thank", "berney", "add", "'gatherfact", "state", "gather", "fact", "vm", "instead", "previou", "'present", "state", "'present", "ensur", "vm", "configur", "add", "pyvmomicach", "py", "vmomi", "cach", "class", "cach", "read", "onli", "object", "variou", "python", "code", "fix", "variou", "document", "fix", "esxi", "hostnam", "cluster", "are", "now", "exclus", "drop", "ip", "attribut", "set", "ip", "directli", "into", "network", "littl", "perform", "fix", "by", "remov", "some", "duplic", "call", "vmware", "vm", "ware", "api", "python", "portabl", "fix", "creat", "mani", "function", "make", "code", "maintain", "cleanup", "some", "useless", "attribut", "add", "helper", "class", "creat", "scsi", "control", "disk", "network", "devic"], "B_body": "##### ISSUE TYPE\r\n - Feature Pull Request\r\n - Bugfix Pull Request\r\n\r\n##### COMPONENT NAME\r\nvmware_guest\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.0.0\r\n```\r\n\r\n##### SUMMARY\r\n- Fix var name:\r\nfunction getfolder return folder_map instead of foldermap.\r\n\r\n- Fix bug in deploy_template function:\r\nIf folder not start by /vm there is a \"no folder matched the path\" error\r\n\r\n- Power on VM if state is set to poweredon\r\n\r\nNew feature : Move nic creation out of customizations + Add multiple nics management", "B_clean_body": ["issu", "type", "featur", "pull", "request", "bugfix", "pull", "request", "compon", "name", "vmware", "guest", "ansibl", "version", "ansibl", "summari", "fix", "var", "name", "function", "getfold", "return", "folder", "map", "instead", "foldermap", "fix", "bug", "deploy", "templat", "function", "folder", "not", "start", "by", "vm", "there", "no", "folder", "match", "path", "error", "power", "vm", "state", "set", "poweredon", "new", "featur", "move", "nic", "creation", "out", "custom", "add", "multipl", "nic", "manag"], "title_sim": [0.45202997280155294], "body_sim": [0.3577437937618093], "file_list_sim": 0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 1, "time": 3}, {"A_title": "Support SSL IRC servers", "A_clean_title": ["support", "ssl", "irc", "server"], "B_title": "Added basic support for SSL when using IRC", "B_clean_title": ["ad", "basic", "support", "ssl", "when", "irc"], "A_body": "Adds SSL support\n", "A_clean_body": ["add", "ssl", "support"], "B_body": "I've added basic support for connecting to an IRC server with SSL. Nothing fancy but it works.\n", "B_clean_body": ["'ve", "ad", "basic", "support", "connect", "irc", "server", "ssl", "noth", "fanci", "but", "it", "work"], "title_sim": [0.5665126472988506], "body_sim": [0.3804829380713581], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.7884615384615384, 0.7884615384615384], "pattern": 0, "time": 1}, {"A_title": "fixes timeout param in netconf provider for junos", "A_clean_title": ["fix", "timeout", "param", "netconf", "provid", "juno"], "B_title": "Fix #18615 Add netconf session timeout for JUNOS", "B_clean_title": ["fix", "18615", "add", "netconf", "session", "timeout", "juno"], "A_body": "This change will now cause the netconf provider to honor the module\r\ntimeout value when making calls to pyez.", "A_clean_body": ["thi", "chang", "will", "now", "caus", "netconf", "provid", "honor", "modul", "timeout", "valu", "when", "make", "call", "pyez"], "B_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\njunos\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.3.0 (devel 461286f914)\r\n```\r\n\r\n##### SUMMARY\r\n<!--- Describe the change, including rationale and design decisions -->\r\n\r\n<!---\r\nIf you are fixing an existing issue, please include \"Fixes #nnn\" in your\r\ncommit message and your description; but you should still explain what\r\nthe change does.\r\n-->\r\n\r\n<!-- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\nSet netconf session timeout value if 'netconf_timeout' value is mentioned in \r\njunos playbook\r\n```\r\n\r\n", "B_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "compon", "name", "juno", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "devel", "461286f914", "summari", "describ", "chang", "includ", "rational", "design", "decis", "you", "are", "fix", "exist", "issu", "pleas", "includ", "fix", "nnn", "your", "commit", "messag", "your", "descript", "but", "you", "still", "explain", "what", "chang", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang", "set", "netconf", "session", "timeout", "valu", "'netconf", "timeout", "valu", "mention", "juno", "playbook"], "title_sim": [0.6200588304921977], "body_sim": [0.289593734596593], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.5568512285980985, 0.5568512285980985], "location_sim": [1.0, 1.0], "pattern": 0, "time": 1}, {"A_title": "Adds the ability to specify mysql password as a hash in the mysql_user module.", "A_clean_title": ["add", "abil", "specifi", "mysql", "password", "as", "hash", "mysql", "user", "modul"], "B_title": "Mysql password hash support", "B_clean_title": ["mysql", "password", "hash", "support"], "A_body": "For the cases when you do not know the plain mysql passwords of your users but have the hashes, it is helpful to be able to specify an option to pass those hashes to mysql_user module. This feature adds an option to enable passing passwords as a hash.\n", "A_clean_body": ["case", "when", "you", "not", "know", "plain", "mysql", "password", "your", "user", "but", "have", "hash", "it", "help", "abl", "specifi", "option", "pass", "those", "hash", "mysql", "user", "modul", "thi", "featur", "add", "option", "enabl", "pass", "password", "as", "hash"], "B_body": "Resubmission of #5633 as requested this has been converted into a separate option such that the password_hash may be passed in place of the password itself.\n\ntesting via:\n\n```\n\n---\n- hosts: all\n  tasks:\n    - name: mysql_user test password hashed\n      mysql_user: user=test password_hash=*973D12C21B4F274E09461F56EEAB92AB7B6FC20A priv=*.*:ALL,GRANT\n    - name: mysql_user test2 password not hashed\n      mysql_user: user=test2 password=ansible priv=*.*:ALL,GRANT\n```\n\nBoth users result in having the same password hash.\n", "B_clean_body": ["resubmiss", "5633", "as", "request", "thi", "ha", "been", "convert", "into", "separ", "option", "such", "that", "password", "hash", "may", "pass", "place", "password", "itself", "test", "via", "host", "all", "task", "name", "mysql", "user", "test", "password", "hash", "mysql", "user", "user=test", "password", "hash=*973d12c21b4f274e09461f56eeab92ab7b6fc20a", "priv=*", "all", "grant", "name", "mysql", "user", "test2", "password", "not", "hash", "mysql", "user", "user=test2", "password=ans", "priv=*", "all", "grant", "both", "user", "result", "have", "same", "password", "hash"], "title_sim": [0.5885986741628548], "body_sim": [0.7866897803212617], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.9536082474226805, 0.9536082474226805], "pattern": 0, "time": 128}, {"A_title": "ec2_vol module: add support for name / id to mount volume on instance", "A_clean_title": ["ec2", "vol", "modul", "add", "support", "name", "id", "mount", "volum", "instanc"], "B_title": "[module/ec2_vol] Add cross instance idempotence for ec2 ebs disks", "B_clean_title": ["vol", "modul", "ec2", "add", "cross", "instanc", "idempot", "ec2", "eb", "disk"], "A_body": "- volume_size no longer required if name OR id is provided\n- id is volume-id\n- name is volume Name tag\n- special checking is provided\n", "A_clean_body": ["volum", "size", "no", "longer", "requir", "name", "or", "id", "provid", "id", "volum", "id", "name", "volum", "name", "tag", "special", "check", "provid"], "B_body": "Added a new param to the ec2_vol module `tag_id_name`.\nIf given it will tag the ebs disk and use that disk again if the instance is terminated\n", "B_clean_body": ["ad", "new", "param", "ec2", "vol", "modul", "tag", "id", "name", "given", "it", "will", "tag", "eb", "disk", "use", "that", "disk", "again", "instanc", "termin"], "title_sim": [0.3690840280180905], "body_sim": [0.22377647274704152], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.8009478672985783, 0.8009478672985783], "pattern": 0, "time": 99}, {"A_title": "[WIP] fix conflicts in win_chocolatey execution_timeout", "A_clean_title": ["wip", "fix", "conflict", "win", "chocolatey", "execut", "timeout"], "B_title": "win_chocolatey: Add execution-timeout support", "B_clean_title": ["win", "chocolatey", "add", "execut", "timeout", "support"], "A_body": "##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nwin_chocolatey\r\n", "A_clean_body": ["issu", "type", "featur", "pull", "request", "compon", "name", "win", "chocolatey"], "B_body": "##### ISSUE TYPE\r\n<!--- Pick one below and delete the rest: -->\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nwin_chocolatey\r\n\r\n##### ANSIBLE VERSION\r\n```\r\nansible 2.2.0.0\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n```\r\n\r\n##### SUMMARY\r\nFixes #19447\r\n\r\nSome chocolatey packages (e.g. visualstudio2015community) take longer than the 2700 sec default timeout. Add execution-timeout support.\r\n ", "B_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "featur", "pull", "request", "compon", "name", "win", "chocolatey", "ansibl", "version", "ansibl", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "summari", "fix", "19447", "some", "chocolatey", "packag", "visualstudio2015commun", "take", "longer", "than", "2700", "sec", "default", "timeout", "add", "execut", "timeout", "support"], "title_sim": [0.6456588546122062], "body_sim": [0.2212899335512629], "file_list_sim": 1.0, "overlap_files_len": 2, "code_sim": [1.0, 1.0], "location_sim": [0.897196261682243, 0.897196261682243], "pattern": 0, "time": 75}, {"A_title": "Support for group metrics collection in ec2_asg module", "A_clean_title": ["support", "group", "metric", "collect", "ec2", "asg", "modul"], "B_title": "ec2_asg: Target Group Support", "B_clean_title": ["ec2", "asg", "target", "group", "support"], "A_body": "##### SUMMARY\r\nCurrently the `ec2_asg` module does not support enabling group metrics collection for an auto scaling group.  This implements a backwards compatible default that is fully configurable for explicit use.\r\n\r\n##### ISSUE TYPE\r\nFeature Pull Request\r\n\r\n##### COMPONENT NAME\r\nec2_asg\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.3.0 (auto-scaling-group-metrics 5631d1555e) last updated 2017/03/14 14:20:08 (GMT -500)\r\n  config file = /home/ssiefkas/projects/ms.ansible.playbooks/ansible.cfg\r\n  configured module search path = Default w/o overrides\r\n  python version = 2.7.13 (default, Dec 21 2016, 07:16:46) [GCC 6.2.1 20160830\r\n```\r\n\r\n##### ADDITIONAL INFORMATION\r\nI've tested this against `devel` as well as a patch against 2.2.0.\r\n", "A_clean_body": ["summari", "current", "ec2", "asg", "modul", "not", "support", "enabl", "group", "metric", "collect", "auto", "scale", "group", "thi", "implement", "backward", "compat", "default", "that", "fulli", "configur", "explicit", "use", "issu", "type", "featur", "pull", "request", "compon", "name", "ec2", "asg", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "auto", "scale", "group", "metric", "5631d1555e", "last", "updat", "2017", "03", "14", "14:20:08", "gmt", "500", "config", "file", "ansibl", "cfg", "home", "ssiefka", "project", "ms", "playbook", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "python", "version", "13", "default", "dec", "21", "2016", "07:16:46", "gcc", "20160830", "addit", "inform", "'ve", "test", "thi", "against", "devel", "as", "well", "as", "patch", "against"], "B_body": "##### SUMMARY\r\nAdds support for target_groups within an Autoscaling group.  Note: boto2 crashes when you have a target_group attached, so this is an almost full rewrite to use boto3, and support target groups.\r\n\r\nNote: This also fixes the error where it spins up extra EC2 resources when doing a deployment.\r\n\r\n##### ISSUE TYPE\r\n - Feature Pull Request\r\n\r\n##### COMPONENT NAME\r\nlib/ansible/modules/cloud/amazon/ec2_asg.py\r\n\r\n##### ANSIBLE VERSION\r\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\r\n```\r\nansible 2.2.1.0\r\n```\r\n\r\n\r\n##### ADDITIONAL INFORMATION\r\nSorry this is a beast of a pull request, the boto2 -> 3 was not a simple change.  I also changed the logic for the replace_instances and lc_check.  This looked like it was wrong, and evolved into something it wasn't really mean to be (I hope).  I changed the logic to be as follows:\r\n\r\n1. lc_check will replace instances if the lc name is different\r\n2. replace_instances w/ lc_check will replace all passed instances that are in the asg with the wrong lc name.\r\n3. replace_instances w/o lc_check will replace all passed instances within the asg (even if they have the same lc name).\r\n\r\nThis seemed to follow what the documentation stated.\r\n\r\n\r\nNOTE!!!!! This is still a work in progress, I just wanted to get some feedback before polishing out the errors.  Right now I think I have some errors by not sleeping for 10 second, due to aws change, and quick repulling will not reflect the change.  The original code has some what looked like \"bad\" sleeps, but this looks to be needed, I'll fix these soon.\r\n\r\nThis PR might go well with the following PRs:\r\n* https://github.com/ansible/ansible/pull/19492\r\n* https://github.com/ansible/ansible/pull/19491\r\n\r\n<!--- Paste verbatim command output below, e.g. before and after your change -->\r\n```\r\n\r\n```\r\n", "B_clean_body": ["summari", "add", "support", "target", "group", "within", "autosc", "group", "note", "boto2", "crash", "when", "you", "have", "target", "group", "attach", "so", "thi", "almost", "full", "rewrit", "use", "boto3", "support", "target", "group", "note", "thi", "also", "fix", "error", "where", "it", "spin", "up", "extra", "ec2", "resourc", "when", "do", "deploy", "issu", "type", "featur", "pull", "request", "compon", "name", "py", "asg", "lib", "ansibl", "modul", "cloud", "amazon", "ec2", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "addit", "inform", "sorri", "thi", "beast", "pull", "request", "boto2", "wa", "not", "simpl", "chang", "also", "chang", "logic", "replac", "instanc", "lc", "check", "thi", "look", "like", "it", "wa", "wrong", "evolv", "into", "someth", "it", "wa", "n't", "realli", "mean", "hope", "chang", "logic", "as", "follow", "lc", "check", "will", "replac", "instanc", "lc", "name", "differ", "replac", "instanc", "lc", "check", "will", "replac", "all", "pass", "instanc", "that", "are", "asg", "wrong", "lc", "name", "replac", "instanc", "lc", "check", "will", "replac", "all", "pass", "instanc", "within", "asg", "even", "they", "have", "same", "lc", "name", "thi", "seem", "follow", "what", "document", "state", "note", "thi", "still", "work", "progress", "just", "want", "get", "some", "feedback", "befor", "polish", "out", "error", "right", "now", "think", "have", "some", "error", "by", "not", "sleep", "10", "second", "due", "aw", "chang", "quick", "repul", "will", "not", "reflect", "chang", "origin", "code", "ha", "some", "what", "look", "like", "bad", "sleep", "but", "thi", "look", "need", "'ll", "fix", "these", "soon", "thi", "pr", "might", "go", "well", "follow", "pr", "rs", "http", "github", "com", "ansibl", "ansibl", "pull", "19492", "http", "github", "com", "ansibl", "ansibl", "pull", "19491", "past", "verbatim", "command", "output", "below", "befor", "after", "your", "chang"], "title_sim": [0.8106439717026386], "body_sim": [0.2993372228331952], "file_list_sim": 0, "overlap_files_len": 0, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": -1, "time": 3}, {"A_title": "Fix umask calculation on file creation. Fixes #10257", "A_clean_title": ["fix", "umask", "calcul", "file", "creation", "fix", "10257"], "B_title": "Fix file mode calculation", "B_clean_title": ["fix", "file", "mode", "calcul"], "A_body": "", "A_clean_body": [], "B_body": "Since 9da0627, file mode calculation is incorrect. For example when `umask` is `0077`, file mode is `0611` instead of `0600`.\n\nSee 898a38b / #7196.\n", "B_clean_body": ["sinc", "9da0627", "file", "mode", "calcul", "incorrect", "exampl", "when", "umask", "0077", "file", "mode", "0611", "instead", "0600", "see", "898a38b", "7196"], "title_sim": [0.266998887308279], "body_sim": [0.0], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": -1, "time": 92}, {"A_title": "Fix slaac filter", "A_clean_title": ["fix", "slaac", "filter"], "B_title": "Refactor and fix the slaac filter.", "B_clean_title": ["refactor", "fix", "slaac", "filter"], "A_body": "##### ISSUE TYPE\n\n<!--- Pick one below and delete the rest: -->\n- Bugfix Pull Request\n##### COMPONENT NAME\n\nslaac filter module\n##### ANSIBLE VERSION\n\n<!--- Paste verbatim output from \u201cansible --version\u201d between quotes below -->\n\n```\nansible 2.1.1.0\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = Default w/o overrides\n\n```\n##### SUMMARY\n\nThe code which attempts to test an IP address version attribute doesn't work, the address is a string. I've followed the style of the existing code and used the ipaddr() function to do so.\n\nUsing the template data `{{ 'fe80::' | slaac('00:11:22:33:44:55') }}` the slaac filter output changes from False to a SLAAC address:\n\n```\nTASK [template] ****************************************************************\n--- before: /tmp/testfile\n+++ after: dynamically generated\n@@ -1 +1 @@\n-False\n+fe80::211:22ff:fe33:4455\n```\n", "A_clean_body": ["issu", "type", "pick", "one", "below", "delet", "rest", "bugfix", "pull", "request", "compon", "name", "slaac", "filter", "modul", "ansibl", "version", "past", "verbatim", "output", "ansibl", "version", "between", "quot", "below", "ansibl", "config", "file", "cfg", "etc", "ansibl", "ansibl", "configur", "modul", "search", "path", "default", "overrid", "summari", "code", "which", "attempt", "test", "ip", "address", "version", "attribut", "n't", "work", "address", "string", "'ve", "follow", "style", "exist", "code", "use", "ipaddr", "function", "so", "templat", "data", "'fe80", "slaac", "'00:11:22:33:44:55", "slaac", "filter", "output", "chang", "fals", "slaac", "address", "task", "templat", "befor", "tmp", "testfil", "after", "dynam", "gener", "+1", "fals", "+fe80", ":211:22ff", "fe33:4455"], "B_body": "##### ISSUE TYPE\n- Bugfix Pull Request\n##### ANSIBLE VERSION\n\n```\nansible 2.2.0 (slaac_fix_and_include_prefix 707622ccf2) last updated 2016/08/05 16:44:53 (GMT +200)\n  lib/ansible/modules/core: (detached HEAD 24db4de245) last updated 2016/08/05 16:41:56 (GMT +200)\n  lib/ansible/modules/extras: (detached HEAD db979dde74) last updated 2016/08/05 16:41:56 (GMT +200)\n  config file = /home/christian/.ansible.cfg\n  configured module search path = Default w/o overrides\n```\n##### SUMMARY\n\nThe implementation of the slaac filter doesn't work (and may have never worked; introduced in cf7744f2f131708acd67c1312f622a3d4e639455 #11394). It calls a method on string instead of the corresponding `netaddr`-Class, see [lib/ansible/plugins/filter/ipaddr.py @ cf7744f](https://github.com/ansible/ansible/commit/cf7744f2f131708acd67c1312f622a3d4e639455#diff-52b5d47bc5ffb759787765a1aae56df7R603) L603 vs L606.\n\nThis implementation tries to do be more a wrapper to the existing functions instead of reinventing the wheel. Only respecting the RFC requires the code around the lines L635-L644.\n\nWhile developing a fix for the slaac filter I also tried another approach. This will be a separate pull request.\n\nDue to this pull request #11658 will be obsolete.\n", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "ansibl", "version", "ansibl", "slaac", "fix", "includ", "prefix", "707622ccf2", "last", "updat", "2016", "08", "05", "16:44:53", "gmt", "+200", "lib", "ansibl", "modul", "core", "detach", "head", "24db4de245", "last", "updat", "2016", "08", "05", "16:41:56", "gmt", "+200", "lib", "ansibl", "modul", "extra", "detach", "head", "db979dde74", "last", "updat", "2016", "08", "05", "16:41:56", "gmt", "+200", "config", "file", "ansibl", "cfg", "home", "christian", "configur", "modul", "search", "path", "default", "overrid", "summari", "implement", "slaac", "filter", "n't", "work", "may", "have", "never", "work", "introduc", "cf7744f2f131708acd67c1312f622a3d4e639455", "11394", "it", "call", "method", "string", "instead", "correspond", "netaddr", "class", "see", "py", "lib", "ansibl", "plugin", "filter", "ipaddr", "cf7744f", "http", "github", "com", "ansibl", "ansibl", "commit", "cf7744f2f131708acd67c1312f622a3d4e639455", "diff", "52b5d47bc5ffb759787765a1aae56df7r603", "l603", "vs", "l606", "thi", "implement", "tri", "more", "wrapper", "exist", "function", "instead", "reinvent", "wheel", "onli", "respect", "rfc", "requir", "code", "around", "line", "l635", "l644", "while", "develop", "fix", "slaac", "filter", "also", "tri", "anoth", "approach", "thi", "will", "separ", "pull", "request", "due", "thi", "pull", "request", "11658", "will", "obsolet"], "title_sim": [0.611124460902798], "body_sim": [0.29562083737748734], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.016069705686649907, 0.016069705686649907], "location_sim": [0.6266666666666667, 0.6266666666666667], "pattern": -1, "time": 39}, {"A_title": "move test_git to destructive", "A_clean_title": ["move", "test", "git", "destruct"], "B_title": "Move destructive git test to test_git_destructive.", "B_clean_title": ["move", "destruct", "git", "test", "test", "git", "destruct"], "A_body": "##### ISSUE TYPE\n- Bugfix Pull Request\n##### ANSIBLE VERSION\n\ndevel\n##### SUMMARY\n\nThe integration test test_git remove the ssh_known_hosts for the user and globally, see:\nhttps://github.com/ansible/ansible/blob/08b3dbcda3f28815af3adff168f67506395d3c17/test/integration/roles/test_git/tasks/main.yml#L89-L91\n\nThat is destructive!\nIt should thus be in destructive and not non_destructive.\n", "A_clean_body": ["issu", "type", "bugfix", "pull", "request", "ansibl", "version", "devel", "summari", "integr", "test", "test", "git", "remov", "ssh", "known", "host", "user", "global", "see", "http", "yml", "github", "com", "ansibl", "ansibl", "blob", "08b3dbcda3f28815af3adff168f67506395d3c17", "test", "integr", "role", "test", "git", "task", "main", "l89", "l91", "that", "destruct", "it", "thu", "destruct", "not", "non", "destruct"], "B_body": "##### Issue Type:\n\nBugfix Pull Request\n##### Ansible Version:\n\n```\nansible 2.1.0 (git-destructive-tests 95da1ea5fd) last updated 2016/03/20 15:08:51 (GMT -700)\n  lib/ansible/modules/core: (detached HEAD d71b9bae89) last updated 2016/03/20 15:10:53 (GMT -700)\n  lib/ansible/modules/extras: (detached HEAD d5030ae555) last updated 2016/03/20 15:10:54 (GMT -700)\n  config file = \n  configured module search path = Default w/o overrides\n```\n##### Summary:\n\nThe test_git role is run from the non_destructive integration tests. However, the task \"remove known_host files\" in that role is destructive.\n\nCorrecting this would be easy if the git module supported SSH options for GlobalKnownHostsFile and UserKnownHostsFile instead of hard-coded paths: ansible/ansible-modules-core#3281\n\nIn the meantime, I've moved the tests depending on the destructive behaviour from test_git to test_git_destructive. I've also made the tests less destructive by backing up and restoring the known_hosts files. \n##### Example output:\n\nTested using the ubuntu1404 docker image.\n\n`TEST_FLAGS='-t test_git_destructive' make destructive` without credentials has a play recap of:\n\n```\nPLAY RECAP *********************************************************************\ntesthost                   : ok=71   changed=3    unreachable=0    failed=0   \n```\n\n`TEST_FLAGS='-t test_git_destructive' make destructive` with credentials has a play recap of:\n\n```\nPLAY RECAP *********************************************************************\ntesthost                   : ok=75   changed=6    unreachable=0    failed=0   \n```\n", "B_clean_body": ["issu", "type", "bugfix", "pull", "request", "ansibl", "version", "ansibl", "git", "destruct", "test", "95da1ea5fd", "last", "updat", "2016", "03", "20", "15:08:51", "gmt", "700", "lib", "ansibl", "modul", "core", "detach", "head", "d71b9bae89", "last", "updat", "2016", "03", "20", "15:10:53", "gmt", "700", "lib", "ansibl", "modul", "extra", "detach", "head", "d5030ae555", "last", "updat", "2016", "03", "20", "15:10:54", "gmt", "700", "config", "file", "configur", "modul", "search", "path", "default", "overrid", "summari", "test", "git", "role", "run", "non", "destruct", "integr", "test", "howev", "task", "remov", "known", "host", "file", "that", "role", "destruct", "correct", "thi", "would", "easi", "git", "modul", "support", "ssh", "option", "globalknownhostsfil", "global", "known", "host", "file", "userknownhostsfil", "user", "known", "host", "file", "instead", "hard", "code", "path", "modul", "core", "ansibl", "ansibl", "3281", "meantim", "'ve", "move", "test", "depend", "destruct", "behaviour", "test", "git", "test", "git", "destruct", "'ve", "also", "made", "test", "less", "destruct", "by", "back", "up", "restor", "known", "host", "file", "exampl", "output", "test", "ubuntu1404", "docker", "imag", "test", "flags='", "test", "git", "destruct", "make", "destruct", "without", "credenti", "ha", "play", "recap", "play", "recap", "testhost", "ok=71", "changed=3", "unreachable=0", "failed=0", "test", "flags='", "test", "git", "destruct", "make", "destruct", "credenti", "ha", "play", "recap", "play", "recap", "testhost", "ok=75", "changed=6", "unreachable=0", "failed=0"], "title_sim": [0.9525103754683597], "body_sim": [0.6620900564755555], "file_list_sim": 0.2, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.0, 0.0], "pattern": 0, "time": 23}, {"A_title": "Egress rules for ec2 security groups", "A_clean_title": ["egress", "rule", "ec2", "secur", "group"], "B_title": "ec2_group support for egress rules and referring to security groups by name in rules", "B_clean_title": ["ec2", "group", "support", "egress", "rule", "refer", "secur", "group", "by", "name", "rule"], "A_body": "This will have the ability of adding egress rules, here is an example:\n\n```\n - name: example ec2 group\n   local_action:\n     module: ec2_group\n     name: example\n     description: an example EC2 group\n     vpc_id: 12345\n     region: eu-west-1a\n     ec2_secret_key: SECRET\n     ec2_access_key: ACCESS\n     rules:\n       - proto: tcp\n         from_port: 80\n         to_port: 80\n         cidr_ip: 0.0.0.0/0\n         egress: yes <------------------ this will mark it as egress\n       - proto: tcp\n         from_port: 22\n         to_port: 22\n         cidr_ip: 10.0.0.0/8\n```\n\nWhen creating a security group on EC2, a default egress rule is always created, this rule gives unrestricted access to all protocols and all ports. This is unrelated to Ansible nor Boto.\nWhen creating a security group using my changes, if no egress rules are configured then it will not change any egress rules that already exist on the group. If there are rules configured then similar to ingress rules it will remove the ones that are not configured.\nI'm not sure if this is behavior is better for most users, but after contemplating I thought it is more reasonable.\n", "A_clean_body": ["thi", "will", "have", "abil", "ad", "egress", "rule", "here", "exampl", "name", "exampl", "ec2", "group", "local", "action", "modul", "ec2", "group", "name", "exampl", "descript", "exampl", "ec2", "group", "vpc", "id", "12345", "region", "eu", "west", "1a", "ec2", "secret", "key", "secret", "ec2", "access", "key", "access", "rule", "proto", "tcp", "port", "80", "port", "80", "cidr", "ip", "egress", "ye", "thi", "will", "mark", "it", "as", "egress", "proto", "tcp", "port", "22", "port", "22", "cidr", "ip", "10", "when", "creat", "secur", "group", "ec2", "default", "egress", "rule", "alway", "creat", "thi", "rule", "give", "unrestrict", "access", "all", "protocol", "all", "port", "thi", "unrel", "ansibl", "nor", "boto", "when", "creat", "secur", "group", "my", "chang", "no", "egress", "rule", "are", "configur", "then", "it", "will", "not", "chang", "ani", "egress", "rule", "that", "alreadi", "exist", "group", "there", "are", "rule", "configur", "then", "similar", "ingress", "rule", "it", "will", "remov", "one", "that", "are", "not", "configur", "'m", "not", "sure", "thi", "behavior", "better", "most", "user", "but", "after", "contempl", "thought", "it", "more", "reason"], "B_body": "This patch allows security groups to be referred to by name in rules by using the group_name parameter. If a named security group does not exist, it will be automatically created.\n\nRules now also support a type parameter to specify whether they are ingress or egress rules. If the type parameter is omitted the rule will be considered an ingress rule.\n", "B_clean_body": ["thi", "patch", "allow", "secur", "group", "refer", "by", "name", "rule", "by", "group", "name", "paramet", "name", "secur", "group", "not", "exist", "it", "will", "automat", "creat", "rule", "now", "also", "support", "type", "paramet", "specifi", "whether", "they", "are", "ingress", "or", "egress", "rule", "type", "paramet", "omit", "rule", "will", "consid", "ingress", "rule"], "title_sim": [0.865679277212002], "body_sim": [0.5666268092362796], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.8832684824902723, 0.8832684824902723], "pattern": 0, "time": 53}, {"A_title": "Added ability to create EC2 volume from snapshot", "A_clean_title": ["ad", "abil", "creat", "ec2", "volum", "snapshot"], "B_title": "Added ability to create EBS volume based off of snapshot.", "B_clean_title": ["ad", "abil", "creat", "eb", "volum", "base", "off", "snapshot"], "A_body": "ec2_vol module now takes optional snapshot argument\nAdded relevant module argument handler and documentation\n", "A_clean_body": ["ec2", "vol", "modul", "now", "take", "option", "snapshot", "argument", "ad", "relev", "modul", "argument", "handler", "document"], "B_body": "Changed the ec2_vol module so it allows for someone to use a snapshot.\n", "B_clean_body": ["chang", "ec2", "vol", "modul", "so", "it", "allow", "someon", "use", "snapshot"], "title_sim": [0.7767945364581187], "body_sim": [0.2049389558715055], "file_list_sim": 1.0, "overlap_files_len": 1, "code_sim": [0.0, 0.0], "location_sim": [0.49473684210526314, 0.49473684210526314], "pattern": 0, "time": 24}]